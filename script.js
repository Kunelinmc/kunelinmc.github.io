/**release 0.2.4*/
let _0x14e412=function(){let t=!0;return function(e,n){let i=t?function(){if(n){let t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}(),_0x1d9bde=_0x14e412(this,function(){let t={};return t.OKYEw="(((.+)+)+)+$",_0x1d9bde.toString().search("(((.+)+)+)+$").toString().constructor(_0x1d9bde).search(t.OKYEw)});_0x1d9bde();let _0xf5849=function(){let t=!0;return function(e,n){let i=t?function(){if(n){let t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}(),_0x4cf56a=_0xf5849(this,function(){let t={sTJul:function(t,e){return t+e},zYsqJ:"return (function() ",OjeNX:'{}.constructor("return this")( )',ssyiE:function(t){return t()},omIXd:"warn",qFAyr:"info",fNWAj:"table",qnrUp:"trace",oXoBk:function(t,e){return t<e}},e=function(){let e;try{e=Function(t.sTJul(t.zYsqJ+t.OjeNX,");"))()}catch(n){e=window}return e},n=t.ssyiE(e),i=n.console=n.console||{},a=["log",t.omIXd,t.qFAyr,"error","exception",t.fNWAj,t.qnrUp];for(let s=0;t.oXoBk(s,a.length);s++){let o=_0xf5849.constructor.prototype.bind(_0xf5849),r=a[s],c=i[r]||o;o.__proto__=_0xf5849.bind(_0xf5849),o.toString=c.toString.bind(c),i[r]=o}});_0x4cf56a();import{initializeApp as t}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";import{getAuth as e,signInWithPopup as n,GoogleAuthProvider as i,onAuthStateChanged as a,signInWithEmailAndPassword as s,signOut as o}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";import{getStorage as r,ref as c,uploadBytesResumable as l,getDownloadURL as d}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-storage.js";import{getFirestore as u,enableIndexedDbPersistence as h,collection as $,setDoc as x,doc as p,deleteDoc as b,getDoc as f,where as _,getDocs as m,startAfter as v,onSnapshot as g,query as C,orderBy as w,arrayUnion as L,arrayRemove as y,updateDoc as k,limit as T}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";class _0x44d3ea{constructor(t,e={}){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.logicalWidth=0,this.logicalHeight=0,this.devicePixelRatio=window.devicePixelRatio||1,this.updateCanvasSize();let n={minScale:.1,maxScale:5,onClickOutside:null,...e};this.options=n,this.customDrawer=null,this.lastTapTime=0,this.tapTimeout=null,this.scale=1,this.posX=0,this.posY=0,this.isDragging=!1,this.lastX=0,this.lastY=0,this.img=null,this.needsRedraw=!1,this.animationFrameId=null,this.isTouching=!1,this.initialDistance=0,this.initialScale=1,this.touchStartPosX=0,this.touchStartPosY=0,this.touchStartScale=1,this.initialCenterX=0,this.initialCenterY=0,this.rotation=0,this.velocityX=0,this.velocityY=0,this.lastTime=0,this.isInertialMoving=!1,this.decelerationRate=.85,this.minVelocityThreshold=.1,this.setupEventListeners(),this.requestRedraw()}updateCanvasSize(){let t={};t.GARpl=function(t,e){return t+e},t.JVqeG=function(t,e){return t*e};let e=t,n=this.canvas.parentElement;this.logicalWidth=n.clientWidth,this.logicalHeight=n.clientHeight,this.devicePixelRatio=window.devicePixelRatio||1,this.canvas.style.width=this.logicalWidth+"px",this.canvas.style.height=e.GARpl(this.logicalHeight,"px"),this.canvas.width=Math.floor(this.logicalWidth*this.devicePixelRatio),this.canvas.height=Math.floor(e.JVqeG(this.logicalHeight,this.devicePixelRatio)),this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio)}setupEventListeners(){let t={};t.VkJuf="touchend",t.HTzRf="resize",t.eSjRm="mouseup";let e=t,n="10|7|21|4|1|20|16|6|2|17|5|9|12|8|11|19|15|14|13|3|18|0|22".split("|"),i=0;for(;;){switch(n[i++]){case"0":this.canvas.addEventListener("touchmove",this.handleTouchMove);continue;case"1":this.handleResize=this.handleResize.bind(this);continue;case"2":this.handleWheel=this.handleWheel.bind(this);continue;case"3":this.canvas.addEventListener("mouseleave",this.handleMouseLeave);continue;case"4":this.canvas.addEventListener(e.VkJuf,this.handleCanvasTouchEnd);continue;case"5":this.handleTouchMove=this.handleTouchMove.bind(this);continue;case"6":this.handleMouseUp=this.handleMouseUp.bind(this);continue;case"7":this.handleCanvasTouchEnd=this.handleCanvasTouchEnd.bind(this);continue;case"8":this.handleMouseLeave=this.handleMouseLeave.bind(this);continue;case"9":this.handleTouchEnd=this.handleTouchEnd.bind(this);continue;case"10":this.handleCanvasClick=this.handleCanvasClick.bind(this);continue;case"11":window.addEventListener(e.HTzRf,this.handleResize);continue;case"12":this.draw=this.draw.bind(this);continue;case"13":this.canvas.addEventListener("wheel",this.handleWheel);continue;case"14":document.addEventListener(e.eSjRm,this.handleMouseUp);continue;case"15":document.addEventListener("mousemove",this.handleMouseMove);continue;case"16":this.handleMouseMove=this.handleMouseMove.bind(this);continue;case"17":this.handleTouchStart=this.handleTouchStart.bind(this);continue;case"18":this.canvas.addEventListener("touchstart",this.handleTouchStart);continue;case"19":this.canvas.addEventListener("mousedown",this.handleMouseDown);continue;case"20":this.handleMouseDown=this.handleMouseDown.bind(this);continue;case"21":this.canvas.addEventListener("click",this.handleCanvasClick);continue;case"22":this.canvas.addEventListener(e.VkJuf,this.handleTouchEnd);continue}break}}getDisplayWidth(){return this.rotation%180==90?this.img.height:this.img.width}getDisplayHeight(){let t={};return t.dUnmf=function(t,e){return t===e},t.dUnmf(this.rotation%180,90)?this.img.width:this.img.height}calculateInitialScale(){let t={};if(t.NJVJS=function(t,e){return t/e},!this.img)return;let e=this.getDisplayWidth(),n=this.getDisplayHeight(),i=this.logicalWidth/e,a=t.NJVJS(this.logicalHeight,n);this.options.minScale=Math.min(i,a,1),this.scale=this.options.minScale}centerImage(){let t={};t.jcxZQ=function(t,e){return t*e},t.vnqLY=function(t,e){return t*e},t.Evuss=function(t,e){return t/e},t.pjcRQ=function(t,e){return t-e};let e=t;if(!this.img)return;let n=e.jcxZQ(this.getDisplayWidth(),this.scale),i=e.vnqLY(this.getDisplayHeight(),this.scale);this.posX=e.Evuss(e.pjcRQ(this.logicalWidth,n),2),this.posY=e.pjcRQ(this.logicalHeight,i)/2,this.enforceBounds()}setCustomDrawer(t){let e={};e.auiXA="function",e.yJABt="setCustomDrawer 期望接收一个函数";let n=e;typeof t===n.auiXA?this.customDrawer=t:console.error(n.yJABt)}clearCustomDrawer(){this.customDrawer=null}draw(){let t={};t.QArLd=function(t,e){return t*e},t.qtpLg=function(t,e){return t+e},t.pvQlA=function(t,e){return t/e},t.HMmbF=function(t,e){return t/e};let e=t;if(this.needsRedraw){if(this.needsRedraw=!1,this.ctx.clearRect(0,0,this.logicalWidth,this.logicalHeight),this.img){this.ctx.save();let n=e.QArLd(this.getDisplayWidth(),this.scale),i=e.QArLd(this.getDisplayHeight(),this.scale);this.ctx.translate(e.qtpLg(this.posX,n/2),e.qtpLg(this.posY,e.pvQlA(i,2))),this.ctx.rotate(this.rotation*Math.PI/180),this.ctx.scale(this.scale,this.scale),this.ctx.drawImage(this.img,-this.img.width/2,e.HMmbF(-this.img.height,2)),this.ctx.restore()}this.customDrawer&&this.customDrawer(this.ctx,this)}}rotate(){this.rotation=(this.rotation+90)%360,this.calculateInitialScale(),this.centerImage(),this.requestRedraw()}loadImage(t){this.img=new Image,this.img.onload=()=>{this.rotation=0,this.calculateInitialScale(),this.centerImage(),this.requestRedraw()},this.img.src=t}enforceBounds(){let t={};t.srBHV=function(t,e){return t-e},t.PiKuj=function(t,e){return t/e},t.lcYSI=function(t,e){return t>e},t.hKuht=function(t,e){return t-e};let e=t;if(!this.img)return;let n=this.getDisplayWidth()*this.scale,i=this.getDisplayHeight()*this.scale;n>this.logicalWidth?this.posX=Math.min(Math.max(this.posX,e.srBHV(this.logicalWidth,n)),0):this.posX=e.PiKuj(e.srBHV(this.logicalWidth,n),2),e.lcYSI(i,this.logicalHeight)?this.posY=Math.min(Math.max(this.posY,this.logicalHeight-i),0):this.posY=e.hKuht(this.logicalHeight,i)/2}isInImageArea(t,e){let n={};n.skiPu=function(t,e){return t*e},n.iqczd=function(t,e){return t>=e},n.DwEkc=function(t,e){return t<=e};let i=n;if(!this.img)return!1;let a=i.skiPu(this.getDisplayWidth(),this.scale),s=this.getDisplayHeight()*this.scale,o=this.posX,r=this.posY,c=Math.min(o+a,this.logicalWidth),l=Math.min(r+s,this.logicalHeight);return i.iqczd(t,Math.max(o,0))&&t<=c&&e>=Math.max(r,0)&&i.DwEkc(e,l)}requestRedraw(){this.needsRedraw||(this.needsRedraw=!0,this.canvas.dispatchEvent(new MouseEvent("mousemove")),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.animationFrameId=requestAnimationFrame(this.draw))}handleMouseDown(t){let e={};e.mbyXU=function(t,e){return t-e};let n=this.canvas.getBoundingClientRect(),i=e.mbyXU(t.clientX,n.left),a=t.clientY-n.top;this.isDraggable()&&this.isInImageArea(i,a)&&(this.isDragging=!0,this.lastX=t.clientX,this.lastY=t.clientY,this.canvas.style.cursor="grabbing")}handleMouseLeave(){let t={};t.fdSwu="default",this.canvas.style.cursor=t.fdSwu}handleMouseMove(t){let e={};e.sGOZB="grabbing",e.GALjq="default",e.YeJIm=function(t,e){return t-e},e.xTsfP=function(t,e){return t>e},e.bkaqg=function(t,e){return t/e};let n=e,i=this.canvas.getBoundingClientRect(),a=t.clientX-i.left,s=t.clientY-i.top;if(this.isInImageArea(a,s)?this.canvas.style.cursor=this.isDragging?n.sGOZB:"grab":this.canvas.style.cursor=n.GALjq,this.isDragging){let o=Date.now(),r=n.YeJIm(o,this.lastTime);this.lastTime=o;let c=n.YeJIm(t.clientX,this.lastX),l=t.clientY-this.lastY;this.posX+=c,this.posY+=l,n.xTsfP(r,0)&&(this.velocityX=c/r,this.velocityY=n.bkaqg(l,r)),this.lastX=t.clientX,this.lastY=t.clientY,this.enforceBounds(),this.requestRedraw()}}handleMouseUp(t){let e={};e.rlatk=function(t,e){return t-e},e.odToR="default";let n=e;this.isDragging=!1,Math.abs(this.velocityX)>this.minVelocityThreshold||Math.abs(this.velocityY)>this.minVelocityThreshold?this.startInertia():(this.velocityX=0,this.velocityY=0);let i=this.canvas.getBoundingClientRect(),a=t.clientX-i.left,s=n.rlatk(t.clientY,i.top);this.isInImageArea(a,s)?this.canvas.style.cursor="grab":this.canvas.style.cursor=n.odToR}startInertia(){this.isInertialMoving=!0,this.lastTime=Date.now(),this.animateInertia()}animateInertia(){let t={AqcZD:function(t,e){return t-e},yHxfn:function(t,e){return t/e},hRQyl:function(t,e){return t*e},abbYa:function(t,e){return t<e},omqOA:function(t,e){return t(e)}};if(!this.isInertialMoving)return;let e=Date.now(),n=t.AqcZD(e,this.lastTime);this.lastTime=e,this.velocityX*=Math.pow(this.decelerationRate,t.yHxfn(n,16)),this.velocityY*=Math.pow(this.decelerationRate,t.yHxfn(n,16)),this.posX+=t.hRQyl(this.velocityX,n),this.posY+=t.hRQyl(this.velocityY,n),this.enforceBounds(),this.requestRedraw(),t.abbYa(Math.abs(this.velocityX),this.minVelocityThreshold)&&Math.abs(this.velocityY)<this.minVelocityThreshold?(this.isInertialMoving=!1,this.velocityX=0,this.velocityY=0):t.omqOA(requestAnimationFrame,this.animateInertia.bind(this))}handleWheel(t){let e={};e.xsgjQ=function(t,e){return t-e},e.chdOb=function(t,e){return t/e},e.tjhRt=function(t,e){return t-e},e.ruzqg=function(t,e){return t/e},e.QOwuj=function(t,e){return t*e},e.Axvup=function(t,e){return t*e};let n=e;t.preventDefault();let i=this.canvas.getBoundingClientRect(),a=n.xsgjQ(t.clientX,i.left),s=n.xsgjQ(t.clientY,i.top);if(!this.isInImageArea(a,s))return;let o=t.deltaY>0?.9:1.1,r=n.chdOb(n.tjhRt(a,this.posX),this.scale),c=n.ruzqg(s-this.posY,this.scale),l=Math.min(Math.max(n.QOwuj(this.scale,o),this.options.minScale),this.options.maxScale);this.posX=a-r*l,this.posY=s-n.Axvup(c,l),this.scale=l,this.enforceBounds(),this.requestRedraw()}handleTouchStart(t){let e={};e.ExHlF=function(t,e){return t===e},e.EAMOR=function(t,e){return t>=e};let n=e;if(n.ExHlF(t.touches.length,0))return;let i=Array.from(t.touches),a=this.getTouchCenter(i);this.initialCenterX=a.x,this.initialCenterY=a.y,this.touchStartPosX=this.posX,this.touchStartPosY=this.posY,this.touchStartScale=this.scale,n.EAMOR(t.touches.length,2)&&(this.initialDistance=this.getTouchDistance(t.touches[0],t.touches[1])),this.isTouching=!0}handleTouchMove(t){let e={};e.mKIXY=function(t,e){return t>e},e.RjBRg=function(t,e){return t/e},e.QIkTb=function(t,e){return t*e},e.PXmMu=function(t,e){return t-e},e.TmFCz=function(t,e){return t-e},e.qwpJT=function(t,e){return t-e},e.azJGu=function(t,e){return t*e},e.wvSMw=function(t,e){return t>e},e.waNUL=function(t,e){return t-e};let n=e;if(!this.isTouching)return;t.preventDefault();let i=Array.from(t.touches);if(0===i.length)return;let a=this.getTouchCenter(i),s=1;if(i.length>=2){let o=this.getTouchDistance(i[0],i[1]);n.mKIXY(this.initialDistance,0)&&(s=n.RjBRg(o,this.initialDistance))}let r=Math.min(Math.max(n.QIkTb(this.touchStartScale,s),this.options.minScale),this.options.maxScale),c=n.RjBRg(this.initialCenterX-this.touchStartPosX,this.touchStartScale),l=n.PXmMu(this.initialCenterY,this.touchStartPosY)/this.touchStartScale;if(this.posX=n.TmFCz(a.x,c*r),this.posY=n.qwpJT(a.y,n.azJGu(l,r)),this.scale=r,this.enforceBounds(),this.requestRedraw(),1===i.length){let d=Date.now(),u=n.qwpJT(d,this.lastTime);this.lastTime=d;let h=this.canvas.getBoundingClientRect(),$=i[0],x=n.qwpJT($.clientX,h.left),p=$.clientY-h.top;n.wvSMw(u,0)&&(this.velocityX=n.waNUL(x,this.lastX)/u,this.velocityY=(p-this.lastY)/u),this.lastX=x,this.lastY=p}}handleTouchEnd(){let t={};t.TVadF=function(t,e){return t>e},this.isTouching=!1,this.initialDistance=0,t.TVadF(Math.abs(this.velocityX),this.minVelocityThreshold)||Math.abs(this.velocityY)>this.minVelocityThreshold?this.startInertia():(this.velocityX=0,this.velocityY=0)}handleResize(){this.updateCanvasSize(),this.img&&(this.calculateInitialScale(),this.centerImage(),this.canvas.dispatchEvent(new MouseEvent("mousemove")),this.requestRedraw())}handleCanvasClick(t){let e={};if(e.cRNNs=function(t,e){return t-e},!this.img)return;let n=this.canvas.getBoundingClientRect(),i=e.cRNNs(t.clientX,n.left),a=t.clientY-n.top;this.isInImageArea(i,a)||this.triggerClickOutside(t)}handleCanvasTouchEnd(t){let e={aMagk:function(t,e){return t>e},yEywK:function(t,e){return t-e},VXPrg:function(t,e){return t-e},KZYFP:function(t,e){return t(e)}};if(!this.img||e.aMagk(t.touches.length,0))return;let n=this.canvas.getBoundingClientRect(),i=t.changedTouches[0],a=e.yEywK(i.clientX,n.left),s=e.yEywK(i.clientY,n.top),o=new Date().getTime();if(360>e.VXPrg(o,this.lastTapTime)){e.KZYFP(clearTimeout,this.tapTimeout);return}this.tapTimeout=setTimeout(()=>{this.isInImageArea(a,s)||this.triggerClickOutside(t),this.lastTapTime=o},200)}getTouchDistance(t,e){let n={};n.QEKvl=function(t,e){return t-e},n.TcjUg=function(t,e){return t*e};let i=n,a=t.clientX-e.clientX,s=i.QEKvl(t.clientY,e.clientY);return Math.sqrt(a*a+i.TcjUg(s,s))}isDraggable(){return this.img&&(this.img.width*this.scale>this.logicalWidth||this.img.height*this.scale>this.logicalHeight)}triggerClickOutside(t){let e={};e.TKHDj="function",e.quzFI=function(t,e){return t-e};let n=e;if(typeof this.options.onClickOutside===n.TKHDj){let i=this.canvas.getBoundingClientRect(),a={x:n.quzFI(t.clientX,i.left),y:t.clientY-i.top,canvasX:t.clientX-i.left,canvasY:t.clientY-i.top,imageX:-1,imageY:-1};this.img&&(a.imageX=(a.canvasX-this.posX)/this.scale,a.imageY=n.quzFI(a.canvasY,this.posY)/this.scale),this.options.onClickOutside(a,t)}}getTouchCenter(t){let e={};e.ANcpU=function(t,e){return t-e};let n=e,i=0,a=0,s=this.canvas.getBoundingClientRect();for(let o of t)i+=n.ANcpU(o.clientX,s.left),a+=n.ANcpU(o.clientY,s.top);let r={};return r.x=i/t.length,r.y=a/t.length,r}destroy(){let t={Eendx:"9|10|7|5|11|0|8|1|4|2|3|6",YXVtU:"wheel",FhwIm:"touchmove",NPDGh:"click",QSxcA:"touchend",IPMzQ:"mouseleave",fQGCj:function(t,e){return t(e)},kwrbs:"touchstart",uwNgj:"resize",hGFPz:"mousemove",ugRdI:"mousedown"},e=t.Eendx.split("|"),n=0;for(;;){switch(e[n++]){case"0":this.canvas.removeEventListener(t.YXVtU,this.handleWheel);continue;case"1":this.canvas.removeEventListener(t.FhwIm,this.handleTouchMove);continue;case"2":this.canvas.removeEventListener(t.NPDGh,this.handleCanvasClick);continue;case"3":this.canvas.removeEventListener(t.QSxcA,this.handleCanvasTouchEnd);continue;case"4":this.canvas.removeEventListener(t.QSxcA,this.handleTouchEnd);continue;case"5":this.canvas.removeEventListener(t.IPMzQ,this.handleMouseLeave);continue;case"6":this.animationFrameId&&t.fQGCj(cancelAnimationFrame,this.animationFrameId);continue;case"7":document.removeEventListener("mouseup",this.handleMouseUp);continue;case"8":this.canvas.removeEventListener(t.kwrbs,this.handleTouchStart);continue;case"9":window.removeEventListener(t.uwNgj,this.handleResize);continue;case"10":document.removeEventListener(t.hGFPz,this.handleMouseMove);continue;case"11":this.canvas.removeEventListener(t.ugRdI,this.handleMouseDown);continue}break}}}function _0xe0a16(t,e,n,i){let a={mrdRp:function(t,e){return t*e},kxGNL:function(t,e){return t+e},aTbSn:function(t,e){return t<e},hyJuR:function(t,e){return t-e},vFLSV:function(t,e){return t(e)},TRcoX:function(t,e){return t<e},cfLig:function(t,e){return t<e},FYbkb:function(t,e){return t>e},CTHxg:function(t,e){return t*e},mEBrI:function(t,e){return t*e},HnHFQ:function(t,e){return t+e},TBLwT:function(t,e){return t*e},ULfvp:function(t,e){return t*e}},s=a.kxGNL(a.CTHxg(3,t)-a.mEBrI(3,n),1),o=a.hyJuR(a.mEBrI(3,n),6*t),r=3*t,c=a.HnHFQ(a.hyJuR(3*e,3*i),1),l=a.TBLwT(3,i)-a.CTHxg(6,e),d=a.ULfvp(3,e);function u(t){return a.mrdRp(a.kxGNL((s*t+o)*t,r),t)}function h(t){return a.kxGNL(a.mrdRp(3*s,t),a.mrdRp(2,o))*t+r}return t=>{var e;return e=function t(e){let n=0,i=1,s=e;for(let o=0;a.aTbSn(o,8);o++){let r=a.hyJuR(a.vFLSV(u,s),e);if(a.TRcoX(Math.abs(r),1e-6))return s;let c=h(s);if(a.cfLig(Math.abs(c),1e-6))break;s-=r/c}for(;a.FYbkb(i,n);){let l=u(s)-e;if(1e-6>Math.abs(l))break;l>0?i=s:n=s,s=(i+n)/2}return s}(t),a.mrdRp(a.kxGNL((a.mrdRp(c,e)+l)*e,d),e)}}function _0x5cb15c(t,e="vertical"){let n={DeubH:function(t,e){return t+e},KSBwE:"ArrowRight",Khpgy:function(t,e){return t+e},HBGUS:function(t){return t()}};function i(){if(t.length<=1){t.forEach(t=>{t._navHandler&&(t.removeEventListener("keydown",t._navHandler),delete t._navHandler)});return}t.forEach((i,a)=>{let s={kMpjQ:function(t,e){return t===e},UrHLz:"ArrowDown",NNmsx:function(t,e){return n.DeubH(t,e)},ktNke:function(t,e){return t+e},MyfEF:"horizontal",upsMA:n.KSBwE,ZMSGQ:function(t,e){return t%e},LxMkU:function(t,e){return n.Khpgy(t,e)},hGoNf:"ArrowLeft"};i._navHandler&&i.removeEventListener("keydown",i._navHandler),i._navHandler=n=>{let i=a;if(s.kMpjQ(e,"vertical")){if(s.kMpjQ(n.key,s.UrHLz))i=s.NNmsx(a,1)%t.length;else{if(!s.kMpjQ(n.key,"ArrowUp"))return;i=s.ktNke(a-1,t.length)%t.length}}else{if(e!==s.MyfEF)return;if(s.kMpjQ(n.key,s.upsMA))i=s.ZMSGQ(s.LxMkU(a,1),t.length);else{if(n.key!==s.hGoNf)return;i=(a-1+t.length)%t.length}}t[i].focus()},i.addEventListener("keydown",i._navHandler)})}i();let a={};return a.removeItem=function e(a){t=t.filter(t=>t!==a),n.HBGUS(i)},a.addItem=function e(a){t.push(a),n.HBGUS(i)},a.updateEventListeners=i,a}HTMLElement.prototype.clear=function(){this.innerHTML=""},HTMLElement.prototype.focusable=function(t){this.tabIndex=t?"0":"-1",this.blur()},HTMLElement.prototype.bindWithCooldown=function(t,e=500){let n={};n.TZNoy="disabled",n.EZTUZ=function(t,e){return t===e},n.KGxDA="click",n.MBaax=function(t,e){return t-e},n.iiktg="keydown";let i=n,a=this;a._bindWithCooldownHandler&&(a.removeEventListener(i.KGxDA,a._bindWithCooldownHandler),a.removeEventListener("keydown",a._bindWithCooldownHandler));let s=0,o=function(n){let o=Date.now();!a.classList.contains(i.TZNoy)&&!a.hasAttribute(i.TZNoy)&&(i.EZTUZ(n.type,i.KGxDA)||i.EZTUZ(n.keyCode,32)||i.EZTUZ(n.keyCode,13))&&(i.MBaax(o,s)>=e||0===e)&&(s=o,t.call(a,n))};a.addEventListener(i.KGxDA,o),a.addEventListener(i.iiktg,o),a._bindWithCooldownHandler=o};let _0x5b560e={set(t,e){let n={};n.QwTIP="Error saving to localStorage";try{let i=JSON.stringify(e);localStorage.setItem(t,i)}catch(a){console.error(n.QwTIP,a)}},get(t,e=null){try{let n=localStorage.getItem(t);return null!==n?JSON.parse(n):e}catch(i){return console.error("Error reading from localStorage",i),e}},remove(t){try{localStorage.removeItem(t)}catch(e){console.error("Error removing from localStorage",e)}},clear(){try{localStorage.clear()}catch(t){console.error("Error clearing localStorage",t)}},has(t){let e={};return e.ViOnW=function(t,e){return t!==e},e.ViOnW(localStorage.getItem(t),null)},keys:()=>Object.keys(localStorage)};class _0x331973{constructor({parent:t,text:e,placement:n="top",interactive:i=!0}){let a={};a.VRnXJ="aria-describedby",a.WYzUe="blur",a.PObxb="focus",a.JSEWm="mouseenter";let s=a;if(this._parent=t,this._content=e,this._placement=n,this._tooltip=null,this._tooltipId="tooltip-"+Math.random().toString(36).substr(2,9),this._parent.setAttribute(s.VRnXJ,this._tooltipId),i){let o="5|4|3|1|0|2".split("|"),r=0;for(;;){switch(o[r++]){case"0":this._parent.addEventListener(s.WYzUe,this.hideTooltip);continue;case"1":this._parent.addEventListener(s.PObxb,this.showTooltip);continue;case"2":this._parent.addEventListener("mouseleave",this.hideTooltip);continue;case"3":this._parent.addEventListener(s.JSEWm,this.showTooltip);continue;case"4":this.hideTooltip=this.hideTooltip.bind(this);continue;case"5":this.showTooltip=this.showTooltip.bind(this);continue}break}}}_createTooltipElement(){let t={};t.lWWxM="xuocLuDI6";let e=_0x1cf4ba(t.lWWxM);return e.setAttribute("placement",this._placement),e.setAttribute("id",this._tooltipId),e.innerText=this._content,e}updatePosition(){let t={};t.Cxqip="top",t.Fhqny=function(t,e){return t-e},t.aRDPV=function(t,e){return t+e},t.dstCQ=function(t,e){return t/e},t.pqQbV="bottom",t.TJmzp=function(t,e){return t/e},t.MiHMr="left",t.gYqVL=function(t,e){return t/e},t.MJRIz="right",t.deOqh=function(t,e){return t/e},t.WTIZV=function(t,e){return t+e};let e=t;if(!this._tooltip)return;let n=this._parent.getBoundingClientRect(),i=this._tooltip.getBoundingClientRect(),a,s;switch(this._placement){case e.Cxqip:a=e.Fhqny(e.Fhqny(window.scrollY+n.top,i.height),8),s=e.Fhqny(e.aRDPV(window.scrollX,n.left)+e.dstCQ(n.width,2),e.dstCQ(i.width,2));break;case e.pqQbV:a=e.aRDPV(e.aRDPV(window.scrollY,n.bottom),8),s=window.scrollX+n.left+n.width/2-e.TJmzp(i.width,2);break;case e.MiHMr:a=e.aRDPV(window.scrollY,n.top)+e.gYqVL(n.height,2)-e.TJmzp(i.height,2),s=e.Fhqny(window.scrollX+n.left-i.width,8);break;case e.MJRIz:a=e.Fhqny(window.scrollY+n.top+n.height/2,e.deOqh(i.height,2)),s=e.WTIZV(window.scrollX+n.right,8);break;default:throw Error("Invalid placement value")}this._tooltip.style.top=a+"px",this._tooltip.style.left=s+"px"}showTooltip(){let t={};t.rUnfr="data-state";let e=t,n="4|5|3|2|0|1".split("|"),i=0;for(;;){switch(n[i++]){case"0":this._tooltip.setAttribute(e.rUnfr,"delayed-open");continue;case"1":this._tooltip.setAttribute("aria-expanded","true");continue;case"2":this.updatePosition();continue;case"3":document.body.appendChild(this._tooltip);continue;case"4":if(this._tooltip)return;continue;case"5":this._tooltip=this._createTooltipElement();continue}break}}hideTooltip(){this._tooltip&&(this._tooltip.setAttribute("data-state","closed"),this._tooltip.setAttribute("aria-expanded","false"),this._tooltip.remove(),this._tooltip=null)}setText(t){this._content=t,this._tooltip&&(this._tooltip.innerText=t,this.updatePosition())}destroy(){let t={};t.vctdh="2|3|0|4|1",t.bMLqV="blur";let e=t,n=e.vctdh.split("|"),i=0;for(;;){switch(n[i++]){case"0":this._tooltip=null;continue;case"1":this._content=null;continue;case"2":this.hideTooltip();continue;case"3":this._parent&&(this._parent.removeAttribute("aria-describedby"),this._parent.removeEventListener("mouseenter",this.showTooltip),this._parent.removeEventListener("focus",this.showTooltip),this._parent.removeEventListener(e.bMLqV,this.hideTooltip),this._parent.removeEventListener("mouseleave",this.hideTooltip));continue;case"4":this._parent=null;continue}break}}}class _0xdcc9bd{constructor({trigger:t,placement:e="bottom"}){let n={qzXYL:"inert",ZVGXl:"xEHCrF5Oe",PoPTG:function(t,e){return t(e)},EUasb:function(t,e){return t(e)},HJJwx:"xC3Uih0ex",XBNPr:"data-state",KxLrw:"open",frhHK:"aria-modal",Mehvn:"true"},i="_"+_0x34c187(12);this.trigger=t,this.placement=e,this.Root=_0x1cf4ba(n.ZVGXl),this.Overlay=n.PoPTG(_0x1cf4ba,"overlay"),this.Content=n.EUasb(_0x1cf4ba,n.HJJwx),this.Root.setAttribute(n.XBNPr,n.KxLrw),this.Root.setAttribute("role","popover"),this.Root.setAttribute(n.frhHK,n.Mehvn),this.Root.id=i,document.body.appendChild(this.Root),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.onwheel=function(t){t.ctrlKey&&t.preventDefault()};let a=n.EUasb(_0x3d7981,i);this._deactivated_elements=document.querySelectorAll("body > *:not(#"+a+", script, style)"),this._deactivated_elements.forEach(t=>{t.setAttribute(n.qzXYL,"true")}),this.Overlay.addEventListener("click",()=>this.close()),this.Overlay.addEventListener("contextmenu",()=>this.close()),document.addEventListener("keydown",this._handleKeyDown),this._setPosition(),window.addEventListener("resize",this._handleResize)}_handleResize=()=>{this._setPosition()};_setPosition(){let t={};t.FaDwc="absolute";let e=this.trigger.getBoundingClientRect(),n=this.Content.getBoundingClientRect(),i;if(Array.isArray(this.placement)){for(let a of this.placement){let s=this._calculatePosition(a,e,n);if(this._isPositionWithinViewport(s,n)){i=a;break}}i||(i=this.placement[0])}else i=this.placement;let o=this._calculatePosition(i,e,n);this.Content.style.position=t.FaDwc,this.Content.style.top=o.top+"px",this.Content.style.left=o.left+"px"}_calculatePosition(t,e,n){let i={};i.jiOsQ="top",i.jWeby=function(t,e){return t-e},i.EMyAk="bottom",i.xjwQt="left",i.iwqBS="start",i.HQLld="end",i.IEeMV=function(t,e){return t+e},i.vsPuj=function(t,e){return t===e},i.qrIIx=function(t,e){return t+e},i.AnjAn=function(t,e){return t-e},i.WItuX=function(t,e){return t/e};let a=i,s=0,o=0,[r,c]=t.split("-");switch(r){case a.jiOsQ:s=a.jWeby(e.top,n.height);break;case a.EMyAk:s=e.bottom;break;case a.xjwQt:o=a.jWeby(e.left,n.width);break;case"right":o=e.right}switch(c){case a.iwqBS:o=e.left;break;case a.HQLld:o=a.jWeby(a.IEeMV(e.left,e.width),n.width);break;default:r===a.jiOsQ||a.vsPuj(r,"bottom")?o=a.qrIIx(e.left,a.AnjAn(e.width,n.width)/2):s=e.top+a.WItuX(a.jWeby(e.height,n.height),2)}let l={};return l.top=s,l.left=o,l}_isPositionWithinViewport(t,e){let n={};n.BxHnq=function(t,e){return t+e};let i=window.innerWidth,a=window.innerHeight,{top:s,left:o}=t;return s>=0&&o>=0&&s+e.height<=a&&n.BxHnq(o,e.width)<=i}_handleKeyDown=t=>{let e={};e.ofKGq=function(t,e){return t===e},e.ofKGq(t.keyCode,27)&&(this.close(),this.trigger.focus())};_removeListeners(){let t={};t.AeXUY="keydown",t.UDYdi="resize";let e=t;document.removeEventListener(e.AeXUY,this._handleKeyDown),window.removeEventListener(e.UDYdi,this._handleResize)}onClose(t){this.onCloseCallback=t}close(){let t={};t.TWvzC="inert";let e=t;this._removeListeners(),this._deactivated_elements.forEach(t=>{t.removeAttribute(e.TWvzC)}),this.Root.setAttribute("data-state","closed"),setTimeout(()=>{this.Root.remove(),this.onCloseCallback&&this.onCloseCallback()},100)}}function _0x3d7981(t){let e={};e.XHMDF="\\$&",e.dJCpm=function(t,e){return t+e};let n=e;return t.replace(/([!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~])/g,n.XHMDF).replace(/^(-?\d)/,n.dJCpm("\\3",t.charAt(0))+" ")}class _0x12c504{constructor({closeOnOverlayClick:t=!1,closeOnEsc:e=!1,excludeElements:n=[]}={}){let i={xYQRp:function(t,e){return t(e)},Uigfk:"overlay",CXVqG:"content",vAkPP:"data-state",kWonk:"dialog",VAGZE:"aria-modal",QGTPr:"show",VWvCj:"click",lbpgE:"keydown"},a="_"+_0x34c187(12);this.Root=_0x1cf4ba("x54SkYRT0"),this.Overlay=i.xYQRp(_0x1cf4ba,i.Uigfk),this.Content=i.xYQRp(_0x1cf4ba,i.CXVqG),this.Root.setAttribute(i.vAkPP,"open"),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.setAttribute("role",i.kWonk),this.Root.setAttribute(i.VAGZE,"true"),this.Root.onwheel=function(t){t.ctrlKey&&t.preventDefault()},this.Lock=!1,this.Root.id=a;let s=i.xYQRp(_0x3d7981,a);this._deactivated_elements=Array.from(document.querySelectorAll("body > *:not(#"+s+", script, style)")),this._deactivated_elements.forEach(t=>t.setAttribute("inert","true")),this._exclude_for_restore=n,document.body.appendChild(this.Root),this.Root.classList.add(i.QGTPr),_0x12c504.stack.push(this),t&&this.Overlay.addEventListener(i.VWvCj,this._handleOverlayClick),e&&document.addEventListener(i.lbpgE,this._handleKeyDown)}_handleOverlayClick=()=>{this.close()};_handleKeyDown=t=>{let e={};e.dUgpm=function(t,e){return t===e},e.dUgpm(t.keyCode,27)&&_0x12c504.stack[_0x12c504.stack.length-1]===this&&this.close()};onClose(t){this.onCloseCallback=t}close(){let t={};t.fTsDl=function(t,e){return t instanceof e},t.NssAx=function(t,e){return t>e};let e=t;if(!this.Lock){let n=_0x12c504.stack.indexOf(this);e.NssAx(n,-1)&&_0x12c504.stack.splice(n,1),this.onCloseCallback&&this.onCloseCallback(),this._exclude_for_restore.length>0?this._exclude_for_restore.forEach(t=>{e.fTsDl(t,HTMLElement)&&t.removeAttribute("inert")}):this._deactivated_elements.forEach(t=>{t.removeAttribute("inert")}),this.Root.setAttribute("data-state","closed"),setTimeout(()=>{this.Root.remove()},100),this._removeListeners()}}_removeListeners(){this.Overlay.onclick=null,document.removeEventListener("keydown",this._handleKeyDown)}}_0x12c504.stack=[];class _0x269d2f extends _0x12c504{constructor({title:t,message:e,buttons:n=[],closeOnOverlayClick:i=!1,closeOnEsc:a=!0,showCloseButton:s=!1}={}){let o={};o.veZkT="0px",o.KKwYO="xv1VrMJb6",o.kvIzk="xLDQZ1SSl",o.sAwwe=function(t,e){return t>e};let r=o,c={};c.closeOnOverlayClick=i,c.closeOnEsc=a,super(c);let l=this._createHeader(t,s),d=this._createBody(e);if(this.Content.style.padding=r.veZkT,this.Content.classList.add(r.KKwYO),this.Content.classList.add(r.kvIzk),this.Content.appendChild(l),this.Content.appendChild(d),r.sAwwe(n.length,0)){let u=this._createFooter(n);d.appendChild(u)}}_createHeader(t,e){let n={};n.zhUca="div",n.pwMvS="xrYn5ZY3v lf gn",n.JfjvM=function(t,e){return t||e},n.BfzYt="Alert";let i=n,a=document.createElement(i.zhUca);a.className=i.pwMvS;let s=document.createElement(i.zhUca);if(s.className="x6Y89FynP",s.textContent=i.JfjvM(t,i.BfzYt),a.appendChild(s),e){let o=_0x1cf4ba("xvb5soWNa");o.focusable(!0),o.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',o.bindWithCooldown(()=>{this.close()}),a.appendChild(o)}return a}_createBody(t){let e={};e.EeROv="xujSSErs5",e.QnnNl=function(t,e){return t||e},e.tmqfb="Are you sure?";let n=e,i=document.createElement("div");i.className="xWDUelLWA";let a=document.createElement("div");return a.className=n.EeROv,a.innerHTML=n.QnnNl(t,n.tmqfb),i.appendChild(a),i}_createFooter(t){let e={hgDAq:function(t){return t()},diWIP:"div",hnQpV:function(t,e){return t+e},BJZqs:"xgw2tzk6r ",GOHfh:"tabindex"},n=document.createElement(e.diWIP);n.className="xWh2LBcgj";let i=_0x5cb15c([],"horizontal");return t.forEach(({text:t,classList:a=[],onClick:s})=>{let o={mKWYP:function(t){return e.hgDAq(t)}},r=document.createElement(e.diWIP);r.className=e.hnQpV(e.BJZqs,a.join(" ")),r.setAttribute(e.GOHfh,"0"),r.textContent=t,r.bindWithCooldown(()=>{s&&o.mKWYP(s),this.close()}),i.addItem(r),n.appendChild(r)}),n}}let _0x1cf4ba=t=>{let e={};e.CIZYH="div";let n=e,i=document.createElement(n.CIZYH);return i.classList.add(t),i},_0x36aa33=t=>document.querySelector(t);function _0x34c187(t){let e={};e.Pkkyz=function(t,e){return t*e};let n=e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="";for(let s=0;s<t;s++)a+=i.charAt(Math.floor(n.Pkkyz(Math.random(),i.length)));return a}function _0x3d5cd8(t,e,n={}){let i={KVIkk:function(t,e){return t===e},eQphQ:"xSwoj5Cx2",crcmv:function(t,e){return t(e)},PqLsm:function(t,e){return t<e},TuXFF:function(t,e){return t(e)}},{interval:a=24,fadeDuration:s=214,bezierControl:o=[.42,0,1,1]}=n,r=_0xe0a16(...o),c=Array.from((new DOMParser).parseFromString("<div>"+e+"</div>","text/html").body.firstChild.childNodes),l=[];function d(t){let e={BlQlZ:function(t,e){return i.crcmv(t,e)},owlug:function(t,e){return i.PqLsm(t,e)}},n=performance.now();function a(i){let o=Math.min((i-n)/s,1),c=e.BlQlZ(r,o);t.style.opacity=c,e.owlug(o,1)&&requestAnimationFrame(a)}requestAnimationFrame(a)}c.forEach(e=>(function t(e,n){if(i.KVIkk(e.nodeType,Node.TEXT_NODE)){let a=e.textContent.split("");for(let s of a){let o=document.createElement("span");o.classList.add(i.eQphQ),o.textContent=s,n.appendChild(o),l.push(o)}}else if(e.nodeType===Node.ELEMENT_NODE){let r=e.cloneNode(!1);n.appendChild(r),Array.from(e.childNodes).forEach(e=>t(e,r))}})(e,t)),function t(){if(l.length){let e=l.shift();i.TuXFF(d,e),setTimeout(t,a)}}()}function _0x330037(t,e){let n={JRuVt:function(t,e){return t>=e},DBIHZ:function(t,e){return t<e},HQVOB:function(t,e){return t(e)},exSWr:function(t,e){return t/e},yBNOe:function(t,e){return t-e},XpJXk:function(t,e){return t*e},zjxWn:function(t,e){return t*e},ErrOy:function(t,e){return t+e}},i=new Date,a=new Date(t),s=new Date(e);if(n.JRuVt(i,a)&&i<=s)return"現在";let o=i<a?a:s,r=o.getHours(),c;c=r>=0&&r<6?"清晨":r<12?"早上":n.DBIHZ(r,18)?"下午":"晚上";let l=t=>new Date(t.getFullYear(),t.getMonth(),t.getDate()),d=n.HQVOB(l,o),u=l(i),h=Math.round(n.exSWr(n.yBNOe(d,u),n.XpJXk(n.XpJXk(n.zjxWn(1e3,60),60),24))),$;switch(h){case -2:$="前天";break;case -1:$="昨天";break;case 0:$="今天";break;case 1:$="明天";break;case 2:$="後天";break;default:$=n.ErrOy(o.getMonth(),1)+"/"+o.getDate()}return $+" "+c}function _0x3bce70(){let t={};return t.screenWidth=window.screen.width,t.screenHeight=window.screen.height,t.devicePixelRatio=window.devicePixelRatio,t}function _0x411640(){let t={};t.cMcFz=function(t,e){return t>e},t.Fldyn="Mobile",t.EkLMY="Tablet",t.CcOna="macOS",t.Qqtih="Desktop",t.rHdjy="Linux",t.ztASZ="Unknown";let e=t,n=navigator.userAgent||navigator.vendor||window.opera,i=navigator.platform,a=navigator.maxTouchPoints||0;if(/iPad|iPhone|iPod/.test(n)||"MacIntel"===i&&e.cMcFz(a,1)){let s=n.match(/OS (\d+)_?(\d+)?_?(\d+)?/i);if(s)return{os:"iOS",version:(s[1]||"0")+"."+(s[2]||"0")+"."+(s[3]||"0"),deviceType:/iPad/.test(n)?"Tablet":e.Fldyn}}if(/Android/.test(n)){let o=n.match(/Android (\d+)\.?(\d+)?\.?(\d+)?/i);if(o)return{os:"Android",version:(o[1]||"0")+"."+(o[2]||"0")+"."+(o[3]||"0"),deviceType:/Mobile/.test(n)?e.Fldyn:e.EkLMY}}if(/Win/.test(i)){let r=n.match(/Windows NT (\d+)\.?(\d+)?/i);if(r){let c=r[1]||"0",l=r[2]||"0",d={};return d.os="Windows",d.version=c+"."+l,d.deviceType="Desktop",d}let u={};return u.os="Windows",u.version=null,u.deviceType="Desktop",u}if(/Mac/.test(i)){let h=n.match(/Mac OS X (\d+)_?(\d+)?_?(\d+)?/i);if(h){let $=h[1]||"0",x=h[2]||"0",p=h[3]||"0",b={};return b.os=e.CcOna,b.version=$+"."+x+"."+p,b.deviceType=e.Qqtih,b}let f={};return f.os="macOS",f.version=null,f.deviceType=e.Qqtih,f}if(/Linux/.test(i)){let _={};return _.os=e.rHdjy,_.version=null,_.deviceType="Desktop",_}let m={};return m.os=e.ztASZ,m.version=null,m.deviceType="Unknown",m}function _0x5e174d(t){return t.replace(/\{RUBY_B#(.*?)\}(.*?)\{RUBY_E#\}/g,(t,e,n)=>"<ruby><rb>"+n+"</rb><rt>"+e+"</rt></ruby>")}let _0x22b070={};_0x22b070.edit='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" /><path d="M13.5 6.5l4 4" /></svg>',_0x22b070.trash='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',_0x22b070.copy='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg>';let _0x282fbf=_0x22b070;class _0x2b7b08{constructor({closeOnOverlayClick:t=!1,closeOnEsc:e=!1,excludeElements:n=[]}={}){let i={OYOGE:function(t,e){return t(e)},YXTkC:"drawer-header",PLNlV:"drawer-body",QFyfu:"data-state",ypvMS:"open",amQsj:"dialog",QZgRv:"aria-modal",VsiRF:"keydown"},a="_"+i.OYOGE(_0x34c187,12);this.Root=i.OYOGE(_0x1cf4ba,"drawer-root"),this.Overlay=_0x1cf4ba("drawer-overlay"),this.Content=_0x1cf4ba("drawer-content"),this.Header=_0x1cf4ba(i.YXTkC),this.Handle=document.createElement("div"),this.Handle.className="drawer-drag-handle",this.Header.appendChild(this.Handle),this.Body=_0x1cf4ba(i.PLNlV),this.Content.appendChild(this.Header),this.Content.appendChild(this.Body),this.Root.setAttribute(i.QFyfu,i.ypvMS),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.setAttribute("role",i.amQsj),this.Root.setAttribute(i.QZgRv,"true"),this.Root.onwheel=t=>{t.ctrlKey&&t.preventDefault()},this.Root.id=a;let s=_0x3d7981(a);this._deactivated_elements=Array.from(document.querySelectorAll("body > *:not(#"+s+", script, style)")),this._deactivated_elements.forEach(t=>t.setAttribute("inert","true")),this._exclude_for_restore=n,document.body.appendChild(this.Root),this.Root.classList.add("show"),_0x2b7b08.stack.push(this),t&&this.Overlay.addEventListener("click",this._handleOverlayClick),e&&document.addEventListener(i.VsiRF,this._handleKeyDown),this._setupDrag()}_handleOverlayClick=()=>{this.close()};_handleKeyDown=t=>{let e={};e.PrttY=function(t,e){return t===e},e.onTjc=function(t,e){return t===e};let n=e;if(n.PrttY(t.keyCode,27)){let i=_0x2b7b08.stack[_0x2b7b08.stack.length-1];n.onTjc(i,this)&&this.close()}};onClose(t){this.onCloseCallback=t}close(){let t={VLtRZ:function(t,e){return t>e},PSaUv:function(t){return t()},UJJCU:"x9GmoP75O",zxhDw:function(t,e,n){return t(e,n)}},e=_0x2b7b08.stack.indexOf(this);e>-1&&_0x2b7b08.stack.splice(e,1),this.onCloseCallback&&this.onCloseCallback();let n=()=>{t.VLtRZ(this._exclude_for_restore.length,0)?this._exclude_for_restore.forEach(t=>t.removeAttribute("inert")):this._deactivated_elements.forEach(t=>t.removeAttribute("inert"))},i=window.getComputedStyle(this.Content).transform;"none"===i||i.includes("matrix")?(this.Content.classList.remove(t.UJJCU),this.Content.style.transform="translateY(100%)",t.zxhDw(setTimeout,()=>{t.PSaUv(n),this.Root.remove()},300)):(t.PSaUv(n),this.Root.remove()),this._removeListeners()}_removeListeners(){let t={};t.XZRuA="keydown",this.Overlay.onclick=null,document.removeEventListener(t.XZRuA,this._handleKeyDown)}_setupDrag(){let t={ecWWx:".xBWmlKrN2",WuCuD:function(t,e){return t-e},hPxQp:function(t,e){return t>e},NorVB:function(t,e){return t-e},zQDLA:function(t,e){return t/e},fnYPY:"translateY(0)",DuNDq:function(t,e){return t(e)}},e=0,n=0,i=0,a=!1,s=n=>{n.target.closest(t.ecWWx)||(e=n.touches?n.touches[0].clientY:n.clientY,i=Date.now(),a=!0,this.Content.classList.add("x9GmoP75O"))},o=i=>{if(!a)return;n=i.touches?i.touches[0].clientY:i.clientY;let s=t.WuCuD(n,e);t.hPxQp(s,0)&&(this.Content.style.transform="translateY("+s+"px)")},r=()=>{if(!a)return;let s=t.NorVB(n,e),o=t.zQDLA(Date.now()-i,1e3),r=this.Content.offsetHeight;this.Content.classList.remove("x9GmoP75O"),s>.5*r||t.hPxQp(s/o,800)?this.close():this.Content.style.transform=t.fnYPY,a=!1},c={};c.passive=!0,this.Content.addEventListener("touchstart",s,c);let l={};l.passive=!0,this.Content.addEventListener("touchmove",o,l),this.Content.addEventListener("touchend",r),this.Content.addEventListener("mousedown",e=>{let n={YllpM:function(t){return t()}};t.DuNDq(s,e);let i=t=>o(t),a=()=>{n.YllpM(r),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)})}}_0x2b7b08.stack=[];let _0x234e0d={};_0x234e0d.apiKey="AIzaSyAp73V5ZsBUtpy4kS3-QyGirGSpz71DPWo",_0x234e0d.authDomain="smiling-theory-397204.firebaseapp.com",_0x234e0d.databaseURL="https://smiling-theory-397204-default-rtdb.asia-southeast1.firebasedatabase.app",_0x234e0d.projectId="smiling-theory-397204",_0x234e0d.storageBucket="smiling-theory-397204.appspot.com",_0x234e0d.messagingSenderId="360479398694",_0x234e0d.appId="1:360479398694:web:05b7df5ce277f89ea8ffe7",_0x234e0d.measurementId="G-6BKTT1K7D1";let _0x27fa55=t(_0x234e0d),_0x372c97=u(_0x27fa55),_0x33a445=r(_0x27fa55),_0x1ebc56=new i,_0x2a84a1=e();h(_0x372c97).then(()=>{console.log("離線緩存功能已啟用")}).catch(t=>{let e={};e.miiNo=function(t,e){return t===e},e.esUSQ="failed-precondition",e.FSuOF="已開啟多個分頁，無法啟用離線緩存功能",e.rNHLi=function(t,e){return t===e},e.GAXns="unimplemented";let n=e;n.miiNo(t.code,n.esUSQ)?console.error(n.FSuOF):n.rNHLi(t.code,n.GAXns)&&console.error("當前瀏覽器不支持離線緩存")});let _0x369d1c=/(Android|webOS|Windows Phone|iPhone|iPod|iPad)/i.test(window.navigator.platform)||window.innerWidth<550,_0x52cd8c=[],_0x32bc5b={sidebar:_0x36aa33(".xFz8bwNFr"),main:_0x36aa33(".x8o58HttN"),messageInput:_0x36aa33(".xtsARDHTI"),searchInput:_0x36aa33(".xujXllYgW"),messageContainer:_0x36aa33(".xikyLwDf4"),sendButton:_0x36aa33(".xuwRtDpu4"),fileInput:_0x36aa33(".xVEJA40Qh"),attachButton:_0x36aa33(".xpbRox0hO#xJTcQcZ9E"),stickerButton:_0x36aa33(".xpbRox0hO#xbXZpIWEa"),markButton:_0x36aa33(".xpbRox0hO#xsVrze5YA"),brushButton:_0x36aa33(".xpbRox0hO#xrfvUzMAG"),heading:_0x36aa33(".xehdiGgBv"),backButton:_0x36aa33(".xehdiGgBv .xMyenRl7K .x8JU9DbQZ"),primaryArea:_0x36aa33(".xemr1y6ie"),spinnerContainer:_0x36aa33(".xemr1y6ie .spinner"),spinnerLabel:_0x36aa33(".xemr1y6ie .spinner .xkT2bkntT"),_mb_att_btn:_0x36aa33(".xDADAUUv4"),roomNameLabel:_0x36aa33(".x8o58HttN .xMyenRl7K .xvwhg72ii"),signatureLabel:_0x36aa33(".xlKSJ67AP"),nameLabel:_0x36aa33(".xt4GQkVIo"),avatarLabel:_0x36aa33(".xbVHF6S6B"),avatarWrapper:_0x36aa33(".xaoteDJh4"),profileContainer:_0x36aa33(".xQ6gFUtqT"),layoutResizer:_0x36aa33(".xrFP6D2e1"),statusLabel:_0x36aa33(".xOJE48BLX"),activityBar:_0x36aa33(".pS2na74a"),layoutResizer2:_0x36aa33(".PLc7zlhg")},_0x1d4186='<svg aria-hidden="true" class="xxA4Cqchz" style="min-width: 20px" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n							<path d="M12 3a9 9 0 1 0 9 9"></path>\n						</svg>載入中…',_0x216473={};_0x216473.current="0.0.3",_0x216473.cacheId="x0n0HCjlj",_0x216473.directions='<ul class="xxmjDL5xB xbH7v2Hbn">\n	<li class="xcKqXW8uF">修復了模糊效果無法正確渲染的錯誤</li>\n	<li class="xcKqXW8uF">修復了Drawer無法正確關閉的錯誤</li>\n	</ul>';let _0x3dd3a5=_0x216473,_0x27051a=[],_0x26f8b8={},_0x582efb={},_0xb5d0b9,_0x421845=!1,_0x5607a5="",_0x57089a,_0x47f61b=0,_0x41dcec,_0x17a304=!1,_0x5bf688=!1,_0x50bfd2=_0x32bc5b.messageContainer,_0x33b68c={};_0x33b68c.state=!1,_0x33b68c._a=null,_0x33b68c._b=null,_0x33b68c._n="",_0x33b68c._d="",_0x33b68c._m=[];let _0x3110d4=_0x33b68c,_0x16c994="",_0x390437=null,_0x2fa3b3=!1;if(_0x369d1c)document.body.classList.add("mobile"),_0x32bc5b._mb_att_btn.bindWithCooldown(function(){_0x32bc5b.fileInput.click()});else{document.body.classList.add("desktop");let M={};M.parent=_0x32bc5b.attachButton,M.text="附加文件",M.placement="top",new _0x331973(M),_0x32bc5b.attachButton.bindWithCooldown(function(){_0x32bc5b.fileInput.click()});let E={};E.parent=_0x32bc5b.sendButton,E.text="發送",E.placement="top",E.interactive=!0,new _0x331973(E);let A={};A.parent=_0x32bc5b.stickerButton,A.text="加入貼圖",A.placement="top",A.interactive=!0,new _0x331973(A);let R={};R.parent=_0x32bc5b.markButton,R.text="標記為重要",R.placement="top",R.interactive=!0;let I=new _0x331973(R),H={};H.parent=_0x32bc5b.brushButton,H.text="潤色文本",H.placement="top",H.interactive=!0,new _0x331973(H),_0x5cb15c([_0x32bc5b.attachButton,_0x32bc5b.brushButton,_0x32bc5b.markButton,_0x32bc5b.stickerButton],"horizontal"),_0x32bc5b.brushButton.bindWithCooldown(function(){let t=_0x47db75("潤色文本",!0);t.content.classList.add("lg"),t.body.classList.add("xDLwiKdTE")}),_0x32bc5b.markButton.bindWithCooldown(function(){let t={};t.lFMbe="x3zdxRXQ6",t.YGECn="取消標記";let e=t;_0x5bf688?(_0x5bf688=!1,_0x32bc5b.markButton.classList.remove(e.lFMbe),I.setText("標記為重要")):(_0x5bf688=!0,_0x32bc5b.markButton.classList.add(e.lFMbe),I.setText(e.YGECn))},0);let B=!1,W=0,Y=0,S=t=>{let e={};e.eUOwt="xz7kq9zLe",e.eapzs="mouseup";let n=e;B=!0,document.body.classList.add(n.eUOwt);let i=t.target.getBoundingClientRect();Y=t.clientX-i.left,document.addEventListener("mousemove",D),document.addEventListener(n.eapzs,P)},D=t=>{let e={};e.ObAwR=function(t,e){return t-e};let n=e;if(!B)return;let i=_0x32bc5b.sidebar.getBoundingClientRect().left,a=n.ObAwR(t.clientX,i)-Y;W=a,_0x32bc5b.sidebar.style.width=a+"px"},P=()=>{let t={};t.UtLRw="xjS4MkN99",t.HvRGI="mouseup";let e=t,n="0|2|1|4|3".split("|"),i=0;for(;;){switch(n[i++]){case"0":B=!1;continue;case"1":document.body.classList.remove("xz7kq9zLe");continue;case"2":_0x5b560e.set(e.UtLRw,W);continue;case"3":document.removeEventListener(e.HvRGI,P);continue;case"4":document.removeEventListener("mousemove",D);continue}break}};window.addEventListener("blur",()=>{document.body.classList.remove("resizing"),B=!1}),_0x32bc5b.layoutResizer.addEventListener("mousedown",t=>{S(t)})}function _0x47db75(t,e=!1,...n){let i={HhOCS:function(t,e){return t(e)},zpefb:"x6Y89FynP",IaqUI:"xWDUelLWA",nihdu:"0|3|1|2|5|4",UoLkI:"xvb5soWNa",ejRUM:'<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>'};console.log(n);let a={};a.closeOnEsc=!0,a.closeOnOverlayClick=!0,a.excludeElements=n;let s=new _0x12c504(a),o=i.HhOCS(_0x1cf4ba,"xrYn5ZY3v");o.classList.add("lf"),s.Content.style.padding="0";let r=_0x1cf4ba(i.zpefb);o.appendChild(r),r.innerText=t,s.Content.appendChild(o);let c=_0x1cf4ba(i.IaqUI);s.Content.appendChild(c);let l;if(e){let d=i.nihdu.split("|"),u=0;for(;;){switch(d[u++]){case"0":l=_0x1cf4ba(i.UoLkI);continue;case"1":l.innerHTML=i.ejRUM;continue;case"2":s.close=s.close.bind(s);continue;case"3":l.focusable(!0);continue;case"4":o.appendChild(l);continue;case"5":l.bindWithCooldown(s.close);continue}break}}let h=o.getBoundingClientRect();o.style.minHeight=h.height+"px";let $={};return $.root=s,$.body=c,$.content=s.Content,$.closebtn=l,$.Root=s.Root,$.Content=s.Content,$}async function _0x35fd01(t,e){let n={FNgQQ:"failed",ZYbtH:"xUSR4cuWD",CLDtM:function(t,e){return t(e)},zPLwF:"x8o1OSu71",arDCV:"instant",OEVCp:"xFIqZCKV3",lLuCT:function(t,e){return t(e)},XetUj:"xBWmlKrN2",vKBPW:"x2y08yFOH",URQwu:function(t,e){return t===e},OQrvZ:"image",knHkz:"data-state",qClMV:"嘗試修復偏差位移",yQJpZ:"video",yHfrN:"controlslist",QBdxi:"nodownload",VRSVt:"cache-url",ZsqKn:"xGsec9lFd",WYeDg:"controls",LKKEE:"true",geVEQ:"span",bmxeZ:"xVlceg4Ab",NaIWT:function(t,e,n){return t(e,n)},yuffK:function(t,e){return t>e},JbPGY:"xDVzL7FIt"};if(e.startsWith("<")){let i=e.match(/<\s*(\w+)\s+(\S+)/),a=i[1],s=i[2];if(n.URQwu(a,n.OQrvZ)){let o=document.createElement("img");o.focusable(!0),o.classList.add("xGsec9lFd"),o.classList.add(n.ZYbtH),o.setAttribute(n.knHkz,"loading"),_0x2fa3b3||(console.log(n.qClMV),_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:n.arDCV})),o.onerror=function(){console.log("載入失敗"),o.setAttribute("data-state",n.FNgQQ),o.classList.remove(n.ZYbtH)},o.onload=function(){let e={QOQar:function(t,e,n){return t(e,n)},PdmBf:"xPSnkbRat",QvbsB:"xWuhDLG1C",TNlOB:function(t,e){return n.CLDtM(t,e)},ADEii:n.zPLwF};_0x2fa3b3||(console.log("嘗試修復偏差位移"),_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:n.arDCV})),o.setAttribute("data-state","loaded"),o.classList.remove(n.ZYbtH),t.classList.add(n.OEVCp),o.bindWithCooldown(function(){let t={};t.closeOnEsc=!0,t.closeOnOverlayClick=!0;let n=new _0x12c504(t);n.Content.classList.add(e.PdmBf);let i=document.createElement("canvas");i.classList.add(e.QvbsB),n.Content.appendChild(i);let a=new _0x44d3ea(i,{maxScale:2,onClickOutside(t,n){e.QOQar(o,t,n)}});function o(){a.destroy(),n.close()}a.loadImage(s);let r=e.TNlOB(_0x1cf4ba,"x8o1OSu71");r.focusable(!0),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',r.bindWithCooldown(o),n.Content.appendChild(r);let c=_0x1cf4ba(e.ADEii);c.classList.add("xHZuqwWhI"),c.focusable(!0),c.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5" /></svg>',c.bindWithCooldown(function(){a.rotate()},0),n.Content.appendChild(c)},0)};let r={};r.action="cache-url",r.url=s,navigator.serviceWorker?.controller?.postMessage(r),o.src=s,t.appendChild(o)}else if(n.URQwu(a,n.yQJpZ)){let c=document.createElement("video");c.setAttribute("muted",""),c.focusable(!0),c.setAttribute("controls","true"),c.setAttribute(n.yHfrN,n.QBdxi),c.onloadedmetadata=function(){console.log("嘗試修復偏差位移"),_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:n.arDCV})};let l={};l.action=n.VRSVt,l.url=s,navigator.serviceWorker?.controller?.postMessage(l),c.src=s,c.classList.add(n.ZsqKn),t.appendChild(c)}else if(n.URQwu(a,"audio")){let d=document.createElement("audio");d.focusable(!0),d.setAttribute(n.WYeDg,n.LKKEE);let u={};u.action=n.VRSVt,u.url=s,navigator.serviceWorker?.controller?.postMessage(u),d.src=s,d.classList.add("xGsec9lFd"),t.appendChild(d)}else t.innerHTML='<div class="xUiYNFhtR">無法預覽這個文件 <a class="x0ciSQShX no-wrap" href="'+s+'" target="_blank" rel="noreferrer noopener">下載</a></div>'}else{let h=document.createElement(n.geVEQ),$=n.lLuCT(_0x1cf4ba,"xYj7x2KZ4");h.classList.add(n.bmxeZ),n.NaIWT(_0x5359f7,h,e),t.appendChild(h),t.appendChild($);let x=h.getBoundingClientRect().height;if(n.yuffK(x,125)){t.classList.add(n.JbPGY);let p=_0x1cf4ba("x6EwJGLAa"),b={};b["0"]='<span class="xNM56JYdv">展開全部</span>',b["1"]='<span class="xNM56JYdv">顯示較少</span>',b["2"]='<span class="xNM56JYdv">查看全部</span>';let f=b;p.innerHTML=f[_0x369d1c?2:0],p.focusable(!0);let _=0;p.bindWithCooldown(function(){if(_0x369d1c){let i={};i.closeOnEsc=!0,i.closeOnOverlayClick=!0;let a=new _0x2b7b08(i);a.Root.classList.add("xAQPbc7N3");let s=n.lLuCT(_0x1cf4ba,n.XetUj);a.Body.appendChild(s),_0x5359f7(s,e)}else 0===_?(_=1,t.classList.add(n.vKBPW),p.innerHTML=f[1]):(_=0,t.classList.remove(n.vKBPW),p.innerHTML=f[0])},0),$.appendChild(p)}}}function _0x5359f7(t,e){let n={RjxIP:"desktop",tsjGu:function(t,e){return t!==e},xMNsU:function(t,e){return t>e},ZFqGu:"x0ciSQShX",lYyCb:function(t,e){return t(e)},wCane:function(t,e){return t<e}},i=/@(\w+)/g,a=0,s;for(t.clear();n.tsjGu(s=i.exec(e),null);){let{index:o}=s,r=s[1];n.xMNsU(o,a)&&_0x132455(t,e.slice(a,o));let c=document.createElement("a");c.classList.add(n.ZFqGu),c.focusable(!0),c.dataset.userId=r;let l={};l.userId=r,l.dom=c,_0x3110d4._m.push(l),n.lYyCb(_0x512385,r).then(function(t){let e={FjbvO:function(t,e,n){return t(e,n)},IhrdV:n.RjxIP};t?(c.textContent="@"+(t.name||"未知"),c.bindWithCooldown(function(){e.FjbvO(_0x2a1263,_0x390437,{data:t,type:_0x369d1c?"mobile":e.IhrdV})},0)):c.textContent="@未知"}).catch(function(t){c.textContent="@"+r,console.log("無法載入這位用戶的暱稱",t)}),t.appendChild(c),a=i.lastIndex}n.wCane(a,e.length)&&_0x132455(t,e.slice(a))}function _0x132455(t,e){let n=e.split("\n");n.forEach((e,i)=>{if(e){let a=_0x19653d(e),s=document.createElement("div");s.innerHTML=a,Array.from(s.childNodes).forEach(e=>{t.appendChild(e)})}i<n.length-1&&t.appendChild(document.createElement("br"))})}function _0x19653d(t){let e={};e.yQkoC=function(t,e){return t+e},e.NOhqU=function(t,e){return t+e},e.GvcBO='" target="_blank" rel="noreferrer noopener">';let n=e;return t.replace(/https?:\/\/[^\s/$.?#].[^\s]*/g,function(t){let e=t.replace(/^https?:\/\//,"");return n.yQkoC(n.yQkoC(n.NOhqU('<span class="xCe4Btdzm" tabindex="0"><a class="x0ciSQShX" tabindex="-1" translate="no" href="'+t,n.GvcBO),decodeURIComponent(e)),"</a></span>")})}async function _0x32114a(){let t={ISNsv:"1358",npcHa:"clear-all-caches",NIadM:function(t,e,n,i){return t(e,n,i)},StAZJ:"&amp;$1",YUlkd:"x3zdxRXQ6",xZuEV:function(t,e){return t(e)},OvPVf:function(t,e,n,i,a){return t(e,n,i,a)},mSHlH:"chats",Pvjwy:function(t,e,n){return t(e,n)}},e=_0x32bc5b.messageInput.innerText.trim();if(!e||!_0x5607a5||""===e)return;_0x32bc5b.sendButton.classList.add("disabled"),_0x32bc5b.sendButton.focusable(!1);let n=e.match(/^\/(\w+)\s*(.*)/);if(n){let i=n[1],a=n[2];if("task"===i){if(a===t.ISNsv){_0x32bc5b.messageInput.clear();let s={};s.action=t.npcHa,navigator.serviceWorker?.controller?.postMessage(s);let o={};o.content="已成功清除緩存，重新載入後即生效",o.tag="2",t.NIadM(_0x4c57c4,o,_0x34c187(20),"3");return}{_0x32bc5b.messageInput.clear();let r={};r.content="未知的指令，請重新嘗試",_0x4c57c4(r,_0x34c187(20),"3");return}}}e=e.replace(/&([^;]+)/g,t.StAZJ).replaceAll("<","&lt;").replaceAll(">","&gt;").replace(/\.\.\./g,"…").replace(/(\r?\n){3,}/g,"\n\n"),_0x32bc5b.messageInput.clear();let c=_0x5bf688?"1":null;_0x32bc5b.markButton.classList.remove(t.YUlkd),_0x5bf688=!1;let l=t.xZuEV(p,t.OvPVf($,_0x372c97,t.mSHlH,_0x5607a5,"messages"));await t.Pvjwy(x,l,{sender:_0x41dcec,content:e,timestamp:Date.now(),tag:c});let d={};d.content=e,d.tag=c,t.NIadM(_0x4c57c4,d,l.id,"3")}navigator.serviceWorker.addEventListener("message",t=>{let e={UxgAW:function(t,e){return t===e},dfHAz:function(t,e){return t(e)},uWIeY:function(t,e){return t(e)}};if(e.UxgAW(t.data.type,"cache-size-result")){let n=document.getElementById("cacheSizeResult");if(t.data.error){n.innerHTML="错误: "+t.data.error;return}_0x4c57c4({content:e.dfHAz(_0x61246c,t.data.bytes)},e.uWIeY(_0x34c187,20),"3")}});let _0x42f6de=0;function _0x4c57c4(t,e,n="1"){let i={qtbGQ:"xKljxgVJA",aLxcJ:"xRHoYYwoZ",npMpm:"data-visible",LwSPW:"true",QteRm:"data-message-id",jSHSh:"xiOw4dg0O",ytYEQ:function(t,e){return t===e},wiMgm:"x4rKxFxLl",nUQzv:"xHJfZfjT1",HJaza:"smooth",wQTsM:function(t,e,n){return t(e,n)}},a=_0x1cf4ba("xVC8gtuyS"),s=_0x1cf4ba("xMyW2iRSH"),o=_0x1cf4ba(i.qtbGQ),r=_0x1cf4ba("xu4Celbbq"),c=_0x1cf4ba("xc4iCj2Gy"),l=_0x1cf4ba(i.aLxcJ);switch(a.setAttribute(i.npMpm,i.LwSPW),a.setAttribute(i.QteRm,e),a.classList.add(i.jSHSh),a.appendChild(o),o.appendChild(l),l.appendChild(r),r.appendChild(c),l.appendChild(s),c.innerText="你",i.ytYEQ(_0x16c994.sender,t.sender)&&a.classList.add("xOmVIOA3e"),"1"===t.tag?s.classList.add(i.wiMgm):i.ytYEQ(t.tag,"2")&&s.classList.add(i.nUQzv),_0xb5d0b9&&(_0xb5d0b9.remove(),_0xb5d0b9=null),n){case"1":_0x32bc5b.messageContainer.appendChild(a);break;case"2":_0x50bfd2.appendChild(a),_0x42f6de+=a.offsetHeight;break;case"3":_0x32bc5b.messageContainer.appendChild(a),_0x17a304=!0,_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:i.HJaza})}i.wQTsM(_0x35fd01,s,t.content)}function _0x1e7998(t,e,n="1"){let i={eOQdb:function(t,e,n){return t(e,n)},UDWcG:"/assets/avatar.png",Wsmvr:function(t,e){return t(e)},xdyAK:"xVC8gtuyS",tZaXU:function(t,e){return t(e)},ioUYY:function(t,e){return t(e)},yyYcD:"xt8fROB2L",MBrqh:function(t,e){return t(e)},vcgRi:"data-visible",LvOGN:"true",rdvWV:"data-message-id",ZLjMZ:function(t,e){return t===e},pCMud:"x4rKxFxLl",CCmZH:"xOmVIOA3e",qSkxz:function(t,e,n){return t(e,n)}},a=i.Wsmvr(_0x1cf4ba,i.xdyAK),s=i.tZaXU(_0x1cf4ba,"xMyW2iRSH"),o=_0x1cf4ba("xSYcbYqTG"),r=_0x1cf4ba("xKljxgVJA"),c=i.tZaXU(_0x1cf4ba,"xu4Celbbq"),l=i.ioUYY(_0x1cf4ba,"xc4iCj2Gy"),d=_0x1cf4ba(i.yyYcD),u=i.MBrqh(_0x1cf4ba,"xRHoYYwoZ"),h=document.createElement("img");switch(a.setAttribute(i.vcgRi,i.LvOGN),d.classList.add(i.yyYcD),h.loading="lazy",a.appendChild(o),a.appendChild(r),r.appendChild(u),u.appendChild(c),c.appendChild(l),u.appendChild(s),c.appendChild(d),o.appendChild(h),a.setAttribute(i.rdvWV,e),i.ZLjMZ(t.tag,"1")&&s.classList.add(i.pCMud),d.innerText="0s",l.innerText="未知",h.draggable=!1,_0xb5d0b9&&(_0xb5d0b9.remove(),_0xb5d0b9=null),i.ZLjMZ(_0x16c994.sender,t.sender)&&a.classList.add(i.CCmZH),n){case"1":_0x32bc5b.messageContainer.appendChild(a);break;case"2":_0x50bfd2.appendChild(a),_0x42f6de+=a.offsetHeight;break;case"3":_0x32bc5b.messageContainer.appendChild(a),_0x17a304=!0,_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:"smooth"}),_0x17a304=!1}i.qSkxz(_0x35fd01,s,t.content),i.tZaXU(_0x512385,t.sender).then(e=>{let n={MYVyW:function(t,e,n){return i.eOQdb(t,e,n)},nwwoJ:"mobile"};function a(){n.MYVyW(_0x2a1263,_0x32bc5b.main,{data:e,type:_0x369d1c?n.nwwoJ:"desktop"})}d.innerText=_0x500738(t.timestamp),h.src=e.avatarUrl||i.UDWcG,h.onload=function(){o.classList.add("xWzeTGC6P")},l.onclick=a,o.focusable(!0),o.bindWithCooldown(a),l.innerText=e.name||"未知"}).catch(t=>{console.error(t)})}function _0x540ee0(t,e,n){let i={};i.XeKaj="xJd2GT7MI",i.uIApQ="assets/avatar.png",i.lFksn=function(t,e){return t||e};let a=i;_0x32bc5b.signatureLabel.innerHTML=_0x11e449(n||"暫時還沒有描述哦"),_0x32bc5b.avatarWrapper.classList.remove(a.XeKaj),_0x32bc5b.avatarLabel.src=t||a.uIApQ,_0x32bc5b.nameLabel.textContent=a.lFksn(e,"未知")}async function _0x439608(){let t={Uhjbv:function(t,e){return t>e},kdNSy:function(t,e){return t-e},IEzNK:"--x9LFHiVqv",yWluX:function(t,e){return t*e},mEULe:"--xVizV2ybq",inZzz:function(t,e){return t*e},ewJnU:"正在初始化應用程序",jOqoI:"搜尋…",lnRIh:function(t){return t()},Wfnaw:function(t,e){return t(e)},CHSTp:"發生未知錯誤",XezgX:"resize",wNyIY:"設置布局時發生錯誤",irRKo:"disabled",pJasf:function(t,e){return t!==e},DjoRv:"cvs",dmTdU:function(t,e,n){return t(e,n)}};if(_0x421845)return;console.log(t.ewJnU),_0x32bc5b.roomNameLabel.innerText="未知",_0x32bc5b.searchInput.placeholder=t.jOqoI,_0x32bc5b.messageInput.setAttribute("placeholder","在這裡輸入訊息…"),_0x32bc5b.spinnerLabel.innerText="載入中…";let e=_0x5b560e.get("xjS4MkN99");e&&(_0x32bc5b.sidebar.style.width=e+"px"),document.body.classList.add("xmKH3ad5R");let n=_0x411640(),i=_0x3bce70();t.lnRIh(_0x142b6d);try{t.Wfnaw(_0x512385,_0x41dcec).then(async e=>{(!e.deviceInfo||t.Uhjbv(t.kdNSy(Date.now(),e.deviceInfo.lastUpdate),36e5))&&(await _0x3cd323(_0x41dcec,{deviceInfo:{lastUpdate:Date.now(),os:n.os+" "+n.version,screen:i.screenWidth+"x"+i.screenHeight+" @"+i.devicePixelRatio+"x"}}),console.log("已上傳裝置信息"))})}catch(a){console.error(t.CHSTp,a)}try{function s(){let e=_0x32bc5b.messageContainer.getBoundingClientRect();_0x32bc5b.messageContainer.style.setProperty(t.IEzNK,Number((t.yWluX(e.height,.6)-24).toFixed(2))+"px"),_0x32bc5b.messageContainer.style.setProperty(t.mEULe,Number(t.inZzz(e.height,.72).toFixed(2))-24+"px")}s(),window.addEventListener(t.XezgX,s)}catch(o){console.log(t.wNyIY)}if(_0x32bc5b.searchInput.removeAttribute(t.irRKo),_0x32bc5b.searchInput.focusable(!0),_0x32bc5b.profileContainer.classList.remove(t.irRKo),_0x32bc5b.profileContainer.focusable(!0),t.pJasf(localStorage.getItem(t.DjoRv),_0x3dd3a5.current)){if(_0x369d1c){let r={};r.closeOnEsc=!0,r.closeOnOverlayClick=!0,new _0x2b7b08(r).Body.innerHTML='<div class="xa6f2dQXX">更新了什麼</div><div class="x68JrA5Ak">'+_0x3dd3a5.directions+"</div>"}else t.dmTdU(_0x47db75,"更新了什麼",!0).body.innerHTML='<div class="xeUKJgV96">'+_0x3dd3a5.directions+"</div>";localStorage.setItem(t.DjoRv,_0x3dd3a5.current)}_0x421845=!0}function _0x11e449(t){let e={};e.vKvCs="&amp;$1",e.syMbd="&gt;";let n=e;return t.replace(/&([^;]+)/g,n.vKvCs).replaceAll("<","&lt;").replaceAll(">",n.syMbd).replaceAll(" ","&nbsp;").replaceAll("\n","<br>")}function _0x19a5f4(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}let _0x555d3b="Structure",_0x256d21;function _0x3c05a3(t){var e;let n={sAUEl:"取得用户名称时发生错误：",PMStZ:function(t,e){return t(e)},xIGyH:function(t,e,n){return t(e,n)},UAxAJ:function(t,e){return t!==e},FxCPx:function(t,e){return t===e},qBmOA:"xYARRkCjq",qaTgM:function(t,e){return t(e)},VTWoG:"xxC3C39Oc",IxiQs:"xVjpzmyej",sRZuP:"disabled",BLRoD:"contenteditable",svCIw:"true",uebWt:".x2fP9fkxS.active",lIosj:"active",dxfVj:function(t,e){return t(e)},yumgj:"x8VAGH6N2",gGnBq:"messages",nuopJ:function(t,e,n){return t(e,n)},niCmP:"timestamp",ZmULR:"xScefCkPw",cGJUn:"lazy",uyCoF:"xt4GQkVIo",aEudM:"所有成員",NiygB:"xb4MnocjO",bWTuP:"users",vfIcj:"2|0|6|3|4|1|5|8|7",caEON:function(t,e){return t(e)},PBzwm:"green",ODcAU:"x0eVQzH93",utNJM:"xxChbQgko",YSQKU:function(t,e){return t(e)},yaxnP:"horizontal",zXdqU:"label",AITTk:"time",JjZNx:"xtx2Cn8cK",IpDNi:function(t,e,n){return t(e,n)},LAROG:"x5FOXvrVK",xJkYe:"xmiEvp5FV",pFZDq:function(t,e,n,i,a){return t(e,n,i,a)},aZBdA:"bottom-start",RvTGB:"xoV8hdbgt",ZEjjK:function(t,e){return t(e)},kfRBh:"xcoXgMpFW",AdZtQ:function(t,e){return t(e)},eaFux:"xGy5QqsmI",nixST:function(t,e){return t(e)},MRaIs:function(t){return t()},LiPzN:"x2fP9fkxS",ppPUq:"xybvM5cRF",viseO:function(t,e){return t(e)},CiTRl:"xT3Ta8vKw",NcIMe:function(t,e){return t===e},YxorF:"沒有訊息",fQzPE:"nearest"},i=n.AdZtQ(_0x1cf4ba,n.LiPzN),a=_0x1cf4ba("xQ65c0Nkc"),s=_0x1cf4ba(n.ppPUq),o=n.viseO(_0x1cf4ba,n.CiTRl),r=n.nixST(_0x1cf4ba,"x6HyfOZS7"),c=_0x1cf4ba("xQkxrD9ZA");async function l(){let e={ZACBV:function(t,e,n){return t(e,n)},SZIjH:function(t,e){return t===e},vFJqJ:function(t,e,n,i){return t(e,n,i)}};if(n.UAxAJ(_0x5607a5,t.id)||_0x369d1c){_0x32bc5b.messageInput.innerHTML="",_0x5607a5=t.id,_0x3110d4._m.length=0,_0x390437=_0x32bc5b.main,_0x2fa3b3=!1;let a=[];t.members.forEach(t=>{let e={};e.GlCJz=n.sAUEl;let i=e;n.PMStZ(_0x512385,t).then(e=>{let n={};n.id=t,n.name=e.name,a.push(n)}).catch(t=>{console.error(i.GlCJz,t)})}),_0x555d3b=(t.name||"未知")+" - Structure",document.title=_0x555d3b,_0x32bc5b.roomNameLabel.innerText=t.name,_0x27051a.length=0,_0x256d21&&_0x256d21.remove(),n.FxCPx(t.tag,"public")?((_0x256d21=_0x1cf4ba("xjrgLBAlF")).focusable(!0),_0x256d21.classList.add(n.qBmOA),_0x256d21.textContent="公開",_0x256d21.bindWithCooldown(function(){n.xIGyH(_0x47db75,"說明",!0).body.innerHTML='<div class="xrrfDPLS2">任何人都能加入這個聊天室</div>'}),_0x32bc5b.statusLabel.appendChild(_0x256d21)):"privacy"===t.tag&&((_0x256d21=n.qaTgM(_0x1cf4ba,"xjrgLBAlF")).focusable(!0),_0x256d21.classList.add(n.VTWoG),_0x256d21.textContent="私人",_0x256d21.bindWithCooldown(function(){e.ZACBV(_0x47db75,"說明",!0).body.innerHTML='<div class="xrrfDPLS2">只有受邀人能加入本聊天室</div>'}),_0x32bc5b.statusLabel.appendChild(_0x256d21));let s=new URLSearchParams(window.location.search);s.set("r",t.id),window.history.replaceState({},"","?"+s.toString()),_0x32bc5b.messageContainer.classList.remove(n.IxiQs),_0x32bc5b.fileInput.removeAttribute(n.sRZuP),_0x32bc5b.attachButton.classList.remove(n.sRZuP),_0x32bc5b.attachButton.focusable(!0),_0x32bc5b.stickerButton.classList.remove("disabled"),_0x32bc5b.stickerButton.focusable(!0),_0x32bc5b.markButton.classList.remove(n.sRZuP),_0x32bc5b.markButton.focusable(!0),_0x32bc5b.markButton.classList.remove("x3zdxRXQ6"),_0x5bf688=!1,_0x32bc5b.brushButton.classList.remove("disabled"),_0x32bc5b.brushButton.focusable(!0),_0x32bc5b.messageInput.setAttribute(n.BLRoD,n.svCIw),_0x369d1c?(_0x32bc5b._mb_att_btn.classList.remove(n.sRZuP),_0x32bc5b._mb_att_btn.focusable(!0),_0x32bc5b.backButton.classList.remove("disabled"),n.dxfVj(_0x36aa33,".xehdiGgBv .xMyenRl7K .x8JU9DbQZ").focusable(!0),_0x32bc5b.main.classList.add(n.yumgj)):(_0x36aa33(".x2fP9fkxS.active")&&n.PMStZ(_0x36aa33,n.uebWt).classList.remove(n.lIosj),i.classList.add(n.lIosj)),_0x32bc5b.messageInput.setAttribute(n.BLRoD,"true"),_0x32bc5b.messageInput.focusable(!0),_0x32bc5b.messageContainer.clear(),(_0xb5d0b9=_0x1cf4ba("xqBX9i6rZ")).classList.add("spinner"),_0xb5d0b9.innerHTML=_0x1d4186,_0x32bc5b.messageContainer.appendChild(_0xb5d0b9);let o=await n.qaTgM(m,C($(_0x372c97,"chats",t.id,n.gGnBq),n.nuopJ(w,n.niCmP,"desc"),n.qaTgM(T,10)));_0x57089a=o.docs[9];let r=[];o.forEach(t=>{r.push(t)}),0===r.length&&_0xb5d0b9&&(_0xb5d0b9.innerHTML="這裡還沒有訊息，現在就開始聊天吧"),r.reverse(),r.map(t=>{var n=t.data();e.SZIjH(_0x27051a.indexOf(t.id),-1)&&(n.sender===_0x41dcec?(_0x27051a.push(t.id),e.vFJqJ(_0x4c57c4,n,t.id,"1")):(_0x27051a.push(t.id),_0x1e7998(n,t.id,"1"))),_0x16c994=n}),_0x17a304=!0,_0x32bc5b.messageContainer.scrollTo({top:_0x32bc5b.messageContainer.scrollHeight,behavior:"instant"}),_0x17a304=!1}}_0x524a9b(t.id),i.bindWithCooldown(l);let d={};d.id=t.id,d.length=t.size,d.name=t.name||"未知",d.launch=l,d.dom=i,_0x52cd8c.push(d),i.appendChild(a),i.appendChild(r),r.appendChild(c);let u=function(){let e={gaOCg:function(t,e,i){return n.nuopJ(t,e,i)},MtgaC:function(t,e){return n.qaTgM(t,e)},QLSph:n.ZmULR,AVgMm:"img",oAFgU:n.cGJUn,VXZEN:n.uyCoF,rqTvY:"xlKSJ67AP",hEaba:function(t,e){return t(e)},iXhxG:n.aEudM,vGNkj:n.NiygB,sCTVM:n.bWTuP,Zheec:function(t,e){return t(e)},acTFD:function(t,e,n,i){return t(e,n,i)},ARLOC:function(t,e){return n.FxCPx(t,e)},JAYWX:function(t,e){return t!==e},AblCc:n.sRZuP,DDGPo:n.vfIcj,Uqfhf:function(t,e){return n.caEON(t,e)},JrfVf:"xA9JMbz3o",eKnUl:n.PBzwm,QxAEY:function(t,e){return t===e},jjxTb:n.ODcAU,RgRaD:function(t,e){return n.caEON(t,e)},UHYtY:n.utNJM,bWifl:"xaTPzRSCY",kipWJ:function(t,e){return n.YSQKU(t,e)},WmWXA:n.yaxnP,riFod:function(t,e){return t(e)},xZffP:"todos",AXoph:function(t,e,n){return t(e,n)},yvQox:"chats",IQXOp:"編輯行程",LaWlZ:n.zXdqU,hSMSV:"input",XMeJC:"text",xVEey:n.AITTk,bhtNT:"xbrV3058R",XLkDB:n.JjZNx,ZsZVt:function(t,e){return n.YSQKU(t,e)},DQeQC:"行程安排",oUytE:"xU2hUavXh",AEHwH:function(t,e,i){return n.IpDNi(t,e,i)},JyhBI:function(t,e){return t(e)},QqZYr:function(t,e){return t(e)},cyGJV:n.LAROG,FMDls:"xY17x64dw",PLdPk:n.xJkYe,SmWpT:function(t,e,i,a,s){return n.pFZDq(t,e,i,a,s)}},a={};a.trigger=c,a.placement=[n.aZBdA,"bottom-end","top-start","top-end"];let s=new _0xdcc9bd(a);s.Content.classList.add(n.RvTGB);let o=_0x1cf4ba("xrQdSHI2A"),r=_0x1cf4ba("xrQdSHI2A"),l=n.ZEjjK(_0x1cf4ba,n.kfRBh),d=n.AdZtQ(_0x1cf4ba,"xrQdSHI2A");o.bindWithCooldown(function(){let n={MnVJa:e.QLSph,CFidg:function(t,n){return e.MtgaC(t,n)},qYvhM:e.AVgMm,eSZqy:e.oAFgU,gIFcq:e.VXZEN,nHtte:e.rqTvY,bofXo:"暫時還沒有描述哦"};s.close();let i=e.hEaba(_0x1cf4ba,"xPAY7PmDq"),a;if(_0x369d1c){let o={};o.parent=_0x32bc5b.sidebar,o.title=e.iXhxG,(a=new _0x596ad4(o)).Content.classList.add("xU2hUavXh"),a.Content.appendChild(i)}else(a=_0x47db75("所有成員",!0)).content.classList.add("lg"),a.content.classList.add(e.vGNkj),a.body.appendChild(i);function r(t){let s={ruFav:function(t,n,i){return e.gaOCg(t,n,i)}};e.MtgaC(_0x512385,t).then(t=>{let e=_0x1cf4ba(n.MnVJa),o=n.CFidg(_0x1cf4ba,"xZHdsOFDz"),r=document.createElement(n.qYvhM);r.classList.add("xxnnTDIPC"),r.src=t.avatarUrl||"assets/avatar.png",r.draggable=!1,r.loading=n.eSZqy;let c={};c.action="cache-url",c.url=t.avatarUrl,navigator.serviceWorker?.controller?.postMessage(c),o.appendChild(r);let l=n.CFidg(_0x1cf4ba,"xs8tjkwHJ"),d=_0x1cf4ba(n.gIFcq),u=_0x1cf4ba(n.nHtte);d.innerText=t.name,u.innerText=t.signature||n.bofXo,e.focusable(!0),l.appendChild(d),l.appendChild(u),e.appendChild(o),e.appendChild(l),e.bindWithCooldown(function(){if(_0x369d1c){let e={};e.data=t,e.type="mobile",s.ruFav(_0x2a1263,a.Root,e)}else{a.root.close();let n={};n.data=t,n.type="desktop",_0x2a1263(_0x32bc5b.main,n)}}),i.appendChild(e)}).catch(t=>{console.error(t)})}let c=0;t.members.forEach(t=>{c++,e.MtgaC(r,t)}),1==c&&i.classList.add("xyS4vzBWG")}),o.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"  fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round"  stroke-linejoin="round"><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M21 21v-2a4 4 0 0 0 -3 -3.85" /></svg>查看所有成員',o.classList.add("xUdcoAHYM"),[o,r,d].forEach(t=>{t.focusable(!0)}),d.bindWithCooldown(function(){s.close();let n={};n.text="取消",new _0x269d2f({closeOnEsc:!0,closeOnOverlayClick:!0,title:"退出",message:"確定要退出這個聊天室嗎，之後仍可重新加入",buttons:[n,{text:"確定",classList:["xTJA9U7y9"],onClick:async function(){let n=_0x52cd8c.findIndex(e=>e.id===t.id);if(-1!==n)try{await k(p(_0x372c97,e.sCTVM,_0x41dcec),{joined:e.Zheec(y,t.id)}),await k(e.acTFD(p,_0x372c97,"chats",t.id),{members:e.Zheec(y,_0x41dcec)}),_0x52cd8c.splice(n,1),i.remove(),_0x5607a5===t.id&&(_0x5607a5=null,_0x32bc5b.statusLabel.innerHTML="",_0x32bc5b.roomNameLabel.innerText="未知",_0x32bc5b.messageContainer.clear()),e.ARLOC(_0x52cd8c.length,0)&&(_0x32bc5b.primaryArea.innerHTML='<div class="xzF3bjGCc">尚未加入任何聊天室</div>')}catch(a){console.error("Error while deleting item:",a)}}}]})}),s.Content.appendChild(o),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M12.5 21h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M19 19m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /></svg>查看行程安排',r.bindWithCooldown(async function(){let n={gAnSu:e.AblCc,KfDCm:e.yvQox,aYkiC:"刪除失敗：",dJBmm:function(t,n,i,a){return e.acTFD(t,n,i,a)},vCSmB:e.IQXOp,JKxeZ:e.LaWlZ,wsGPA:e.hSMSV,dqKca:"xF37V7xd0",HKipr:"xYvZ9WF6d",mxbTY:e.XMeJC,cClpQ:function(t,e){return t(e)},MKVEP:function(t,n){return e.kipWJ(t,n)},zusOg:e.xVEey,ZXaje:function(t,e){return t(e)},GkScy:function(t,e){return t(e)},hHjjZ:function(t,e){return t(e)},akwQp:"xGGKUZ7B3",PkRZY:"hide",bzUes:e.bhtNT,EPYBw:"xHCo3rIZ7"};s.close();let i,a=e.riFod(_0x1cf4ba,e.XLkDB),o=e.ZsZVt(_0x1cf4ba,"xNu1Upzh6");if(_0x369d1c){let r={};r.parent=_0x32bc5b.sidebar,r.title=e.DQeQC,(i=new _0x596ad4(r)).Content.classList.add("x6q2Zh2QF"),i.Content.classList.add(e.oUytE),i.Content.appendChild(a)}else(i=e.AEHwH(_0x47db75,"行程安排",!0)).content.classList.add(e.vGNkj),i.content.classList.add("lg"),i.body.appendChild(a);let c=e.riFod(_0x5cb15c,[]);function l(a,s){let r={biDHU:function(t,n){return e.JAYWX(t,n)},ZWQjo:function(t,e){return t!==e},wxcSd:e.AblCc,kHuqp:function(t,e,n,i,a,s){return t(e,n,i,a,s)},ArSbQ:e.DDGPo,PUkub:"暫時還沒有描述哦",LsSBp:"更新失敗："},l=e.Uqfhf(_0x1cf4ba,"xTIlpY4Et"),d=e.Uqfhf(_0x1cf4ba,e.JrfVf);l.appendChild(d),e.ARLOC(a.theme,e.eKnUl)?d.classList.add("x9hGI5hex"):e.QxAEY(a.theme,"pink")&&d.classList.add(e.jjxTb);let u=_0x1cf4ba("xHxVtIAsn");l.appendChild(u);let h=e.MtgaC(_0x1cf4ba,e.VXZEN);h.innerHTML=a.name||"未知",u.appendChild(h);let $=_0x1cf4ba("xHQ4s8VGa");_0x5359f7($,a.description||"忘記加上描述了"),u.appendChild($);let x=_0x330037(a.startAt,a.endAt),f=_0x1cf4ba("xPP6DGDrH");f.innerText=x,l.appendChild(f);let _=e.RgRaD(_0x1cf4ba,e.UHYtY),m=e.Zheec(_0x1cf4ba,e.bWifl);m.innerHTML=_0x282fbf.edit,m.focusable(!0);let v=e.kipWJ(_0x1cf4ba,e.bWifl);v.innerHTML=_0x282fbf.trash,v.focusable(!0),_0x5cb15c([m,v],e.WmWXA),v.bindWithCooldown(async function(){l.classList.add(n.gAnSu);try{v.focusable(!1),v.classList.add("disabled"),m.focusable(!1),m.classList.add(n.gAnSu),await b(p(_0x372c97,n.KfDCm,t.id,"todos",s)),console.log("已成功刪除行程："+s),l.remove(),c.removeItem(l)}catch(e){let i="4|5|1|2|0|3".split("|"),a=0;for(;;){switch(i[a++]){case"0":console.error(n.aYkiC,e);continue;case"1":m.focusable(!0);continue;case"2":m.classList.remove("disabled");continue;case"3":l.classList.remove(n.gAnSu);continue;case"4":v.focusable(!0);continue;case"5":v.classList.remove("disabled");continue}break}}}),_.appendChild(m),_.appendChild(v),l.appendChild(_),l.focusable(!0),c.addItem(l),o.appendChild(l);let g={};g.name=a.name||"未知",g.startAt=a.startAt||17356608e5,g.endAt=a.endAt||17356608e5,g.description=a.description||"";let C=g;m.bindWithCooldown(function(e){e.stopPropagation(),function e(){let o=n.dJBmm(_0x47db75,n.vCSmB,!0,i.Root),c=_0x1cf4ba("xGGKUZ7B3"),l="_"+_0x34c187(12),d=document.createElement(n.JKxeZ),u=document.createElement(n.wsGPA);d.classList.add(n.dqKca),u.classList.add(n.HKipr),d.htmlFor=l,d.textContent="標題",u.id=l,u.type=n.mxbTY,u.value=C.name,u.maxLength=30,c.appendChild(d),c.appendChild(u);let x=_0x1cf4ba("xGGKUZ7B3"),b="_"+n.cClpQ(_0x34c187,12),f=document.createElement(n.JKxeZ),_=document.createElement("textarea");f.classList.add(n.dqKca),_.classList.add("xGuwEx6qN"),f.htmlFor=b,f.textContent="描述",_.id=b,_.rows=3,_.value=C.description,_.maxLength=80,x.appendChild(f),x.appendChild(_);let m=n.cClpQ(_0x1cf4ba,"xGGKUZ7B3");m.classList.add("xFJWlqoGn");let v="_"+n.cClpQ(_0x34c187,12),g=document.createElement(n.JKxeZ),w=n.MKVEP(_0x1cf4ba,"x9ZwavJjj"),L=document.createElement("input"),y=document.createElement("input");g.classList.add(n.dqKca),L.classList.add("xYvZ9WF6d"),g.htmlFor=v,g.textContent="開始",L.type="date",L.id=v,y.classList.add(n.HKipr),y.type=n.zusOg;let T="_"+n.ZXaje(_0x34c187,12),M=n.GkScy(_0x1cf4ba,"x9ZwavJjj"),E=document.createElement("label"),A=document.createElement(n.wsGPA),R=document.createElement(n.wsGPA);E.classList.add(n.dqKca),A.classList.add("xYvZ9WF6d"),E.htmlFor=T,E.textContent="結束",A.id=T,A.type="date",R.classList.add("xYvZ9WF6d"),R.type="time";let I=n.hHjjZ(_0x1cf4ba,n.akwQp),H=n.hHjjZ(_0x1cf4ba,"x40AApYkW");H.classList.add("xwtdXtpQT"),H.textContent="完成",H.classList.add("disabled");let B={};function W(){r.biDHU(u.value.trim(),"")&&L.value&&y.value&&A.value&&R.value&&(r.biDHU(u.value,B._z)||r.biDHU(L.value,B._a)||y.value!==B._b||A.value!==B._c||r.biDHU(R.value,B._d)||r.ZWQjo(_.value,B._y))?(H.focusable(!0),H.classList.remove(r.wxcSd)):(H.focusable(!1),H.classList.add(r.wxcSd))}B._z=a.name,B._y=a.description;let Y=[u,L,y,A,R,_];if(Y.forEach(t=>{t.oninput=W}),H.bindWithCooldown(async function(){H.classList.add("disabled"),H.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>';let e=new Date(L.value+"T"+y.value).getTime(),n=new Date(A.value+"T"+R.value).getTime(),i=u.value,a=_.value;Y.forEach(t=>{t.setAttribute("disabled",!0)});let c=r.kHuqp(p,_0x372c97,"chats",t.id,"todos",s);try{let l=r.ArSbQ.split("|"),d=0;for(;;){switch(l[d++]){case"0":C.name=i;continue;case"1":h.innerHTML=C.name;continue;case"2":let x={};x.endAt=n,x.startAt=e,x.name=i,x.description=a,await k(c,x);continue;case"3":C.startAt=e;continue;case"4":C.endAt=n;continue;case"5":_0x5359f7($,C.description||r.PUkub);continue;case"6":C.description=a;continue;case"7":o.root.close();continue;case"8":console.log("已成功更新行程："+s);continue}break}}catch(b){console.error(r.LsSBp,b),Y.forEach(t=>{t.classList.remove("disabled")})}}),w.appendChild(g),w.appendChild(L),w.appendChild(y),M.appendChild(E),M.appendChild(A),M.appendChild(R),o.body.appendChild(c),o.body.appendChild(x),o.body.appendChild(m),o.body.appendChild(I),m.appendChild(w),m.appendChild(M),I.appendChild(H),C.startAt){let S=new Date(C.startAt),D=new Date(C.startAt).toISOString().split("T")[0];console.log(D);let P=S.toTimeString().split(":").slice(0,2).join(":");console.log(D),B._a=D,B._b=P,L.value=D,y.value=P}if(C.endAt){let j=new Date(C.endAt),U=new Date(C.endAt).toISOString().split("T")[0],O=j.toTimeString().split(":").slice(0,2).join(":");B._c=U,B._d=O,A.value=U,R.value=O}W(),u.focus()}()})}a.appendChild(o);let d=_0x1cf4ba("xTOLrzGN6");a.appendChild(d);let u=_0x1cf4ba("xCgVOK4ur");d.appendChild(u);let h=e.JyhBI(_0x1cf4ba,"xtG9t2xuE"),f=_0x1cf4ba("x5FOXvrVK"),_=e.QqZYr(_0x1cf4ba,e.cyGJV),v=e.riFod(_0x1cf4ba,"x7ho7YfuM");h.appendChild(f),h.appendChild(_),h.appendChild(v);let g=!1;f.innerText="編輯模式",_.innerText="預覽模式",h.focusable(!0),u.appendChild(h);let w=_0x1cf4ba(e.FMDls);w.classList.add(e.PLdPk),w.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',w.focusable(!0),h.bindWithCooldown(function(){g?(w.classList.remove(n.PkRZY),o.classList.remove(n.bzUes),h.classList.remove(n.EPYBw),g=!1):(w.classList.add("hide"),o.classList.add("xbrV3058R"),h.classList.add("xHCo3rIZ7"),g=!0)},0),w.bindWithCooldown(async function(){let n=e.riFod(p,$(_0x372c97,"chats",t.id,e.xZffP)),i={name:"新的行程",description:"",startAt:Date.now(),endAt:Date.now()};await e.AXoph(x,n,i),l(i,n.id)},1e3),u.appendChild(w),o.innerHTML='<div class="xmBX2cWRZ spinner">'+_0x1d4186+"</div>";let L=await e.RgRaD(m,e.ZsZVt(C,e.SmWpT($,_0x372c97,e.yvQox,t.id,e.xZffP)));o.innerHTML='<div class="xmBX2cWRZ">還沒有任何行程，現在就創建一個吧</div>',0!==L.docs.length&&L.forEach(t=>{l(t.data(),t.id)})}),s.Content.appendChild(r),s.Content.appendChild(l),d.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-door-exit"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 12v.01" /><path d="M3 21h18" /><path d="M5 21v-16a2 2 0 0 1 2 -2h7.5m2.5 10.5v7.5" /><path d="M14 7h7m-3 -3l3 3l-3 3" /></svg>退出',d.classList.add(n.eaFux),s.Content.appendChild(d),n.nixST(_0x5cb15c,[o,r,d]),s._setPosition()};if(c.bindWithCooldown(function(t){t.stopPropagation(),n.MRaIs(u)}),c.focusable(!0),i.focusable(!0),c.innerHTML='<svg aria-hidden="true" style="min-width: 20px;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>',a.appendChild(s),s.innerText=t.name||"未知",e=t.description?t.description:n.NcIMe(t.size,0)?n.YxorF:_0x19a5f4(t.size)+" 則訊息",o.innerText=e,a.appendChild(o),_0x32bc5b.primaryArea.appendChild(i),t.focus){l();let h={};h.behavior="smooth",h.block="center",h.inline=n.fQzPE,i.scrollIntoView(h)}}function _0x500738(t){let e={IAPvK:function(t,e){return t-e},LCFTO:function(t,e){return t<e},cDumc:function(t,e){return t<e},VOVkt:function(t,e){return t/e},Eqmnf:function(t,e){return t<e},WyhJb:function(t,e){return t(e)},XaABO:function(t,e){return t/e}},n=Math.max(Math.floor(e.IAPvK(Date.now(),t)/1e3),0);return e.LCFTO(n,60)?n+" 秒前":e.cDumc(n,3600)?Math.floor(e.VOVkt(n,60))+" 分鐘前":n<86400?Math.floor(e.VOVkt(n,3600))+" 小時前":e.cDumc(n,2592e3)?Math.floor(n/86400)+" 天前":e.Eqmnf(n,31536e3)?Math.floor(n/2592e3)+" 個月前":e.WyhJb(_0x19a5f4,Math.floor(e.XaABO(n,31536e3)))+" 年前"}function _0x61246c(t){let e={};e.SUlUm=function(t,e){return t>=e},e.tDHCM=function(t,e){return t<e};let n=e,i=["B","KB","MB","GB","TB","PB"],a=t,s=0;for(;n.SUlUm(a,1024)&&n.tDHCM(s,i.length-1);)a/=1024,s++;return a.toFixed(2)+" "+i[s]}async function _0x3cd323(t,e){let n={myAFT:"users",pdDWr:function(t,e,n){return t(e,n)}};try{let i=p(_0x372c97,n.myAFT,t);if(e){await n.pdDWr(k,i,e),_0x26f8b8[t]&&(_0x26f8b8[t]={..._0x26f8b8[t],...e});let a=sessionStorage.getItem("upf_"+t);if(a){let s={...JSON.parse(a),...e};sessionStorage.setItem("upf_"+t,JSON.stringify(s))}}else delete _0x26f8b8[t],sessionStorage.removeItem("upf_"+t);return!0}catch(o){return console.error("Failed to update user profile:",o),!1}}async function _0x512385(t){if(_0x26f8b8[t])return _0x26f8b8[t];let e=sessionStorage.getItem("upf_"+t);if(e){let n=JSON.parse(e);return _0x26f8b8[t]=n,n}try{let i=await ({VKNKb:function(t,e){return t(e)}}).VKNKb(f,p(_0x372c97,"users",t));if(!i.exists())return null;{let a=i.data();return _0x26f8b8[t]=a,sessionStorage.setItem("upf_"+t,JSON.stringify(a)),a}}catch(s){throw s}}async function _0x4bd2d6(t){if(_0x582efb[t])return _0x582efb[t];let e=sessionStorage.getItem("rpf_"+t);if(e){let n=JSON.parse(e);return _0x582efb[t]=n,n}try{let i=await f(p(_0x372c97,"chats",t));if(!i.exists())return null;{let a=i.data();return _0x26f8b8[t]=a,sessionStorage.setItem("rpf_"+t,JSON.stringify(a)),a}}catch(s){throw s}}async function _0x311195(t,e){let n={jTadx:function(t,e){return t(e)},QqKtD:function(t,e,n,i,a){return t(e,n,i,a)},fOyEW:function(t,e,n){return t(e,n)},ilblJ:"timestamp",NKFpU:function(t,e){return t===e},GOiLc:"xWIHJooz8"};if(console.log("嘗試加載更多訊息"),void 0!==_0x57089a){_0x17a304=!0;let i=await n.jTadx(m,C(n.QqKtD($,_0x372c97,"chats",t,"messages"),n.fOyEW(w,n.ilblJ,"desc"),v(_0x57089a),T(10)));if(console.log(i.docs.length+" messages left"),n.NKFpU(i.docs.length,0))return;_0x57089a=10===i.docs.length?i.docs[9]:void 0;let a=[];i.forEach(t=>{a.push(t)}),a.reverse();let s=0;_0x50bfd2=_0x1cf4ba(n.GOiLc),_0x16c994="";let o=_0x32bc5b.messageContainer.firstChild;_0x32bc5b.messageContainer.insertBefore(_0x50bfd2,o);let r=_0x32bc5b.messageContainer.scrollHeight;a.map(t=>{s++;let e=t.data();-1===_0x27051a.indexOf(t.id)&&(e.sender===_0x41dcec?(_0x27051a.push(t.id),_0x4c57c4(e,t.id,"2")):(_0x27051a.push(t.id),_0x1e7998(e,t.id,"2")),_0x16c994=e)}),_0x17a304=!0,_0x42f6de=_0x32bc5b.messageContainer.scrollHeight-r;let c={};c.top=_0x42f6de,c.left=0,c.behavior="instant",_0x32bc5b.messageContainer.scrollTo(c),_0x42f6de=0,n.fOyEW(setTimeout,function(){_0x17a304=!1},500)}else _0x17a304=!1}let _0x318340='.xikyLwDf4 .xVC8gtuyS[data-message-id="{sid}"]';function _0x524a9b(t){let e={KIqgY:function(t,e){return t!==e},Wowef:function(t,e){return t===e},KMcIU:function(t,e){return t(e)},NoyEq:"xl4gtQk5f",Xttky:function(t,e,n){return t(e,n)},QBzrU:"modified",DHXAy:"{sid}",HEoqG:".xMyW2iRSH",YpOFK:"找不到匹配的訊息容器",oEkAu:"修改訊息時發生未知錯誤",likJc:function(t,e,n,i,a){return t(e,n,i,a)}};g(e.likJc($,_0x372c97,"chats",t,"messages"),n=>{n.docChanges().forEach(n=>{if(_0x5607a5!==t)return;let i=n.doc.data();switch(n.type){case"added":e.KIqgY(i.sender,_0x41dcec)&&e.Wowef(_0x27051a.indexOf(n.doc.id),-1)&&!n.doc.metadata.fromCache&&("hidden"===document.visibilityState&&(_0x47f61b++,document.title="("+_0x47f61b+") "+_0x555d3b),_0x27051a.push(n.doc.id),_0x1e7998(i,n.doc.id,"3"));break;case"removed":let a=e.KMcIU(_0x36aa33,_0x318340.replace("{sid}",n.doc.id));try{a.classList.add(e.NoyEq),e.Xttky(setTimeout,function(){a.remove()},3e3)}catch(s){console.log(s)}break;case e.QBzrU:try{let o=_0x36aa33(_0x318340.replace(e.DHXAy,n.doc.id)).querySelector(e.HEoqG);o?(o.clear(),_0x35fd01(o,i.content)):console.log(e.YpOFK)}catch(r){console.log(e.oEkAu,r)}}})},t=>{console.error("An unknown error occurred",t)})}function _0x533250(){let t={vQfkD:"3|4|0|2|1",BUADt:"xA7y7OLtP",AdBbV:"disabled",yPqqu:"密碼錯誤，請重新嘗試",dnpNu:"auth/network-request-failed",urfgR:"發生未知的錯誤",riRLC:"show",VpyWh:function(t,e,n,i){return t(e,n,i)},ZbKtR:function(t,e){return t===e},kNMBB:function(t){return t()},PnbWm:function(t,e){return t(e)},mgJxc:function(t,e){return t===e},udOIn:"auth/popup-closed-by-user",RHFBU:"1|0|3|2|5|4",yfwYE:function(t,e){return t(e)},HzJjo:"xrYn5ZY3v",fsmdN:"歡迎回來",EGrYQ:"登入帳號後即可使用我們的服務",GlKae:"div",uNYiH:"xBnuWNG6V",VyIzE:"xZyuwxZPZ",WzOgB:function(t,e){return t(e)},QahKU:"xWDUelLWA",SXZtf:"xwxpzc3QF",nMUUI:"xZdL9CF5M",OuApL:"input",EhSJQ:"text",GixpD:"xGGKUZ7B3",eqOXE:"5px",jWZaX:"label",teFKw:"xF37V7xd0",itJur:"xYvZ9WF6d",HyQIJ:"password",kwSlu:"off",uarKY:"xw0IanPrC"},e=t.yfwYE(_0x1cf4ba,t.HzJjo);e.innerText=t.fsmdN;let a=_0x1cf4ba("x4V8Jejrz");a.innerText=t.EGrYQ;let o=t.PnbWm(_0x1cf4ba,"xRRuA0Z3S"),r=document.createElement(t.GlKae);r.id="x7BYgkdiJ",r.focusable(!0);let c='<svg aria-hidden="true" class="xGBqJjpdr" viewBox="0 0 20 20"><path d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z" fill=#4285F4></path><path d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z" fill=#34A853></path><path d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z" fill=#FBBC05></path><path d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z" fill=#EA4335></path></svg>使用 Google 登入';r.innerHTML=c;let l=document.createElement(t.GlKae);l.focusable(!0),l.id=t.uNYiH,l.className="actionbtn xYIKBnbHS",r.className="actionbtn xYIKBnbHS",l.innerHTML='<svg aria-hidden="true" class="xGBqJjpdr" viewBox="0 0 20 20"><path d="M1 5.006A2 2 0 012.995 3h14.01A2 2 0 0119 5.006v9.988A2 2 0 0117.005 17H2.995A2 2 0 011 14.994V5.006zM3 5l7 4 7-4v2l-7 4-7-4V5z" fill-rule=evenodd fill=#788aa2></path></svg>使用 電子郵件 登入',o.appendChild(r),o.appendChild(l);let d=new _0x12c504;d.Content.classList.add("bt"),d.Root.classList.add("xCmJYJQtp"),d.Content.classList.add("xySmLVr4a"),d.Content.appendChild(e),d.Content.appendChild(a),d.Content.appendChild(o);let u=_0x1cf4ba(t.HzJjo);u.classList.add("lf"),u.classList.add("gc");let h=t.yfwYE(_0x1cf4ba,t.VyIzE);h.focusable(!0),h.innerHTML='<svg style="min-width: 24px" aria-hidden="true" class="xRmN7l0Zc" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>',u.appendChild(h);let $=_0x1cf4ba("x6Y89FynP");$.innerText="電子郵件登入",u.appendChild($);let x=t.WzOgB(_0x1cf4ba,t.QahKU);x.classList.add(t.SXZtf),d.Content.appendChild(u),d.Content.appendChild(x);let p=document.createElement("div");x.appendChild(p),p.classList.add(t.nMUUI);let b=document.createElement(t.GlKae);b.classList.add("xGGKUZ7B3"),p.appendChild(b);let f=document.createElement("label");f.classList.add("xF37V7xd0"),f.innerText="電子郵件地址",b.appendChild(f);let _=document.createElement(t.OuApL);_.classList.add("xYvZ9WF6d"),_.autocomplete="off",_.type=t.EhSJQ,_.disabled=!0,_.spellcheck=!1,b.appendChild(_);let m=document.createElement("div");m.classList.add(t.GixpD),m.style.marginTop="10px",m.style.marginBottom=t.eqOXE,p.appendChild(m);let v=document.createElement(t.jWZaX);v.classList.add(t.teFKw),v.innerText="密碼",m.appendChild(v);let g=document.createElement(t.OuApL);g.classList.add(t.itJur),g.type=t.HyQIJ,g.disabled=!0,g.autocomplete=t.kwSlu,m.appendChild(g);let C=document.createElement(t.GlKae);C.classList.add(t.uarKY),p.appendChild(C);let w=document.createElement("div");w.innerText="送出",w.classList.add(t.AdBbV),w.classList.add("x40AApYkW"),p.appendChild(w);let L=_0x1cf4ba("xPT7rhLdL");L.focusable(!0),L.innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l14 0"></path><path d="M5 12l6 6"></path><path d="M5 12l6 -6"></path></svg>返回上一頁',L.bindWithCooldown(function(){let e=t.vQfkD.split("|"),n=0;for(;;){switch(e[n++]){case"0":w.focusable(!1);continue;case"1":g.disabled=!0;continue;case"2":_.disabled=!0;continue;case"3":d.Content.classList.remove(t.BUADt);continue;case"4":w.classList.add(t.AdBbV);continue}break}}),p.appendChild(L),h.bindWithCooldown(function(){let t="2|0|3|1|4".split("|"),e=0;for(;;){switch(t[e++]){case"0":w.classList.add("disabled");continue;case"1":_.disabled=!0;continue;case"2":d.Content.classList.remove("xA7y7OLtP");continue;case"3":w.focusable(!1);continue;case"4":g.disabled=!0;continue}break}});let y=!0,k=function(){let e={};e.Kjfex="show",e.kZhlN="auth/invalid-login-credentials",e.wvxcG=t.yPqqu,e.HDdCV=t.dnpNu,e.lSkRM=t.urfgR;let n=e;y&&(y=!1,h.classList.add("disabled"),h.focusable(!1),C.classList.remove(t.riRLC),w.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>',_.disabled=!0,g.disabled=!0,w.classList.add("disabled"),w.focusable(!1),w.blur(),L.classList.add(t.AdBbV),L.focusable(!1),t.VpyWh(s,_0x2a84a1,_.value,g.value).then(t=>{try{d.close(),α.close()}catch(e){}let n=t.user;console.log("User is logged in: ",n)}).catch(t=>{setTimeout(function(){let e=t.code;switch(C.classList.add(n.Kjfex),e){case n.kZhlN:C.innerText=n.wvxcG;break;case"auth/invalid-email":C.innerText="找不到這個帳號，請重新嘗試";break;case n.HDdCV:C.innerText="網路請求錯誤，請檢查網路連線";break;default:C.innerText=n.lSkRM}w.innerHTML="送出",w.classList.remove("disabled"),w.focusable(!0),L.classList.remove("disabled"),L.focusable(!0),_.disabled=!1,g.disabled=!1,h.classList.remove("disabled"),h.focusable(!0),y=!0},3e3)}))};g.onkeydown=function(e){t.ZbKtR(e.keyCode,13)&&t.kNMBB(k)},w.bindWithCooldown(k),r.bindWithCooldown(function(){let e={CckfP:function(e,n){return t.mgJxc(e,n)},oJKKg:t.udOIn,cnqJo:t.AdBbV};r.classList.add(t.AdBbV),l.classList.add(t.AdBbV),r.innerHTML='<div class="spinner">\n						<svg aria-hidden="true" class="xxA4Cqchz" style="min-width: 20px" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n							<path d="M12 3a9 9 0 1 0 9 9"></path>\n						</svg>\n						<span class="xkT2bkntT">等待中…</span>\n					</div>',r.focusable(!1),l.focusable(!1),n(_0x2a84a1,_0x1ebc56).then(e=>{let n={};n.yHGPD="無法設置";let a=n;i.credentialFromResult(e).accessToken,_0x41dcec=e.user.uid,t.PnbWm(_0x512385,_0x41dcec).then(t=>{try{_0x540ee0(t.avatarUrl,t.name,t.signature)}catch(e){console.error(a.yHGPD)}d.close()}).catch(t=>{console.error(t)})}).catch(t=>{e.CckfP(t.code,e.oJKKg)&&(r.classList.remove("disabled"),l.classList.remove(e.cnqJo),r.focusable(!0),l.focusable(!0),r.innerHTML=c)})}),l.bindWithCooldown(function(){let e=t.RHFBU.split("|"),n=0;for(;;){switch(e[n++]){case"0":_.disabled=!1;continue;case"1":d.Content.classList.add(t.BUADt);continue;case"2":w.focusable(!0);continue;case"3":g.disabled=!1;continue;case"4":_.focus();continue;case"5":w.classList.remove(t.AdBbV);continue}break}})}function _0x7bad59(t="",e="",...n){let i={CPPxr:function(t,e){return t!==e},ZRjqr:function(t,e){return t===e},qYDuS:"disabled",YocxK:function(t,e){return t(e)},XilXm:function(t,e,n,i){return t(e,n,i)},DqrAp:function(t,e,n){return t(e,n)},oBZAs:"暫時還沒有描述哦",GfHJO:"xMCbxIsn5",NieiS:"xrYn5ZY3v",eLSoX:"x6Y89FynP",sVYwH:function(t,e){return t(e)},BDhav:"xWDUelLWA",iomAp:"input",LMcCF:"hidden",EimaZ:"true",JSuFm:"file",IoZsm:"xGGKUZ7B3",IOGgn:"xF37V7xd0",VqwPx:"_rJvAjH9O",kXFXM:"off",ARAEf:"_fM6Qcf9q",hWDLt:"xGuwEx6qN",agoyL:function(t,e){return t(e)}},a={};a.closeOnEsc=!0,a.closeOnOverlayClick=!0,a.excludeElements=n;let s=new _0x12c504(a);s.Root.classList.add(i.GfHJO),s.Content.style.padding="0";let o=i.YocxK(_0x1cf4ba,i.NieiS);o.classList.add("lf");let r=i.YocxK(_0x1cf4ba,i.eLSoX);r.innerText="編輯個人資料",o.appendChild(r);let c=i.YocxK(_0x1cf4ba,"xvb5soWNa");c.focusable(!0),c.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',s.close=s.close.bind(s),c.bindWithCooldown(s.close),o.appendChild(c),s.Content.appendChild(o);let l=i.sVYwH(_0x1cf4ba,i.BDhav);s.Content.appendChild(l);let d=document.createElement(i.iomAp);d.setAttribute(i.LMcCF,i.EimaZ),d.id="_Jy2eOVG7",d.type=i.JSuFm;let u=_0x1cf4ba(i.IoZsm),h=document.createElement("label");h.innerText="暱稱",h.classList.add(i.IOGgn),h.htmlFor=i.VqwPx;let $=document.createElement("input");$.value=t,$.classList.add("xYvZ9WF6d"),$.id=i.VqwPx,$.type="text",$.maxLength="20",$.autocomplete=i.kXFXM,$.spellcheck=!1,l.appendChild(u),u.appendChild(h),u.appendChild($);let b=_0x1cf4ba("xGGKUZ7B3"),_=document.createElement("label");_.innerText="描述",_.classList.add("xF37V7xd0"),_.htmlFor=i.ARAEf;let m=document.createElement("textarea");m.maxLength="80",m.value=e,m.classList.add(i.hWDLt),m.id=i.ARAEf,m.rows="3",m.maxLength="50",m.autocomplete="off",m.spellcheck=!1,l.appendChild(b),b.appendChild(_),b.appendChild(m);let v=i.agoyL(_0x1cf4ba,"x40AApYkW");function g(){m.value!==e||i.CPPxr($.value,t)?(v.classList.remove("disabled"),v.focusable(!0)):(v.classList.add("disabled"),v.focusable(!1))}async function C(){v.classList.add(i.qYDuS),v.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>',v.focusable(!1),$.disabled=!0,m.disabled=!0,d.disabled=!0;let t=$.value,e=m.value.trim();if((await i.YocxK(f,i.XilXm(p,_0x372c97,"users",_0x41dcec))).exists()){let n={};n.name=t,n.signature=e,await i.DqrAp(_0x3cd323,_0x41dcec,n)}else await x(p(_0x372c97,"users",_0x41dcec),{name:t,signature:e,id:_0x41dcec,joined:[],deviceInfo:""}),_0x32bc5b.primaryArea.innerHTML='<div class="xzF3bjGCc">重新載入後方可完整更新您的資料</div>';if(_0x32bc5b.nameLabel.innerText=t,_0x32bc5b.signatureLabel.innerHTML=_0x11e449(e||"暫時還沒有描述哦"),_0x3110d4.state){let a="4|2|3|1|0".split("|"),o=0;for(;;){switch(a[o++]){case"0":_0x3110d4._m.forEach(e=>{i.ZRjqr(e.userId,_0x41dcec)&&(e.dom.textContent="@"+t)});continue;case"1":_0x3110d4._b.innerHTML=_0x19653d(_0x11e449(e))||i.oBZAs;continue;case"2":_0x3110d4._d=e;continue;case"3":_0x3110d4._a.innerText=t;continue;case"4":_0x3110d4._n=t;continue}break}}s.close()}v.innerText="完成",v.classList.add(i.qYDuS),v.style.marginTop="0",l.appendChild(v),m.oninput=g,$.oninput=g,v.bindWithCooldown(C),$.focus()}async function _0x240dbb(t,e){let n={ZjuQy:function(t,e){return t(e)},FDzTy:function(t,e,n,i,a){return t(e,n,i,a)},Zpcxi:"messages"},i=await n.ZjuQy(m,n.FDzTy($,_0x372c97,"chats",t.id,n.Zpcxi));if(!_0x52cd8c.some(e=>e.id===t.id)){let a={};a.name=t.name,a.id=t.id,a.type=t.type,a.tag=t.tag,a.description=t.description,a.size=i.size,a.members=t.members,a.focus=e,a.identity=t.identity,_0x3c05a3(a)}}async function _0x142b6d(){let t={bTVmy:function(t,e,n){return t(e,n)},YzsWR:function(t,e){return t===e},PvnnI:"Error fetching document for ID:",wTTAH:function(t,e){return t(e)},WltGx:function(t,e,n,i){return t(e,n,i)},LPAYY:function(t,e){return t>e}};_0x32bc5b.primaryArea.classList.add("xuGldtFot");let e=(await t.wTTAH(f,t.WltGx(p,_0x372c97,"users",_0x41dcec))).data(),n=new URLSearchParams(window.location.search).get("r"),i=e.joined||[];t.LPAYY(i.length,0)?e.joined.map(async e=>{try{_0x4bd2d6(e).then(async i=>{let a={};a.id=e,a.name=i.name,a.type=i.type,a.tag=i.tag,a.plugins=i.plugins,a.members=i.members,a.description=i.description,a.identity=i.identity,t.bTVmy(_0x240dbb,a,t.YzsWR(n,e))})}catch(i){console.error(t.PvnnI,e,i)}}):_0x32bc5b.primaryArea.innerHTML='<div class="xzF3bjGCc">尚未加入任何聊天室</div>'}a(_0x2a84a1,t=>{let e={oEzMR:function(t){return t()},PveTa:function(t){return t()},FXobQ:function(t,e){return t(e)}};t?(_0x41dcec=t.uid,e.FXobQ(_0x512385,_0x41dcec).then(t=>{if(!t){e.oEzMR(_0x7bad59);return}_0x540ee0(t.avatarUrl,t.name,t.signature)}).catch(t=>{console.error(t),e.PveTa(_0x540ee0)}),e.oEzMR(_0x439608)):(_0x41dcec="",e.PveTa(_0x533250))});let _0x287b1e={};_0x287b1e.audio='<path d="M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0" />',_0x287b1e.video='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="m10 11 5 3-5 3v-6Z" />',_0x287b1e.image='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><circle cx="10" cy="12" r="2" /><path d="m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22" />',_0x287b1e.archive='<path d="M10 12v-1" /><path d="M10 18v-2" /><path d="M10 7V6" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01" /><circle cx="10" cy="20" r="2" />',_0x287b1e.others='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" />';let _0x2098b3=_0x287b1e;_0x32bc5b.fileInput.onchange=async function(t){let e={rrIjc:function(t,e){return t*e},jEWQR:function(t,e){return t(e)},wLeoF:"{u}",VsgFT:"messages",khdUA:"上傳完成",VtTRR:"這個文件已經成功上傳了",HWulp:function(t,e){return t(e)},JmxvX:"x6Y89FynP",txyON:function(t,e){return t>e},xpmVy:"上傳中",Sxtof:"正在上傳中，請耐心等待",qXceP:"div",nRFrV:"xty9qDHrl",FVLxw:"image/",ahpmA:"video/",lrheF:"audio/",oUjGs:function(t,e){return t!==e},UZwaG:"application/x-zip-compressed",xMHIQ:"application/vnd.rar",kYkJO:function(t,e){return t===e},Lsfxb:"application/pdf",cNByi:"< other {u}",mjcMr:"xk0osKWCK",wxGxT:"生成文件名時發生未知錯誤",jmqIZ:function(t,e,n){return t(e,n)},UFyAu:"state_changed"},n=t.target.files[0];if(!n)return;let i={};i.closeOnEsc=!0,i.closeOnOverlayClick=!0;let a=new _0x12c504(i);a.Lock=!0;let s=e.HWulp(_0x1cf4ba,"xrYn5ZY3v");s.classList.add("lf");let o=e.jEWQR(_0x1cf4ba,"xWDUelLWA");o.classList.add("xIOucKmLX"),a.Content.appendChild(s),a.Content.appendChild(o),a.Content.classList.add("gt");let r=_0x1cf4ba(e.JmxvX),u=_0x1cf4ba("xujSSErs5");s.appendChild(r),o.appendChild(u);let h=e.jEWQR(_0x1cf4ba,"xvb5soWNa");if(h.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',h.focusable(!0),s.appendChild(h),e.txyON(n.size,52428800)){r.innerText="上傳失敗",u.innerText="這個文件有 "+_0x61246c(n.size)+"，我們無法負擔",h.onclick=function(){_0x32bc5b.fileInput.value="",a.close.bind(a)()},a.Lock=!1;return}r.innerText=e.xpmVy,u.innerText=e.Sxtof;let b=document.createElement("div");b.classList.add("xCECpHDwZ"),b.focusable(!0),o.appendChild(b);let f=document.createElement(e.qXceP);f.classList.add(e.nRFrV),b.appendChild(f);let _=document.createElement("div");_.classList.add("xIEj1ZAnA");let m=e.jEWQR(String,n.type),v="",g="";m.startsWith(e.FVLxw)?(v=_0x2098b3.image,g="< image {u}"):m.startsWith(e.ahpmA)?(v=_0x2098b3.video,g="< video {u}"):m.startsWith(e.lrheF)?(v=_0x2098b3.audio,g="< audio {u}"):e.oUjGs([e.UZwaG,"application/zip","application/x-rar-compressed",e.xMHIQ,"application/x-compressed"].indexOf(m),-1)?(v=_0x2098b3.archive,g="< other {u}"):e.kYkJO(m,e.Lsfxb)?(v=_0x2098b3.others,g="< pdf {u}"):(v=_0x2098b3.others,g=e.cNByi),_.innerHTML='<svg aria-hidden="true" style="min-width: 28px" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'+v+"</svg>",f.appendChild(_);let C=document.createElement("div");C.classList.add("xxs4n9nhX"),f.appendChild(C),C.innerHTML='<div class="xTGGn7ABj">'.concat(n.name).concat('</div><div class="xtyaQiCLO">'+_0x61246c(n.size)+"</div>"),f.appendChild(C);let w=document.createElement(e.qXceP);w.classList.add("xsoLox5sj"),f.appendChild(w);let L=document.createElement(e.qXceP);L.classList.add(e.mjcMr),w.appendChild(L);let y="";try{y=e.HWulp(_0x34c187,12)+"-"+n.name}catch(k){console.log(e.wxGxT,k)}let T=c(_0x33a445,"uploads/"+_0x5607a5+"/attachment/"+y),M=e.jmqIZ(l,T,n);h.onclick=function(){r.innerText="上傳遭中斷",u.innerText="已取消上傳",a.Lock=!1,M.cancel(),_0x32bc5b.fileInput.value="",a.close()},M.on(e.UFyAu,t=>{let n=e.rrIjc(t.bytesTransferred/t.totalBytes,100);L.style.width=n+"%"},t=>{console.log(t)},async()=>{let t=await e.jEWQR(d,M.snapshot.ref),n="";n=g.replace(e.wLeoF,t);let i=p($(_0x372c97,"chats",_0x5607a5,e.VsgFT));await x(i,{sender:_0x41dcec,content:n,timestamp:Date.now()});let s={};s.content=n,_0x4c57c4(s,i.id,"3"),_0x32bc5b.fileInput.value="",b.remove(),r.innerText=e.khdUA,u.innerText=e.VtTRR,h.onclick=()=>{},a.Lock=!1,h.bindWithCooldown(function(){a.close()})})},document.addEventListener("visibilitychange",function(){let t={};t.McihB="visible",document.visibilityState===t.McihB&&(console.log("已重新聚焦 清除未讀訊息數"),document.title=_0x555d3b,_0x47f61b=0)}),_0x32bc5b.searchInput.oninput=function(){let t={};t.MxFNz="hide";let e=t,n=_0x32bc5b.searchInput.value.toLowerCase().trim();""!==n?_0x52cd8c.forEach(t=>{t.name.toLowerCase().includes(n)?t.dom.classList.remove(e.MxFNz):t.dom.classList.add(e.MxFNz)}):_0x52cd8c.forEach(t=>{t.dom.classList.remove(e.MxFNz)})},_0x32bc5b.messageContainer.addEventListener("scroll",function(){let t={DypcE:function(t,e){return t!==e},hETBN:function(t,e){return t(e)}},e=_0x32bc5b.messageContainer.scrollTop;""!==_0x41dcec&&t.DypcE(_0x5607a5,"")&&e<120&&!_0x17a304&&(_0x2fa3b3=!0,t.hETBN(_0x311195,_0x5607a5))}),_0x32bc5b.messageInput.oninput=function(){let t={};t.VepXW=function(t,e){return t!==e},t.oBhuY="disabled";let e=t,n=_0x32bc5b.messageInput.childNodes;1==n.length&&"BR"===n[0].nodeName&&_0x32bc5b.messageInput.clear(),e.VepXW(_0x32bc5b.messageInput.innerText.trim(),"")?(_0x32bc5b.sendButton.classList.remove("disabled"),_0x32bc5b.sendButton.focusable(!0)):(_0x32bc5b.sendButton.classList.add(e.oBhuY),_0x32bc5b.sendButton.focusable(!1))},_0x32bc5b.messageInput.onfocus=function(){let t={};t.MAdws="xYIbDcl9T",document.body.classList.add(t.MAdws)},_0x32bc5b.messageInput.onblur=function(){let t={};t.JNtGD="xYIbDcl9T",document.body.classList.remove(t.JNtGD)},_0x32bc5b.messageInput.onpaste=function(t){t.preventDefault(),document.execCommand("insertHTML",!0,_0x11e449((t.clipboardData||window.Clipboard).getData("text/plain")))},_0x32bc5b.messageInput.ondrop=function(t){let e={};e.syRXc="insertHTML",t.preventDefault();let n=t.dataTransfer.getData("text/plain");t.target.focus(),document.execCommand(e.syRXc,!0,_0x11e449(n))},_0x32bc5b.messageInput.oncopy=function(t){let e={};e.HqUml="text/plain",t.preventDefault();var n=window.getSelection().toString();t.clipboardData.setData(e.HqUml,n)},_0x32bc5b.messageInput.addEventListener("keydown",function(t){switch(t.keyCode){case 13:_0x369d1c||t.shiftKey||(t.preventDefault(),_0x32114a());break;case 85:case 66:case 73:t.ctrlKey&&t.preventDefault()}}),_0x32bc5b.sendButton.bindWithCooldown(_0x32114a),document.onkeydown=function(t){let e={};e.MXSTm=function(t,e){return t!=e},e.PxEJL=function(t,e){return t!=e},e.TJqXr="xGuwEx6qN",e.FRMZW="xYvZ9WF6d";let n=e;switch(t.keyCode){case 191:let i=document.activeElement;n.MXSTm(i,_0x32bc5b.messageInput)&&i!=_0x32bc5b.searchInput&&n.PxEJL(i.tagName.toUpperCase(),"INPUT")&&!i.classList.contains(n.TJqXr)&&!i.classList.contains(n.FRMZW)&&(t.preventDefault(),_0x32bc5b.messageInput.focus());break;case 75:t.ctrlKey&&_0x421845&&(t.preventDefault(),_0x32bc5b.searchInput.focus());break;case 123:t.preventDefault();break;case 67:t.ctrlKey&&t.shiftKey&&t.preventDefault();break;case 85:case 187:case 189:case 80:case 83:case 79:case 109:case 107:t.ctrlKey&&t.preventDefault();break;case 37:case 39:t.altKey&&t.preventDefault()}},document.querySelectorAll("body > div").forEach(function(t){t.onwheel=function(t){t.ctrlKey&&t.preventDefault()}}),_0x32bc5b.backButton.bindWithCooldown(function(){let t={};t.crFWF="disabled",t.jQAUr="contenteditable",t.uhZAo="true";let e=t;_0x390437=_0x32bc5b.sidebar,_0x32bc5b.backButton.classList.add(e.crFWF),_0x32bc5b._mb_att_btn.classList.add(e.crFWF);let n=window.location.href.replace(/\?.*$/,"");window.history.replaceState(null,"",n),_0x32bc5b.main.classList.remove("x8VAGH6N2"),_0x17a304=!0,_0x32bc5b.messageContainer.clear(),_0x17a304=!1,_0x5607a5="",_0x555d3b="Structure",document.title=_0x555d3b,_0x32bc5b.messageInput.clear(),_0x32bc5b.messageInput.setAttribute(e.jQAUr,e.uhZAo),_0x32bc5b.messageInput.focusable(!1),_0x32bc5b.sendButton.classList.add("disabled"),_0x32bc5b.sendButton.focusable(!1)}),_0x32bc5b.profileContainer.bindWithCooldown(function(){let t={KGvWR:function(t,e){return t!==e},WsDHZ:"disabled",wNazB:function(t,e){return t!==e},MkhiJ:"normal",wgSTf:function(t){return t()},lYcyQ:"無效的邀請碼，請重新嘗試",vvogx:function(t,e,n){return t(e,n)},XuXRO:"users",KGNjW:function(t,e,n){return t(e,n)},boibx:function(t,e){return t(e)},cGkZl:"smooth",CZEaj:function(t,e){return t===e},QKueK:function(t,e){return t===e},IatUS:"xGGKUZ7B3",XbVtG:"label",ibbvb:"邀請碼",yquya:"x4qSHIItt",qXOSw:"off",gaGAU:"xYvZ9WF6d",Twaqk:function(t,e){return t(e)},bYLZR:"x40AApYkW",cSJEF:"cvs",MkgDL:"Sign out error",lRkUI:"top",vScxd:"xLhiIL2Wm",fJkTX:"x9EnCPd4S",IDTgh:"xrQdSHI2A",mLlJH:function(t,e){return t(e)},AYNgc:function(t,e){return t(e)},RbqtM:"xcoXgMpFW",ZUuxl:function(t,e){return t(e)}},e={};e.trigger=_0x32bc5b.profileContainer,e.placement=t.lRkUI;let n=new _0xdcc9bd(e);n.Content.classList.add(t.vScxd),_0x32bc5b.profileContainer.classList.add(t.fJkTX);let i=_0x1cf4ba(t.IDTgh);i.focusable(!0),i.innerHTML='<svg style="min-width: 24px" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M8 9h8" /><path d="M8 13h6" /><path d="M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5" /><path d="M16 19h6" /><path d="M19 16v6" /></svg>加入聊天室',i.bindWithCooldown(function(){let e={NhcIF:t.lYcyQ,jZDwa:"disabled",xSqCB:function(e,n,i){return t.vvogx(e,n,i)},iqsQA:t.XuXRO,gYroo:function(e,n,i){return t.KGNjW(e,n,i)},FakBF:function(e,n){return t.boibx(e,n)},DrXTI:t.cGkZl,eKQGi:"center",UrBpK:"nearest",BTxsc:function(t,e,n){return t(e,n)},imcag:"chats",fDMGx:function(t,e,n,i){return t(e,n,i)},qLGYz:"jid",jaIog:function(e,n){return t.CZEaj(e,n)},GPaLQ:function(e,n){return t.QKueK(e,n)},gkFVI:function(t){return t()}};n.close();let i=t.KGNjW(_0x47db75,"加入聊天室",!0);i.Root.classList.add("xUhQpBm2v");let a=_0x1cf4ba(t.IatUS);a.classList.add("xlEirFRi3");let s="_"+t.boibx(_0x34c187,12),o=document.createElement(t.XbVtG);o.textContent=t.ibbvb,o.htmlFor=s,o.classList.add("xF37V7xd0");let r=document.createElement("input");r.classList.add(t.yquya),r.id=s,r.autocomplete=t.qXOSw,r.autocorrect=t.qXOSw,r.maxLength="8",r.classList.add("xYvZ9WF6d"),r.classList.add(t.gaGAU),a.appendChild(o),a.appendChild(r);let c=t.boibx(_0x1cf4ba,"xw0IanPrC"),l=t.Twaqk(_0x1cf4ba,t.bYLZR);l.classList.add(t.WsDHZ),l.textContent="送出";let d="disabled";async function u(){let t={CQHIk:function(t,e,n){return t(e,n)}};i.root.Lock=!0,i.closebtn.classList.add(e.jZDwa),i.closebtn.focusable(!1),c.classList.remove("show"),l.classList.add("disabled"),r.setAttribute("disabled",!0),l.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>';let n=await m(e.BTxsc(C,$(_0x372c97,e.imcag),e.fDMGx(_,e.qLGYz,"==",r.value.trim())));n.empty?setTimeout(function(){i.root.Lock=!1,i.closebtn.classList.remove("disabled"),i.closebtn.focusable(!0),c.classList.add("show"),c.innerText=e.NhcIF,r.removeAttribute("disabled"),l.classList.remove(e.jZDwa),l.innerHTML="送出"},3e3):(i.root.Lock=!1,i.root.close());let a=[];n.forEach(t=>{let e={};e.id=t.id,a.push(e)}),a.forEach(async n=>{let i=_0x52cd8c.find(t=>t.id===n.id);if(i){if(1===a.length){let s={};s.behavior=e.DrXTI,s.block=e.eKQGi,s.inline=e.UrBpK,i.dom.scrollIntoView(s),i.launch()}console.log("已經加入了，不用再加入")}else await e.xSqCB(k,p(_0x372c97,e.iqsQA,_0x41dcec),{joined:L(n.id)}),await e.gYroo(k,p(_0x372c97,"chats",n.id),{members:e.FakBF(L,_0x41dcec)}),sessionStorage.removeItem("rpf_"+n.id),_0x4bd2d6(n.id).then(async e=>{let i={};i.id=n.id,i.name=e.name,i.type=e.type,i.tag=e.tag,i.plugins=e.plugins,i.members=e.members,i.description=e.description,i.identity=e.identity,t.CQHIk(_0x240dbb,i,!0),console.log("成功加入",n.id)})})}r.oninput=function(){let e;8===(e=r.value.trim()).length&&t.KGvWR(e,"")?(l.classList.remove("disabled"),l.focusable(!0),d="normal"):(l.classList.add(t.WsDHZ),l.focusable(!1),d=t.WsDHZ)},r.onkeydown=function(t){e.jaIog(t.keyCode,13)&&e.GPaLQ(d,"normal")&&e.gkFVI(u)},l.bindWithCooldown(async function(){t.wNazB(d,t.MkhiJ)||t.wgSTf(u)}),i.body.appendChild(a),i.body.appendChild(c),i.body.appendChild(l),r.focus()});let a=t.mLlJH(_0x1cf4ba,"xrQdSHI2A");a.focusable(!0),a.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h1.5" /><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M20.2 20.2l1.8 1.8" /></svg>查看個人資料',a.bindWithCooldown(function(){let e={bCUYq:function(t,e,n){return t(e,n)},dPABu:"mobile"};n.close(),t.Twaqk(_0x512385,_0x41dcec).then(t=>{e.bCUYq(_0x2a1263,_0x32bc5b.sidebar,{data:t,type:_0x369d1c?e.dPABu:"desktop"})}).catch(t=>{console.error(t)})});let s=t.AYNgc(_0x1cf4ba,t.RbqtM),r=t.ZUuxl(_0x1cf4ba,"xrQdSHI2A");r.focusable(!0),r.bindWithCooldown(function(){n.close(),t.Twaqk(o,_0x2a84a1).then(()=>{_0x41dcec="",_0x5607a5="",_0x52cd8c.length=0,_0x27051a.length=0,_0x421845=!1;let e=window.location.href.replace(/\?.*$/,"");window.history.replaceState(null,"",e),_0x32bc5b.primaryArea.clear(),_0x32bc5b.messageContainer.clear(),localStorage.setItem(t.cSJEF,""),_0xb5d0b9&&(_0xb5d0b9.remove(),_0xb5d0b9=null),document.body.classList.remove("xmKH3ad5R"),_0x32bc5b.profileContainer.classList.remove(t.WsDHZ),_0x32bc5b.profileContainer.focusable(!0),_0x32bc5b.markButton.classList.add("disabled"),_0x32bc5b.brushButton.classList.add(t.WsDHZ),_0x32bc5b.attachButton.classList.add("disabled"),_0x32bc5b.stickerButton.classList.add("disabled"),_0x5bf688=!1,_0x32bc5b.avatarWrapper.classList.add("xJd2GT7MI"),_0x32bc5b.avatarLabel.src="",_0x32bc5b.nameLabel.innerText="",_0x32bc5b.signatureLabel.innerText=""}).catch(e=>{console.error(t.MkgDL,e)})}),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" /><path d="M9 12h12l-3 -3" /><path d="M18 15l3 -3" /></svg>登出',_0x5cb15c([i,a,r]),n.Content.appendChild(i),n.Content.appendChild(a),n.Content.appendChild(s),n.Content.appendChild(r),n._setPosition(),n.onClose(()=>{_0x32bc5b.profileContainer.classList.remove("x9EnCPd4S")})});class _0x596ad4{constructor({parent:t,title:e}){let n={kKnfQ:"inert",oQBCd:"true",oTewc:"xa2pPtuLq",Vhxfz:function(t,e){return t(e)},emUQz:"xopQXJrX5",nomMU:function(t,e){return t(e)},JZGeD:"xZz4zYjIm",LGeEN:"xMyenRl7K",qEZsf:"x8JU9DbQZ",tIDbD:function(t,e){return t(e)}},i=t,a=n.Vhxfz(_0x1cf4ba,"xB4hVI3El"),s=_0x1cf4ba(n.emUQz),o=n.nomMU(_0x1cf4ba,n.JZGeD),r=_0x1cf4ba(n.LGeEN),c=_0x1cf4ba(n.qEZsf),l=n.tIDbD(_0x1cf4ba,"xvwhg72ii");this._parent=i,this.Root=a,this.Content=o,this.Heading=s,this._backButton=c,this._deactivated_elements=document.querySelectorAll("body > *:not(.xEHCrF5Oe, script, [hidden])"),this._deactivated_elements.forEach(t=>{t.setAttribute(n.kKnfQ,n.oQBCd)}),s.appendChild(r),r.appendChild(c),r.appendChild(l),l.textContent=e,c.focusable(!0),c.innerHTML='<svg style="min-width: 24px" aria-hidden="true" class="xvx75W2b4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n							<path d="m12 19-7-7 7-7"></path>\n							<path d="M19 12H5"></path>\n						</svg>',c.bindWithCooldown(this.close.bind(this)),a.appendChild(s),a.appendChild(o),document.body.appendChild(a),setTimeout(function(){_0x390437=a,i.classList.add("xCr0RyqCg"),a.classList.add(n.oTewc)},50)}onClose(t){this.onCloseCallback=t}close(){let t={CLloK:"xa2pPtuLq",mkTLB:function(t,e,n){return t(e,n)}};this.onCloseCallback&&this.onCloseCallback(),this._deactivated_elements.forEach(t=>{t.removeAttribute("inert")}),_0x390437=this._parent,this.Root.classList.remove(t.CLloK),this._parent.classList.remove("xCr0RyqCg"),this._parent.classList.remove("xjv5U11Kz"),this.Root.classList.remove("xjv5U11Kz"),t.mkTLB(setTimeout,()=>{this.Root.remove()},100)}}async function _0x2a1263(t,e){let n={LWufj:function(t,e,n,i){return t(e,n,i)},DeLPq:function(t,e){return t>e},kVSMI:"xORN7XV1j",DDJGz:function(t,e,n,i){return t(e,n,i)},DgWng:"0|3|2|4|1",ZRqpt:function(t,e){return t(e)},egPOG:"xkyfCNAI0",IEBxb:"x0zSVRG3y",PxiSO:"cache-url",aAoxh:"video",RkxJC:"muted",PFJtq:"img",XvfsJ:"assets/default-banner.png",MEgmy:"lazy",LsLjt:"xkKF4v6d2",KnBss:"xVwXc1fhM",bvRde:"xqYV0G7JT",zPEPv:function(t,e){return t(e)},VKPTh:"xl2FSOZLU",KgIib:"xLFOP2Fs3",dSLqy:function(t,e){return t(e)},IeNwY:"xt0pX9m5p",mujTJ:function(t,e){return t(e)},OWnWl:"x2OCp76zA",PLKOx:"xokk3UP7N",gWgFA:"xylvbLNlS",dxLln:"xodqSvoQM",hectE:function(t,e){return t+e},rWDUC:function(t,e){return t+e},HEGxW:function(t,e){return t+e},qSLQk:function(t,e){return t||e},TMRAP:function(t,e){return t(e)},mcggU:"裝置信息",dbqfH:"desktop",cwpur:"xlY0G76Nv",oHYzS:function(t,e){return t(e)},BeYpL:"xIl46kG8k",HnkLD:function(t,e){return t===e},sYOOi:function(t,e){return t(e)},jyExv:"horizontal",KohdH:"xTKxbdpu3",prQtv:function(t,e){return t(e)},kCXcn:"xwMgtrL2x",pyWPX:"xnS3FTqjp"};_0x3110d4.state=!0,_0x3110d4._n||(_0x3110d4._n=e.data.name),_0x3110d4._d||(_0x3110d4._d=e.data.signature);let i=n.ZRqpt(_0x1cf4ba,n.egPOG),a=_0x1cf4ba(n.IEBxb),s,o={};o.action="cache-url",o.url=e.data.bannerUrl,navigator.serviceWorker?.controller?.postMessage(o);let r={};r.action=n.PxiSO,r.url=e.data.avatarUrl,navigator.serviceWorker?.controller?.postMessage(r),"video"===e.data.bannerType?((s=document.createElement(n.aAoxh)).loop=!0,s.controlslist="nodownload",s.controls=!1,s.setAttribute(n.RkxJC,""),s.playsInline=!0,s.preload=!0,s.autoplay=!0,s.src=e.data.bannerUrl):((s=document.createElement(n.PFJtq)).draggable=!1,s.src=e.data.bannerUrl||n.XvfsJ,s.loading=n.MEgmy),s.classList.add("x96ofpjeu");let c=_0x1cf4ba(n.LsLjt),l=_0x1cf4ba("xwvIJoAtO"),d=document.createElement("img");d.classList.add(n.KnBss);let u=n.ZRqpt(_0x1cf4ba,"xzCCWGB1D"),h=n.ZRqpt(_0x1cf4ba,n.bvRde),$=_0x1cf4ba("xBjZoCxmV"),x=n.zPEPv(_0x1cf4ba,n.VKPTh);x.classList.add(n.KgIib);let p=n.dSLqy(_0x1cf4ba,n.IeNwY);i.appendChild(a),a.appendChild(s),i.appendChild(c),h.appendChild(l),l.appendChild(d),d.draggable=!1,d.src=e.data.avatarUrl||"assets/avatar.png",d.loading=n.MEgmy,c.appendChild(u),u.appendChild(h);let b=n.mujTJ(_0x1cf4ba,n.OWnWl);u.appendChild(b);let f=_0x1cf4ba(n.PLKOx);h.appendChild(f);let _=_0x3110d4._n,m=_0x1cf4ba("x117sdiIx");m.textContent=_,$.appendChild(m);let v=_0x1cf4ba("xxXoB6W0R");v.textContent=e.data.id,f.appendChild($),f.appendChild(v),_0x3110d4._a=m,_0x3110d4._b=x,x.innerHTML=_0x19653d(_0x11e449(_0x3110d4._d||"暫時還沒有描述哦")),c.appendChild(p);let g=n.mujTJ(_0x1cf4ba,n.gWgFA);g.innerText="描述",p.appendChild(g),p.appendChild(x);let C=n.dSLqy(_0x1cf4ba,"xylvbLNlS");C.id="xY3QPRePs",C.textContent="最後上線";let w=_0x1cf4ba(n.dxLln),L=new Date(e.data.deviceInfo.lastUpdate),y=n.hectE(n.hectE(n.rWDUC(n.HEGxW(L.getFullYear()+"/",L.getMonth()+1)+"/",L.getDate())+" "+L.getHours().toString(),":"),L.getMinutes().toString().padStart(2,"0"));w.innerText=(_0x500738(e.data.deviceInfo.lastUpdate)||"未知")+" ("+n.qSLQk(y,"未知")+")",p.appendChild(C),p.appendChild(w);let k=n.TMRAP(_0x1cf4ba,"xylvbLNlS");k.textContent=n.mcggU;let T=_0x1cf4ba(n.dxLln);if(T.innerHTML=e.data.deviceInfo.os+" "+e.data.deviceInfo.screen,p.appendChild(k),p.appendChild(T),e.type===n.dbqfH){let M={};M.closeOnEsc=!0,M.closeOnOverlayClick=!0;let E=new _0x12c504(M);E.Content.classList.add(n.cwpur),E.Content.classList.add("lg"),E.Content.classList.add("gb");let A=_0x1cf4ba("xjMiLDVEU"),R=n.oHYzS(_0x1cf4ba,"xUHiz9aGO"),I=_0x1cf4ba("xhMhXcFlu"),H=n.zPEPv(_0x1cf4ba,n.BeYpL),B=_0x1cf4ba("xjMYgfYFc");H.appendChild(B),B.textContent=e.data.name,R.appendChild(H),R.appendChild(I);let W=n.TMRAP(_0x1cf4ba,"xHPTUCUar");if(W.bindWithCooldown(E.close.bind(E)),W.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',W.focusable(!0),n.HnkLD(e.data.id,_0x41dcec)){let Y=n.sYOOi(_0x1cf4ba,"xHPTUCUar");Y.bindWithCooldown(function(){n.LWufj(_0x7bad59,_0x3110d4._n,_0x3110d4._d,E.Root)}),Y.innerHTML=_0x282fbf.edit,Y.focusable(!0),I.appendChild(Y),_0x5cb15c([Y,W],n.jyExv)}I.appendChild(W),A.appendChild(R),E.Content.appendChild(A),A.appendChild(i);let S=E.Content.getBoundingClientRect();if(E.Content.style.setProperty("--xD672nKxG",S.height+"px"),A.onscroll=function(){n.DeLPq(A.scrollTop,60)?A.classList.add(n.kVSMI):A.classList.remove("xORN7XV1j")},e.data.verified){let D=_0x1cf4ba(n.KohdH);D.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>',$.appendChild(D),D.bindWithCooldown(function(){n.DDJGz(_0x47db75,"說明",!0,E.Root).body.innerHTML='<div class="xrrfDPLS2">此帳號已驗證</div>'})}E.onClose(function(){let t=n.DgWng.split("|"),e=0;for(;;){switch(t[e++]){case"0":_0x3110d4.state=!1;continue;case"1":_0x3110d4._d="";continue;case"2":_0x3110d4._b=null;continue;case"3":_0x3110d4._a=null;continue;case"4":_0x3110d4._n="";continue}break}})}else{let P={};P.parent=t,P.title=e.data.name;let j=new _0x596ad4(P);if(e.data.id===_0x41dcec){let U=n.prQtv(_0x1cf4ba,"x8JU9DbQZ");U.bindWithCooldown(function(){_0x7bad59(_0x3110d4._n,_0x3110d4._d,j.Root)}),U.innerHTML=_0x282fbf.edit,U.focusable(!0),j.Heading.appendChild(U)}j.Root.classList.add(n.kCXcn),j.onClose(function(){let t="2|0|3|1|4".split("|"),e=0;for(;;){switch(t[e++]){case"0":_0x3110d4._a=null;continue;case"1":_0x3110d4._n="";continue;case"2":_0x3110d4.state=!1;continue;case"3":_0x3110d4._b=null;continue;case"4":_0x3110d4._d="";continue}break}}),j.Root.onscroll=function(){j.Root.scrollTop>60?j.Root.classList.add(n.kVSMI):j.Root.classList.remove("xORN7XV1j")},j._backButton.classList.add(n.pyWPX),j.Content.appendChild(i)}}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(t=>{t.onupdatefound=()=>{let e={};e.ULKmI=function(t,e){return t===e},e.Ygikw="installed";let n=e,i=t.installing;i.onstatechange=()=>{n.ULKmI(i.state,n.Ygikw)&&window.location.reload()}}}).catch(t=>{let e={};e.izatO="註冊失敗：";let n=e;console.log(n.izatO,t)});
