/**release 0.2.4*/
let _0x21d64a=function(){let t=!0;return function(e,n){let i=t?function(){if(n){let t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}(),_0x59d9cf=_0x21d64a(this,function(){let t={};t.GyJrQ="(((.+)+)+)+$";let e=t;return _0x59d9cf.toString().search(e.GyJrQ).toString().constructor(_0x59d9cf).search(e.GyJrQ)});_0x59d9cf();let _0x3fe1d8=function(){let t=!0;return function(e,n){let i=t?function(){if(n){let t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}(),_0x21c42e=_0x3fe1d8(this,function(){let t={};t.GojNj='{}.constructor("return this")( )',t.oFtjQ="log",t.VZqUU="warn",t.pdakS="info",t.ONcRB="exception",t.VmShD="trace";let e=t,n=function(){let t;try{t=Function("return (function() "+e.GojNj+");")()}catch(n){t=window}return t}(),i=n.console=n.console||{},s=[e.oFtjQ,e.VZqUU,e.pdakS,"error",e.ONcRB,"table",e.VmShD];for(let a=0;a<s.length;a++){let o=_0x3fe1d8.constructor.prototype.bind(_0x3fe1d8),r=s[a],l=i[r]||o;o.__proto__=_0x3fe1d8.bind(_0x3fe1d8),o.toString=l.toString.bind(l),i[r]=o}});_0x21c42e();class _0x819aa7{constructor(t,e={}){let n={};n.rIWYI="33|3|1|7|16|15|34|13|25|28|4|6|26|22|23|19|11|27|20|8|17|31|5|18|30|21|14|32|35|12|9|0|29|24|2|10";let i=n.rIWYI.split("|"),s=0;for(;;){switch(i[s++]){case"0":this.isInertialMoving=!1;continue;case"1":this.logicalWidth=0;continue;case"2":this.setupEventListeners();continue;case"3":this.ctx=this.canvas.getContext("2d");continue;case"4":this.scale=1;continue;case"5":this.touchStartPosX=0;continue;case"6":this.posX=0;continue;case"7":this.logicalHeight=0;continue;case"8":this.isTouching=!1;continue;case"9":this.lastTime=0;continue;case"10":this.requestRedraw();continue;case"11":this.img=null;continue;case"12":this.velocityY=0;continue;case"13":this.customDrawer=null;continue;case"14":this.initialCenterY=0;continue;case"15":this.updateCanvasSize();continue;case"16":this.devicePixelRatio=window.devicePixelRatio||1;continue;case"17":this.initialDistance=0;continue;case"18":this.touchStartPosY=0;continue;case"19":this.lastY=0;continue;case"20":this.animationFrameId=null;continue;case"21":this.initialCenterX=0;continue;case"22":this.isDragging=!1;continue;case"23":this.lastX=0;continue;case"24":this.minVelocityThreshold=.1;continue;case"25":this.lastTapTime=0;continue;case"26":this.posY=0;continue;case"27":this.needsRedraw=!1;continue;case"28":this.tapTimeout=null;continue;case"29":this.decelerationRate=.85;continue;case"30":this.touchStartScale=1;continue;case"31":this.initialScale=1;continue;case"32":this.rotation=0;continue;case"33":this.canvas=t;continue;case"34":let a={minScale:.1,maxScale:5,onClickOutside:null,...e};this.options=a;continue;case"35":this.velocityX=0;continue}break}}updateCanvasSize(){let t={};t.VhJbv=function(t,e){return t+e},t.Yhmek=function(t,e){return t*e};let e=t,n=this.canvas.parentElement;this.logicalWidth=n.clientWidth,this.logicalHeight=n.clientHeight,this.devicePixelRatio=window.devicePixelRatio||1,this.canvas.style.width=e.VhJbv(this.logicalWidth,"px"),this.canvas.style.height=e.VhJbv(this.logicalHeight,"px"),this.canvas.width=Math.floor(this.logicalWidth*this.devicePixelRatio),this.canvas.height=Math.floor(e.Yhmek(this.logicalHeight,this.devicePixelRatio)),this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio)}setupEventListeners(){let t={};t.eCYRI="click",t.BWhQh="mousemove",t.uuISj="mouseleave",t.cBEbg="touchstart";let e=t;this.handleCanvasClick=this.handleCanvasClick.bind(this),this.handleCanvasTouchEnd=this.handleCanvasTouchEnd.bind(this),this.canvas.addEventListener(e.eCYRI,this.handleCanvasClick),this.canvas.addEventListener("touchend",this.handleCanvasTouchEnd),this.handleResize=this.handleResize.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleWheel=this.handleWheel.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.draw=this.draw.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),window.addEventListener("resize",this.handleResize),this.canvas.addEventListener("mousedown",this.handleMouseDown),document.addEventListener(e.BWhQh,this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("wheel",this.handleWheel),this.canvas.addEventListener(e.uuISj,this.handleMouseLeave),this.canvas.addEventListener(e.cBEbg,this.handleTouchStart),this.canvas.addEventListener("touchmove",this.handleTouchMove),this.canvas.addEventListener("touchend",this.handleTouchEnd)}getDisplayWidth(){let t={};t.uHPfX=function(t,e){return t===e},t.lIvgS=function(t,e){return t%e};let e=t;return e.uHPfX(e.lIvgS(this.rotation,180),90)?this.img.height:this.img.width}getDisplayHeight(){let t={};return t.ByMHS=function(t,e){return t===e},t.ByMHS(this.rotation%180,90)?this.img.width:this.img.height}calculateInitialScale(){let t={};t.BJOSY=function(t,e){return t/e},t.SpfBF=function(t,e){return t/e};let e=t;if(!this.img)return;let n=this.getDisplayWidth(),i=this.getDisplayHeight(),s=e.BJOSY(this.logicalWidth,n),a=e.SpfBF(this.logicalHeight,i);this.options.minScale=Math.min(s,a,1),this.scale=this.options.minScale}centerImage(){let t={};t.GvKjL=function(t,e){return t*e},t.LSlZn=function(t,e){return t*e},t.lbXvA=function(t,e){return t/e},t.RPTWY=function(t,e){return t-e};let e=t;if(!this.img)return;let n=e.GvKjL(this.getDisplayWidth(),this.scale),i=e.LSlZn(this.getDisplayHeight(),this.scale);this.posX=e.lbXvA(this.logicalWidth-n,2),this.posY=e.lbXvA(e.RPTWY(this.logicalHeight,i),2),this.enforceBounds()}setCustomDrawer(t){let e={};e.hILJl=function(t,e){return t===e},e.TcrtH="setCustomDrawer 期望接收一个函数";let n=e;n.hILJl(typeof t,"function")?this.customDrawer=t:console.error(n.TcrtH)}clearCustomDrawer(){this.customDrawer=null}draw(){let t={};t.oZLQe=function(t,e){return t*e},t.TUcqm=function(t,e){return t/e},t.NUQHB=function(t,e){return t/e};let e=t;if(this.needsRedraw){if(this.needsRedraw=!1,this.ctx.clearRect(0,0,this.logicalWidth,this.logicalHeight),this.img){this.ctx.save();let n=e.oZLQe(this.getDisplayWidth(),this.scale),i=this.getDisplayHeight()*this.scale;this.ctx.translate(this.posX+e.TUcqm(n,2),this.posY+e.NUQHB(i,2)),this.ctx.rotate(e.oZLQe(this.rotation,Math.PI)/180),this.ctx.scale(this.scale,this.scale),this.ctx.drawImage(this.img,-this.img.width/2,-this.img.height/2),this.ctx.restore()}this.customDrawer&&this.customDrawer(this.ctx,this)}}rotate(){this.rotation=(this.rotation+90)%360,this.calculateInitialScale(),this.centerImage(),this.requestRedraw()}loadImage(t){this.img=new Image,this.img.onload=()=>{this.rotation=0,this.calculateInitialScale(),this.centerImage(),this.requestRedraw()},this.img.src=t}enforceBounds(){let t={};t.wlGmN=function(t,e){return t*e},t.FonVJ=function(t,e){return t>e},t.lMdLD=function(t,e){return t-e},t.ETasm=function(t,e){return t/e},t.lzuGB=function(t,e){return t-e},t.MdngU=function(t,e){return t-e};let e=t;if(!this.img)return;let n=this.getDisplayWidth()*this.scale,i=e.wlGmN(this.getDisplayHeight(),this.scale);e.FonVJ(n,this.logicalWidth)?this.posX=Math.min(Math.max(this.posX,e.lMdLD(this.logicalWidth,n)),0):this.posX=e.ETasm(this.logicalWidth-n,2),e.FonVJ(i,this.logicalHeight)?this.posY=Math.min(Math.max(this.posY,e.lzuGB(this.logicalHeight,i)),0):this.posY=e.MdngU(this.logicalHeight,i)/2}isInImageArea(t,e){let n={};n.xoDww=function(t,e){return t*e},n.uWVwA=function(t,e){return t+e},n.QDLfI=function(t,e){return t>=e},n.UAlKu=function(t,e){return t<=e};let i=n;if(!this.img)return!1;let s=this.getDisplayWidth()*this.scale,a=i.xoDww(this.getDisplayHeight(),this.scale),o=this.posX,r=this.posY,l=i.uWVwA(r,a),c=Math.min(o+s,this.logicalWidth),d=Math.min(l,this.logicalHeight);return t>=Math.max(o,0)&&t<=c&&i.QDLfI(e,Math.max(r,0))&&i.UAlKu(e,d)}requestRedraw(){this.needsRedraw||(this.needsRedraw=!0,this.canvas.dispatchEvent(new MouseEvent("mousemove")),this.animationFrameId&&({TAGYX:function(t,e){return t(e)}}).TAGYX(cancelAnimationFrame,this.animationFrameId),this.animationFrameId=requestAnimationFrame(this.draw))}handleMouseDown(t){let e={};e.WyJLZ=function(t,e){return t-e},e.rwyTI="grabbing";let n=e,i=this.canvas.getBoundingClientRect(),s=n.WyJLZ(t.clientX,i.left),a=t.clientY-i.top;this.isDraggable()&&this.isInImageArea(s,a)&&(this.isDragging=!0,this.lastX=t.clientX,this.lastY=t.clientY,this.canvas.style.cursor=n.rwyTI)}handleMouseLeave(){let t={};t.jLfud="default",this.canvas.style.cursor=t.jLfud}handleMouseMove(t){let e={};e.rwiJk=function(t,e){return t-e},e.uzdss=function(t,e){return t>e},e.AFnlw=function(t,e){return t/e},e.HvCAY=function(t,e){return t/e};let n=e,i=this.canvas.getBoundingClientRect(),s=t.clientX-i.left,a=n.rwiJk(t.clientY,i.top);if(this.isInImageArea(s,a)?this.canvas.style.cursor=this.isDragging?"grabbing":"grab":this.canvas.style.cursor="default",this.isDragging){let o=Date.now(),r=o-this.lastTime;this.lastTime=o;let l=t.clientX-this.lastX,c=t.clientY-this.lastY;this.posX+=l,this.posY+=c,n.uzdss(r,0)&&(this.velocityX=n.AFnlw(l,r),this.velocityY=n.HvCAY(c,r)),this.lastX=t.clientX,this.lastY=t.clientY,this.enforceBounds(),this.requestRedraw()}}handleMouseUp(t){let e={};e.iCMtA="grab",this.isDragging=!1,Math.abs(this.velocityX)>this.minVelocityThreshold||Math.abs(this.velocityY)>this.minVelocityThreshold?this.startInertia():(this.velocityX=0,this.velocityY=0);let n=this.canvas.getBoundingClientRect(),i=t.clientX-n.left,s=t.clientY-n.top;this.isInImageArea(i,s)?this.canvas.style.cursor=e.iCMtA:this.canvas.style.cursor="default"}startInertia(){this.isInertialMoving=!0,this.lastTime=Date.now(),this.animateInertia()}animateInertia(){let t={EhxFO:function(t,e){return t*e},TfKQn:function(t,e){return t<e},jafmN:function(t,e){return t(e)}};if(!this.isInertialMoving)return;let e=Date.now(),n=e-this.lastTime;this.lastTime=e,this.velocityX*=Math.pow(this.decelerationRate,n/16),this.velocityY*=Math.pow(this.decelerationRate,n/16),this.posX+=t.EhxFO(this.velocityX,n),this.posY+=this.velocityY*n,this.enforceBounds(),this.requestRedraw(),Math.abs(this.velocityX)<this.minVelocityThreshold&&t.TfKQn(Math.abs(this.velocityY),this.minVelocityThreshold)?(this.isInertialMoving=!1,this.velocityX=0,this.velocityY=0):t.jafmN(requestAnimationFrame,this.animateInertia.bind(this))}handleWheel(t){let e={};e.peXte=function(t,e){return t-e},e.dhBDG=function(t,e){return t>e},e.PCaRZ=function(t,e){return t/e},e.eLGhc=function(t,e){return t-e},e.AyfxU=function(t,e){return t*e};let n=e;t.preventDefault();let i=this.canvas.getBoundingClientRect(),s=n.peXte(t.clientX,i.left),a=t.clientY-i.top;if(!this.isInImageArea(s,a))return;let o=n.dhBDG(t.deltaY,0)?.9:1.1,r=n.PCaRZ(n.eLGhc(s,this.posX),this.scale),l=n.PCaRZ(a-this.posY,this.scale),c=Math.min(Math.max(n.AyfxU(this.scale,o),this.options.minScale),this.options.maxScale);this.posX=s-r*c,this.posY=a-n.AyfxU(l,c),this.scale=c,this.enforceBounds(),this.requestRedraw()}handleTouchStart(t){let e={};e.ZquxS=function(t,e){return t===e},e.WiscP=function(t,e){return t>=e};let n=e;if(n.ZquxS(t.touches.length,0))return;let i=Array.from(t.touches),s=this.getTouchCenter(i);this.initialCenterX=s.x,this.initialCenterY=s.y,this.touchStartPosX=this.posX,this.touchStartPosY=this.posY,this.touchStartScale=this.scale,n.WiscP(t.touches.length,2)&&(this.initialDistance=this.getTouchDistance(t.touches[0],t.touches[1])),this.isTouching=!0}handleTouchMove(t){let e={};e.LDKVH=function(t,e){return t===e},e.MAtNV=function(t,e){return t>=e},e.SkrEr=function(t,e){return t-e},e.fzakp=function(t,e){return t===e},e.suFer=function(t,e){return t/e};let n=e;if(!this.isTouching)return;t.preventDefault();let i=Array.from(t.touches);if(n.LDKVH(i.length,0))return;let s=this.getTouchCenter(i),a=1;if(n.MAtNV(i.length,2)){let o=this.getTouchDistance(i[0],i[1]);this.initialDistance>0&&(a=o/this.initialDistance)}let r=Math.min(Math.max(this.touchStartScale*a,this.options.minScale),this.options.maxScale),l=(this.initialCenterX-this.touchStartPosX)/this.touchStartScale,c=(this.initialCenterY-this.touchStartPosY)/this.touchStartScale;if(this.posX=n.SkrEr(s.x,l*r),this.posY=s.y-c*r,this.scale=r,this.enforceBounds(),this.requestRedraw(),n.fzakp(i.length,1)){let d=Date.now(),u=n.SkrEr(d,this.lastTime);this.lastTime=d;let h=this.canvas.getBoundingClientRect(),$=i[0],x=$.clientX-h.left,p=$.clientY-h.top;u>0&&(this.velocityX=(x-this.lastX)/u,this.velocityY=n.suFer(n.SkrEr(p,this.lastY),u)),this.lastX=x,this.lastY=p}}handleTouchEnd(){this.isTouching=!1,this.initialDistance=0,Math.abs(this.velocityX)>this.minVelocityThreshold||Math.abs(this.velocityY)>this.minVelocityThreshold?this.startInertia():(this.velocityX=0,this.velocityY=0)}handleResize(){this.updateCanvasSize(),this.img&&(this.calculateInitialScale(),this.centerImage(),this.canvas.dispatchEvent(new MouseEvent("mousemove")),this.requestRedraw())}handleCanvasClick(t){let e={};e.gujjY=function(t,e){return t-e};let n=e;if(!this.img)return;let i=this.canvas.getBoundingClientRect(),s=n.gujjY(t.clientX,i.left),a=n.gujjY(t.clientY,i.top);this.isInImageArea(s,a)||this.triggerClickOutside(t)}handleCanvasTouchEnd(t){let e={dZlzW:function(t,e){return t-e},mXVAq:function(t,e){return t-e},kHeTE:function(t,e,n){return t(e,n)}};if(!this.img||t.touches.length>0)return;let n=this.canvas.getBoundingClientRect(),i=t.changedTouches[0],s=e.dZlzW(i.clientX,n.left),a=i.clientY-n.top,o=new Date().getTime();if(360>e.mXVAq(o,this.lastTapTime)){clearTimeout(this.tapTimeout);return}this.tapTimeout=e.kHeTE(setTimeout,()=>{this.isInImageArea(s,a)||this.triggerClickOutside(t),this.lastTapTime=o},200)}getTouchDistance(t,e){let n={};n.aXBtQ=function(t,e){return t*e};let i=n,s=t.clientX-e.clientX,a=t.clientY-e.clientY;return Math.sqrt(i.aXBtQ(s,s)+i.aXBtQ(a,a))}isDraggable(){let t={};t.IdFLN=function(t,e){return t*e},t.gFkPB=function(t,e){return t>e};let e=t;return this.img&&(e.IdFLN(this.img.width,this.scale)>this.logicalWidth||e.gFkPB(this.img.height*this.scale,this.logicalHeight))}triggerClickOutside(t){let e={};e.epRox=function(t,e){return t===e},e.mchxJ="function",e.NdCUk=function(t,e){return t-e},e.aczHZ=function(t,e){return t-e},e.DXzgD=function(t,e){return t-e};let n=e;if(n.epRox(typeof this.options.onClickOutside,n.mchxJ)){let i=this.canvas.getBoundingClientRect(),s={x:n.NdCUk(t.clientX,i.left),y:n.aczHZ(t.clientY,i.top),canvasX:n.DXzgD(t.clientX,i.left),canvasY:t.clientY-i.top,imageX:-1,imageY:-1};this.img&&(s.imageX=(s.canvasX-this.posX)/this.scale,s.imageY=n.DXzgD(s.canvasY,this.posY)/this.scale),this.options.onClickOutside(s,t)}}getTouchCenter(t){let e={};e.LeFij=function(t,e){return t-e};let n=e,i=0,s=0,a=this.canvas.getBoundingClientRect();for(let o of t)i+=n.LeFij(o.clientX,a.left),s+=o.clientY-a.top;let r={};return r.x=i/t.length,r.y=s/t.length,r}destroy(){let t={};t.hOSnD="resize",t.dYOdA="touchmove",t.jyUMp="mouseup",t.OrGNy="touchend",t.TmSZX="click";let e=t,n="0|5|3|10|9|11|7|1|4|6|8|2".split("|"),i=0;for(;;){switch(n[i++]){case"0":window.removeEventListener(e.hOSnD,this.handleResize);continue;case"1":this.canvas.removeEventListener(e.dYOdA,this.handleTouchMove);continue;case"2":this.animationFrameId&&cancelAnimationFrame(this.animationFrameId);continue;case"3":document.removeEventListener(e.jyUMp,this.handleMouseUp);continue;case"4":this.canvas.removeEventListener(e.OrGNy,this.handleTouchEnd);continue;case"5":document.removeEventListener("mousemove",this.handleMouseMove);continue;case"6":this.canvas.removeEventListener(e.TmSZX,this.handleCanvasClick);continue;case"7":this.canvas.removeEventListener("touchstart",this.handleTouchStart);continue;case"8":this.canvas.removeEventListener(e.OrGNy,this.handleCanvasTouchEnd);continue;case"9":this.canvas.removeEventListener("mousedown",this.handleMouseDown);continue;case"10":this.canvas.removeEventListener("mouseleave",this.handleMouseLeave);continue;case"11":this.canvas.removeEventListener("wheel",this.handleWheel);continue}break}}}function _0x3ebd2f(t,e,n,i){let s={ivZup:function(t,e){return t*e},CiPMk:function(t,e){return t+e},xsGpz:function(t,e){return t*e},myBmi:function(t,e){return t+e},UKzax:function(t,e){return t+e},ltKMg:function(t,e){return t<e},NoxHf:function(t,e){return t-e},pmZGJ:function(t,e){return t<e},VqzpV:function(t,e){return t(e)},YWFah:function(t,e){return t/e},PoxGr:function(t,e){return t-e},wzDBU:function(t,e){return t(e)},SeCGv:function(t,e){return t<e},cHIGW:function(t,e){return t>e},chyrZ:function(t,e){return t*e},HDKID:function(t,e){return t*e},ePSqB:function(t,e){return t-e},Jopuf:function(t,e){return t*e},LKqRA:function(t,e){return t+e},wWziF:function(t,e){return t-e},lsbDM:function(t,e){return t*e}},a=s.chyrZ(3,t)-s.HDKID(3,n)+1,o=s.ePSqB(3*n,s.Jopuf(6,t)),r=s.chyrZ(3,t),l=s.LKqRA(s.wWziF(3*e,s.lsbDM(3,i)),1),c=3*i-6*e,d=3*e;function u(t){return s.ivZup(s.CiPMk((a*t+o)*t,r),t)}function h(t){return s.myBmi(s.UKzax(3*a*t,2*o)*t,r)}return t=>{var e;return e=function t(e){let n=0,i=1,a=e;for(let o=0;s.ltKMg(o,8);o++){let r=s.NoxHf(u(a),e);if(s.pmZGJ(Math.abs(r),1e-6))return a;let l=s.VqzpV(h,a);if(s.pmZGJ(Math.abs(l),1e-6))break;a-=s.YWFah(r,l)}for(;i>n;){let c=s.PoxGr(s.wzDBU(u,a),e);if(s.SeCGv(Math.abs(c),1e-6))break;s.cHIGW(c,0)?i=a:n=a,a=s.CiPMk(i,n)/2}return a}(t),s.xsGpz(s.CiPMk(l*e,c)*e+d,e)}}function _0x1c3cdb(t,e="vertical"){let n={qhTRW:function(t,e){return t+e},CEpbL:"ArrowUp",NHOZQ:function(t,e){return t-e},eppwW:function(t,e){return t%e},hztbQ:function(t,e){return t+e},YIoPq:function(t,e){return t<=e},XExVP:function(t){return t()}};function i(){let i={AGreu:function(t,e){return t===e},dOsLP:"vertical",yVVpW:"ArrowDown",GAPBo:function(t,e){return t%e},mXghN:function(t,e){return n.qhTRW(t,e)},JDCXj:n.CEpbL,VRGSR:function(t,e){return n.NHOZQ(t,e)},JQUws:function(t,e){return t===e},nFMra:"ArrowRight",Dgtap:function(t,e){return n.eppwW(t,e)},fVwCV:function(t,e){return n.hztbQ(t,e)},MrEXI:"ArrowLeft",HEgkL:function(t,e){return t%e}};if(n.YIoPq(t.length,1)){t.forEach(t=>{t._navHandler&&(t.removeEventListener("keydown",t._navHandler),delete t._navHandler)});return}t.forEach((n,s)=>{n._navHandler&&n.removeEventListener("keydown",n._navHandler),n._navHandler=n=>{let a=s;if(i.AGreu(e,i.dOsLP)){if(n.key===i.yVVpW)a=i.GAPBo(i.mXghN(s,1),t.length);else{if(n.key!==i.JDCXj)return;a=(i.VRGSR(s,1)+t.length)%t.length}}else{if(!i.AGreu(e,"horizontal"))return;if(i.JQUws(n.key,i.nFMra))a=i.Dgtap(i.fVwCV(s,1),t.length);else{if(n.key!==i.MrEXI)return;a=i.HEgkL(s-1+t.length,t.length)}}t[a].focus()},n.addEventListener("keydown",n._navHandler)})}n.XExVP(i);let s={};return s.removeItem=function e(s){t=t.filter(t=>t!==s),n.XExVP(i)},s.addItem=function e(n){t.push(n),i()},s.updateEventListeners=i,s}HTMLElement.prototype.clear=function(){this.innerHTML=""},HTMLElement.prototype.focusable=function(t){this.tabIndex=t?"0":"-1",this.blur()},HTMLElement.prototype.bindWithCooldown=function(t,e=500){let n={};n.FBsJL="disabled",n.yzhHn="click",n.dwble=function(t,e){return t===e},n.YtBtk="keydown";let i=n,s=this;s._bindWithCooldownHandler&&(s.removeEventListener(i.yzhHn,s._bindWithCooldownHandler),s.removeEventListener(i.YtBtk,s._bindWithCooldownHandler));let a=0,o=function(n){let o=Date.now();!s.classList.contains(i.FBsJL)&&!s.hasAttribute("disabled")&&(n.type===i.yzhHn||32===n.keyCode||i.dwble(n.keyCode,13))&&(o-a>=e||i.dwble(e,0))&&(a=o,t.call(s,n))};s.addEventListener(i.yzhHn,o),s.addEventListener(i.YtBtk,o),s._bindWithCooldownHandler=o};let _0x141bce={set(t,e){try{let n=JSON.stringify(e);localStorage.setItem(t,n)}catch(i){console.error("Error saving to localStorage",i)}},get(t,e=null){let n={};n.zsRjU="Error reading from localStorage";try{let i=localStorage.getItem(t);return null!==i?JSON.parse(i):e}catch(s){return console.error(n.zsRjU,s),e}},remove(t){try{localStorage.removeItem(t)}catch(e){console.error("Error removing from localStorage",e)}},clear(){try{localStorage.clear()}catch(t){console.error("Error clearing localStorage",t)}},has(t){let e={};return e.DadAH=function(t,e){return t!==e},e.DadAH(localStorage.getItem(t),null)},keys:()=>Object.keys(localStorage)};class _0x18134d{constructor({parent:t,text:e,placement:n="top",interactive:i=!0}){let s={};s.OiOnT="5|4|0|2|1|3|6",s.ulkAZ="mouseenter",s.VoqXn="focus",s.pGnUN="blur",s.Jsgtf="mouseleave";let a=s,o=a.OiOnT.split("|"),r=0;for(;;){switch(o[r++]){case"0":this._placement=n;continue;case"1":this._tooltipId="tooltip-"+Math.random().toString(36).substr(2,9);continue;case"2":this._tooltip=null;continue;case"3":this._parent.setAttribute("aria-describedby",this._tooltipId);continue;case"4":this._content=e;continue;case"5":this._parent=t;continue;case"6":i&&(this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this._parent.addEventListener(a.ulkAZ,this.showTooltip),this._parent.addEventListener(a.VoqXn,this.showTooltip),this._parent.addEventListener(a.pGnUN,this.hideTooltip),this._parent.addEventListener(a.Jsgtf,this.hideTooltip));continue}break}}_createTooltipElement(){let t={};t.KUDmO="placement";let e=_0x4739c8("xuocLuDI6");return e.setAttribute(t.KUDmO,this._placement),e.setAttribute("id",this._tooltipId),e.innerText=this._content,e}updatePosition(){let t={};t.YLHIm="top",t.cMouh=function(t,e){return t+e},t.klxQR=function(t,e){return t-e},t.XQjxE=function(t,e){return t/e},t.PbsYg=function(t,e){return t-e},t.EjuyV=function(t,e){return t+e},t.KjwcT=function(t,e){return t/e},t.Uaxrp="left",t.jAJUp=function(t,e){return t/e},t.FKPMT=function(t,e){return t+e},t.uYqdO=function(t,e){return t+e},t.BdGKW="Invalid placement value";let e=t;if(!this._tooltip)return;let n=this._parent.getBoundingClientRect(),i=this._tooltip.getBoundingClientRect(),s,a;switch(this._placement){case e.YLHIm:s=e.cMouh(window.scrollY,n.top)-i.height-8,a=e.klxQR(e.cMouh(window.scrollX,n.left)+e.XQjxE(n.width,2),e.XQjxE(i.width,2));break;case"bottom":s=e.cMouh(e.cMouh(window.scrollY,n.bottom),8),a=e.PbsYg(e.EjuyV(window.scrollX,n.left)+e.KjwcT(n.width,2),e.KjwcT(i.width,2));break;case e.Uaxrp:s=window.scrollY+n.top+n.height/2-i.height/2,a=e.PbsYg(e.cMouh(window.scrollX,n.left),i.width)-8;break;case"right":s=e.EjuyV(window.scrollY,n.top)+e.jAJUp(n.height,2)-i.height/2,a=e.FKPMT(e.uYqdO(window.scrollX,n.right),8);break;default:throw Error(e.BdGKW)}this._tooltip.style.top=s+"px",this._tooltip.style.left=a+"px"}showTooltip(){let t={};t.MJjHv="data-state",t.IZvto="aria-expanded";let e=t,n="4|2|3|0|1|5".split("|"),i=0;for(;;){switch(n[i++]){case"0":this.updatePosition();continue;case"1":this._tooltip.setAttribute(e.MJjHv,"delayed-open");continue;case"2":this._tooltip=this._createTooltipElement();continue;case"3":document.body.appendChild(this._tooltip);continue;case"4":if(this._tooltip)return;continue;case"5":this._tooltip.setAttribute(e.IZvto,"true");continue}break}}hideTooltip(){let t={};t.kAnFl="data-state",t.nsmaj="aria-expanded";let e=t;this._tooltip&&(this._tooltip.setAttribute(e.kAnFl,"closed"),this._tooltip.setAttribute(e.nsmaj,"false"),this._tooltip.remove(),this._tooltip=null)}setText(t){this._content=t,this._tooltip&&(this._tooltip.innerText=t,this.updatePosition())}destroy(){let t={};t.WTAvf="mouseenter",t.eMwmS="mouseleave";let e=t,n="4|1|3|0|2".split("|"),i=0;for(;;){switch(n[i++]){case"0":this._parent=null;continue;case"1":this._parent&&(this._parent.removeAttribute("aria-describedby"),this._parent.removeEventListener(e.WTAvf,this.showTooltip),this._parent.removeEventListener("focus",this.showTooltip),this._parent.removeEventListener("blur",this.hideTooltip),this._parent.removeEventListener(e.eMwmS,this.hideTooltip));continue;case"2":this._content=null;continue;case"3":this._tooltip=null;continue;case"4":this.hideTooltip();continue}break}}}class _0x501f0b{constructor({trigger:t,placement:e="bottom"}){let n={zIzwW:"true",LQTMN:"xEHCrF5Oe",jmeJK:function(t,e){return t(e)},fBJbj:"data-state",MeXRu:"open",XNvPB:"aria-modal",aRNSE:function(t,e){return t(e)},aRIiB:"click"},i="_"+_0x25a206(12);this.trigger=t,this.placement=e,this.Root=_0x4739c8(n.LQTMN),this.Overlay=n.jmeJK(_0x4739c8,"overlay"),this.Content=n.jmeJK(_0x4739c8,"xC3Uih0ex"),this.Root.setAttribute(n.fBJbj,n.MeXRu),this.Root.setAttribute("role","popover"),this.Root.setAttribute(n.XNvPB,"true"),this.Root.id=i,document.body.appendChild(this.Root),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.onwheel=function(t){t.ctrlKey&&t.preventDefault()};let s=n.aRNSE(_0x261636,i);this._deactivated_elements=document.querySelectorAll("body > *:not(#"+s+", script, style)"),this._deactivated_elements.forEach(t=>{t.setAttribute("inert",n.zIzwW)}),this.Overlay.addEventListener(n.aRIiB,()=>this.close()),this.Overlay.addEventListener("contextmenu",()=>this.close()),document.addEventListener("keydown",this._handleKeyDown),this._setPosition(),window.addEventListener("resize",this._handleResize)}_handleResize=()=>{this._setPosition()};_setPosition(){let t={};t.iFCKf="absolute";let e=this.trigger.getBoundingClientRect(),n=this.Content.getBoundingClientRect(),i;if(Array.isArray(this.placement)){for(let s of this.placement){let a=this._calculatePosition(s,e,n);if(this._isPositionWithinViewport(a,n)){i=s;break}}i||(i=this.placement[0])}else i=this.placement;let o=this._calculatePosition(i,e,n);this.Content.style.position=t.iFCKf,this.Content.style.top=o.top+"px",this.Content.style.left=o.left+"px"}_calculatePosition(t,e,n){let i={};i.EjjIx="top",i.IilWS=function(t,e){return t-e},i.dcQFY="left",i.fAqbs="right",i.YdyzR="start",i.YvuHO="end",i.nsuOk=function(t,e){return t===e},i.IFtGA=function(t,e){return t+e},i.WDCUX=function(t,e){return t/e};let s=i,a=0,o=0,[r,l]=t.split("-");switch(r){case s.EjjIx:a=s.IilWS(e.top,n.height);break;case"bottom":a=e.bottom;break;case s.dcQFY:o=e.left-n.width;break;case s.fAqbs:o=e.right}switch(l){case s.YdyzR:o=e.left;break;case s.YvuHO:o=e.left+e.width-n.width;break;default:s.nsuOk(r,"top")||"bottom"===r?o=s.IFtGA(e.left,s.WDCUX(s.IilWS(e.width,n.width),2)):a=s.IFtGA(e.top,(e.height-n.height)/2)}let c={};return c.top=a,c.left=o,c}_isPositionWithinViewport(t,e){let n={};n.hfdaY=function(t,e){return t>=e},n.VBZBP=function(t,e){return t<=e},n.UrETZ=function(t,e){return t+e};let i=n,s=window.innerWidth,a=window.innerHeight,{top:o,left:r}=t;return o>=0&&i.hfdaY(r,0)&&i.VBZBP(o+e.height,a)&&i.UrETZ(r,e.width)<=s}_handleKeyDown=t=>{let e={};e.KZhvV=function(t,e){return t===e},e.KZhvV(t.keyCode,27)&&(this.close(),this.trigger.focus())};_removeListeners(){let t={};t.nSUYv="resize",document.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener(t.nSUYv,this._handleResize)}onClose(t){this.onCloseCallback=t}close(){let t={oYAWI:"inert",eYxKa:"data-state",uDMkr:function(t,e,n){return t(e,n)}};this._removeListeners(),this._deactivated_elements.forEach(e=>{e.removeAttribute(t.oYAWI)}),this.Root.setAttribute(t.eYxKa,"closed"),t.uDMkr(setTimeout,()=>{this.Root.remove(),this.onCloseCallback&&this.onCloseCallback()},100)}}function _0x261636(t){let e={};return e.exwbn=function(t,e){return t+e},t.replace(/([!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~])/g,"\\$&").replace(/^(-?\d)/,e.exwbn("\\3"+t.charAt(0)," "))}class _0x469a9c{constructor({closeOnOverlayClick:t=!1,closeOnEsc:e=!1,excludeElements:n=[]}={}){let i={wEoRG:function(t,e){return t(e)},yLOyG:"content",snufK:"data-state",TkKjx:"open",VunoO:"role",YMrpY:"aria-modal",ojTKU:"true",IzLwq:"show",AyKXK:"keydown"},s="_"+_0x25a206(12);this.Root=_0x4739c8("x54SkYRT0"),this.Overlay=_0x4739c8("overlay"),this.Content=i.wEoRG(_0x4739c8,i.yLOyG),this.Root.setAttribute(i.snufK,i.TkKjx),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.setAttribute(i.VunoO,"dialog"),this.Root.setAttribute(i.YMrpY,i.ojTKU),this.Root.onwheel=function(t){t.ctrlKey&&t.preventDefault()},this.Lock=!1,this.Root.id=s;let a=i.wEoRG(_0x261636,s);this._deactivated_elements=Array.from(document.querySelectorAll("body > *:not(#"+a+", script, style)")),this._deactivated_elements.forEach(t=>t.setAttribute("inert","true")),this._exclude_for_restore=n,document.body.appendChild(this.Root),this.Root.classList.add(i.IzLwq),_0x469a9c.stack.push(this),t&&this.Overlay.addEventListener("click",this._handleOverlayClick),e&&document.addEventListener(i.AyKXK,this._handleKeyDown)}_handleOverlayClick=()=>{this.close()};_handleKeyDown=t=>{let e={};e.cyKIa=function(t,e){return t===e},e.cyKIa(t.keyCode,27)&&_0x469a9c.stack[_0x469a9c.stack.length-1]===this&&this.close()};onClose(t){this.onCloseCallback=t}close(){let t={RjjdN:"inert",PXggv:function(t,e){return t>e},sZwBI:function(t,e,n){return t(e,n)}};if(!this.Lock){let e=_0x469a9c.stack.indexOf(this);e>-1&&_0x469a9c.stack.splice(e,1),this.onCloseCallback&&this.onCloseCallback(),t.PXggv(this._exclude_for_restore.length,0)?this._exclude_for_restore.forEach(e=>{e instanceof HTMLElement&&e.removeAttribute(t.RjjdN)}):this._deactivated_elements.forEach(t=>{t.removeAttribute("inert")}),this.Root.setAttribute("data-state","closed"),t.sZwBI(setTimeout,()=>{this.Root.remove()},100),this._removeListeners()}}_removeListeners(){let t={};t.eHJxP="keydown",this.Overlay.onclick=null,document.removeEventListener(t.eHJxP,this._handleKeyDown)}}_0x469a9c.stack=[];class _0x7d5c32 extends _0x469a9c{constructor({title:t,message:e,buttons:n=[],closeOnOverlayClick:i=!1,closeOnEsc:s=!0,showCloseButton:a=!1}={}){let o={};o.QTLoy="0px",o.YsiBK="xv1VrMJb6",o.FrdEA=function(t,e){return t>e};let r=o,l={};l.closeOnOverlayClick=i,l.closeOnEsc=s,super(l);let c=this._createHeader(t,a),d=this._createBody(e);if(this.Content.style.padding=r.QTLoy,this.Content.classList.add(r.YsiBK),this.Content.classList.add("xLDQZ1SSl"),this.Content.appendChild(c),this.Content.appendChild(d),r.FrdEA(n.length,0)){let u=this._createFooter(n);d.appendChild(u)}}_createHeader(t,e){let n={};n.ZIJZs="div",n.IbYDa="xrYn5ZY3v lf gn",n.oBsor="x6Y89FynP",n.glpwz=function(t,e){return t||e},n.aNFLn="Alert";let i=n,s=document.createElement(i.ZIJZs);s.className=i.IbYDa;let a=document.createElement(i.ZIJZs);if(a.className=i.oBsor,a.textContent=i.glpwz(t,i.aNFLn),s.appendChild(a),e){let o=_0x4739c8("xvb5soWNa");o.focusable(!0),o.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',o.bindWithCooldown(()=>{this.close()}),s.appendChild(o)}return s}_createBody(t){let e={};e.KlyYB="div",e.ebwmT="xWDUelLWA",e.VAOqX="Are you sure?";let n=e,i=document.createElement(n.KlyYB);i.className=n.ebwmT;let s=document.createElement(n.KlyYB);return s.className="xujSSErs5",s.innerHTML=t||n.VAOqX,i.appendChild(s),i}_createFooter(t){let e={LzeAd:function(t){return t()},WGRYg:function(t,e){return t+e},wsnBF:"div"},n=document.createElement(e.wsnBF);n.className="xWh2LBcgj";let i=_0x1c3cdb([],"horizontal");return t.forEach(({text:t,classList:s=[],onClick:a})=>{let o={fMMwM:function(t){return e.LzeAd(t)}},r=document.createElement("div");r.className=e.WGRYg("xgw2tzk6r ",s.join(" ")),r.setAttribute("tabindex","0"),r.textContent=t,r.bindWithCooldown(()=>{a&&o.fMMwM(a),this.close()}),i.addItem(r),n.appendChild(r)}),n}}let _0x4739c8=t=>{let e={};e.shfGv="div";let n=e,i=document.createElement(n.shfGv);return i.classList.add(t),i},_0x387088=t=>document.querySelector(t);function _0x25a206(t){let e={};e.DVKHL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n=e.DVKHL,i="";for(let s=0;s<t;s++)i+=n.charAt(Math.floor(Math.random()*n.length));return i}function _0x100faa(t,e,n={}){let i={FbnyH:"span",scdRS:"xSwoj5Cx2",tFKNQ:function(t,e){return t===e},XCxLp:function(t,e){return t(e)},IxhWH:function(t,...e){return t(...e)},nxWlO:"text/html"},{interval:s=24,fadeDuration:a=214,bezierControl:o=[.42,0,1,1]}=n,r=i.IxhWH(_0x3ebd2f,...o),l=Array.from((new DOMParser).parseFromString("<div>"+e+"</div>",i.nxWlO).body.firstChild.childNodes),c=[];l.forEach(e=>(function t(e,n){if(e.nodeType===Node.TEXT_NODE){let s=e.textContent.split("");for(let a of s){let o=document.createElement(i.FbnyH);o.classList.add(i.scdRS),o.textContent=a,n.appendChild(o),c.push(o)}}else if(i.tFKNQ(e.nodeType,Node.ELEMENT_NODE)){let r=e.cloneNode(!1);n.appendChild(r),Array.from(e.childNodes).forEach(e=>t(e,r))}})(e,t)),function t(){c.length&&(function t(e){let n={inNjC:function(t,e){return i.XCxLp(t,e)}},s=performance.now();function o(t){let i=Math.min((t-s)/a,1),l=r(i);e.style.opacity=l,i<1&&n.inNjC(requestAnimationFrame,o)}i.XCxLp(requestAnimationFrame,o)}(c.shift()),setTimeout(t,s))}()}function _0x38e922(t,e){let n={SSsbh:function(t,e){return t>=e},vODlu:function(t,e){return t<e},WQjGw:function(t,e){return t(e)},niZrp:function(t,e){return t(e)},JguxN:function(t,e){return t-e},BdGjE:function(t,e){return t*e}},i=new Date,s=new Date(t),a=new Date(e);if(n.SSsbh(i,s)&&i<=a)return"現在";let o=i<s?s:a,r=o.getHours(),l;l=n.SSsbh(r,0)&&r<6?"清晨":r<12?"早上":n.vODlu(r,18)?"下午":"晚上";let c=t=>new Date(t.getFullYear(),t.getMonth(),t.getDate()),d=n.WQjGw(c,o),u=n.niZrp(c,i),h=Math.round(n.JguxN(d,u)/(24*n.BdGjE(6e4,60))),$;switch(h){case -2:$="前天";break;case -1:$="昨天";break;case 0:$="今天";break;case 1:$="明天";break;case 2:$="後天";break;default:$=o.getMonth()+1+"/"+o.getDate()}return $+" "+l}function _0x1d0946(){let t={};return t.screenWidth=window.screen.width,t.screenHeight=window.screen.height,t.devicePixelRatio=window.devicePixelRatio,t}function _0x254c56(){let t={};t.kCoAF=function(t,e){return t>e},t.ccKXT="iOS",t.CObmb="Mobile",t.FVVyi="Android",t.xbHkF="Tablet",t.ZrzkT="Desktop",t.IjISA="macOS",t.vfzdE="Linux",t.masKR="Unknown";let e=t,n=navigator.userAgent||navigator.vendor||window.opera,i=navigator.platform,s=navigator.maxTouchPoints||0;if(/iPad|iPhone|iPod/.test(n)||"MacIntel"===i&&e.kCoAF(s,1)){let a=n.match(/OS (\d+)_?(\d+)?_?(\d+)?/i);if(a){let o=a[1]||"0",r=a[2]||"0",l=a[3]||"0";return{os:e.ccKXT,version:o+"."+r+"."+l,deviceType:/iPad/.test(n)?"Tablet":e.CObmb}}}if(/Android/.test(n)){let c=n.match(/Android (\d+)\.?(\d+)?\.?(\d+)?/i);if(c){let d=c[1]||"0",u=c[2]||"0",h=c[3]||"0";return{os:e.FVVyi,version:d+"."+u+"."+h,deviceType:/Mobile/.test(n)?e.CObmb:e.xbHkF}}}if(/Win/.test(i)){let $=n.match(/Windows NT (\d+)\.?(\d+)?/i);if($){let x=$[1]||"0",p=$[2]||"0",f={};return f.os="Windows",f.version=x+"."+p,f.deviceType="Desktop",f}let v={};return v.os="Windows",v.version=null,v.deviceType=e.ZrzkT,v}if(/Mac/.test(i)){let m=n.match(/Mac OS X (\d+)_?(\d+)?_?(\d+)?/i);if(m){let g=m[1]||"0",b=m[2]||"0",_=m[3]||"0",C={};return C.os=e.IjISA,C.version=g+"."+b+"."+_,C.deviceType="Desktop",C}let w={};return w.os="macOS",w.version=null,w.deviceType="Desktop",w}if(/Linux/.test(i)){let L={};return L.os=e.vfzdE,L.version=null,L.deviceType="Desktop",L}let y={};return y.os="Unknown",y.version=null,y.deviceType=e.masKR,y}function _0x291037(t){return t.replace(/\{RUBY_B#(.*?)\}(.*?)\{RUBY_E#\}/g,(t,e,n)=>"<ruby><rb>"+n+"</rb><rt>"+e+"</rt></ruby>")}let _0x50fa47={};_0x50fa47.edit='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" /><path d="M13.5 6.5l4 4" /></svg>',_0x50fa47.trash='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',_0x50fa47.copy='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg>';let _0x141c3b=_0x50fa47;class _0x53158c{constructor({closeOnOverlayClick:t=!1,closeOnEsc:e=!1,excludeElements:n=[]}={}){let i={npVRU:function(t,e){return t(e)},BcVWE:"drawer-overlay",kRHjr:"div",loItk:"data-state",XvRLQ:"dialog",XhaTk:"aria-modal",dTHhu:"show",IJlSU:"click",gBXaW:"keydown"},s="_"+_0x25a206(12);this.Root=_0x4739c8("drawer-root"),this.Overlay=i.npVRU(_0x4739c8,i.BcVWE),this.Content=i.npVRU(_0x4739c8,"drawer-content"),this.Header=_0x4739c8("drawer-header"),this.Handle=document.createElement(i.kRHjr),this.Handle.className="drawer-drag-handle",this.Header.appendChild(this.Handle),this.Body=i.npVRU(_0x4739c8,"drawer-body"),this.Content.appendChild(this.Header),this.Content.appendChild(this.Body),this.Root.setAttribute(i.loItk,"open"),this.Root.appendChild(this.Overlay),this.Root.appendChild(this.Content),this.Root.setAttribute("role",i.XvRLQ),this.Root.setAttribute(i.XhaTk,"true"),this.Root.onwheel=t=>{t.ctrlKey&&t.preventDefault()},this.Root.id=s;let a=i.npVRU(_0x261636,s);this._deactivated_elements=Array.from(document.querySelectorAll("body > *:not(#"+a+", script, style)")),this._deactivated_elements.forEach(t=>t.setAttribute("inert","true")),this._exclude_for_restore=n,document.body.appendChild(this.Root),this.Root.classList.add(i.dTHhu),_0x53158c.stack.push(this),t&&this.Overlay.addEventListener(i.IJlSU,this._handleOverlayClick),e&&document.addEventListener(i.gBXaW,this._handleKeyDown),this._setupDrag()}_handleOverlayClick=()=>{this.close()};_handleKeyDown=t=>{let e={};e.LEqwm=function(t,e){return t===e};let n=e;if(n.LEqwm(t.keyCode,27)){let i=_0x53158c.stack[_0x53158c.stack.length-1];n.LEqwm(i,this)&&this.close()}};onClose(t){this.onCloseCallback=t}close(){let t={WDgPq:function(t){return t()},bWPGa:function(t,e){return t>e},UlCGZ:function(t,e){return t===e},tMLxg:"none",qGmbn:"matrix",hfVFV:"x9GmoP75O",CdiIJ:function(t,e,n){return t(e,n)}},e=_0x53158c.stack.indexOf(this);t.bWPGa(e,-1)&&_0x53158c.stack.splice(e,1),this.onCloseCallback&&this.onCloseCallback();let n=()=>{this._exclude_for_restore.length>0?this._exclude_for_restore.forEach(t=>t.removeAttribute("inert")):this._deactivated_elements.forEach(t=>t.removeAttribute("inert"))},i=window.getComputedStyle(this.Content).transform;t.UlCGZ(i,t.tMLxg)||i.includes(t.qGmbn)?(this.Content.classList.remove(t.hfVFV),this.Content.style.transform="translateY(100%)",t.CdiIJ(setTimeout,()=>{t.WDgPq(n),this.Root.remove()},300)):(n(),this.Root.remove()),this._removeListeners()}_removeListeners(){let t={};t.mPLkQ="keydown",this.Overlay.onclick=null,document.removeEventListener(t.mPLkQ,this._handleKeyDown)}_setupDrag(){let t={BfqrU:"3|2|4|0|1",YCihc:function(t,e){return t!==e},piraP:function(t,e){return t-e},sdjkt:function(t,e){return t*e},RoLOZ:"x9GmoP75O",cyNhE:function(t,e){return t>e},iJXdj:"translateY(0)",RBCCm:function(t){return t()},JEWPO:"mousemove",xxqMa:"mouseup",jqHXP:"touchstart",Yjftm:"touchend"},e=0,n=0,i=0,s=!1,a=n=>{let a=t.BfqrU.split("|"),o=0;for(;;){switch(a[o++]){case"0":s=!0;continue;case"1":this.Content.classList.add("x9GmoP75O");continue;case"2":e=n.touches?n.touches[0].clientY:n.clientY;continue;case"3":if(t.YCihc(n.target.scrollTop,0)||n.target.closest(".xBWmlKrN2 *"))return;continue;case"4":i=Date.now();continue}break}},o=t=>{if(!s)return;let i=(n=t.touches?t.touches[0].clientY:t.clientY)-e;i>0&&(this.Content.style.transform="translateY("+i+"px)")},r=()=>{if(!s)return;let a=n-e,o=t.piraP(Date.now(),i)/1e3,r=this.Content.offsetHeight,l=t.sdjkt(r,.5);this.Content.classList.remove(t.RoLOZ),a>l||t.cyNhE(a/o,600)?this.close():this.Content.style.transform=t.iJXdj,s=!1},l={};l.passive=!0,this.Content.addEventListener(t.jqHXP,a,l);let c={};c.passive=!0,this.Content.addEventListener("touchmove",o,c),this.Content.addEventListener(t.Yjftm,r),this.Content.addEventListener("mousedown",e=>{a(e);let n=t=>o(t),i=()=>{t.RBCCm(r),document.removeEventListener(t.JEWPO,n),document.removeEventListener(t.xxqMa,i)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)})}}_0x53158c.stack=[];import{initializeApp as t}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";import{getAuth as e,signInWithPopup as n,GoogleAuthProvider as i,onAuthStateChanged as s,signInWithEmailAndPassword as a,signOut as o}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";import{getStorage as r,ref as l,uploadBytesResumable as c,getDownloadURL as d}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-storage.js";import{getFirestore as u,enableIndexedDbPersistence as h,collection as $,setDoc as x,doc as p,deleteDoc as f,getDoc as v,where as m,getDocs as g,startAfter as b,onSnapshot as _,query as C,orderBy as w,arrayUnion as L,arrayRemove as y,updateDoc as k,limit as T}from"https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";let _0x559b41={};_0x559b41.apiKey="AIzaSyAp73V5ZsBUtpy4kS3-QyGirGSpz71DPWo",_0x559b41.authDomain="smiling-theory-397204.firebaseapp.com",_0x559b41.databaseURL="https://smiling-theory-397204-default-rtdb.asia-southeast1.firebasedatabase.app",_0x559b41.projectId="smiling-theory-397204",_0x559b41.storageBucket="smiling-theory-397204.appspot.com",_0x559b41.messagingSenderId="360479398694",_0x559b41.appId="1:360479398694:web:05b7df5ce277f89ea8ffe7",_0x559b41.measurementId="G-6BKTT1K7D1";let _0x5e7740=t(_0x559b41),_0x443a7a=u(_0x5e7740),_0x2d26b8=r(_0x5e7740),_0x20a725=new i,_0x17fb00=e();h(_0x443a7a).then(()=>{console.log("離線緩存功能已啟用")}).catch(t=>{let e={};e.IOfpq="已開啟多個分頁，無法啟用離線緩存功能";let n=e;"failed-precondition"===t.code?console.error(n.IOfpq):"unimplemented"===t.code&&console.error("當前瀏覽器不支持離線緩存")});let _0x3084bc=/(Android|webOS|Windows Phone|iPhone|iPod|iPad)/i.test(window.navigator.platform)||window.innerWidth<550,_0x14c585=[],_0x758304={sidebar:_0x387088(".xFz8bwNFr"),main:_0x387088(".x8o58HttN"),messageInput:_0x387088(".xtsARDHTI"),searchInput:_0x387088(".xujXllYgW"),messageContainer:_0x387088(".xikyLwDf4"),sendButton:_0x387088(".xuwRtDpu4"),fileInput:_0x387088(".xVEJA40Qh"),attachButton:_0x387088(".xpbRox0hO#xJTcQcZ9E"),stickerButton:_0x387088(".xpbRox0hO#xbXZpIWEa"),markButton:_0x387088(".xpbRox0hO#xsVrze5YA"),brushButton:_0x387088(".xpbRox0hO#xrfvUzMAG"),heading:_0x387088(".xehdiGgBv"),backButton:_0x387088(".xehdiGgBv .xMyenRl7K .x8JU9DbQZ"),primaryArea:_0x387088(".xemr1y6ie"),spinnerContainer:_0x387088(".xemr1y6ie .spinner"),spinnerLabel:_0x387088(".xemr1y6ie .spinner .xkT2bkntT"),_mb_att_btn:_0x387088(".xDADAUUv4"),roomNameLabel:_0x387088(".x8o58HttN .xMyenRl7K .xvwhg72ii"),signatureLabel:_0x387088(".xlKSJ67AP"),nameLabel:_0x387088(".xt4GQkVIo"),avatarLabel:_0x387088(".xbVHF6S6B"),avatarWrapper:_0x387088(".xaoteDJh4"),profileContainer:_0x387088(".xQ6gFUtqT"),layoutResizer:_0x387088(".xrFP6D2e1"),statusLabel:_0x387088(".xOJE48BLX"),activityBar:_0x387088(".pS2na74a"),layoutResizer2:_0x387088(".PLc7zlhg")},_0x1a090f='<svg aria-hidden="true" class="xxA4Cqchz" style="min-width: 20px" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n								<path d="M12 3a9 9 0 1 0 9 9"></path>\n							</svg>載入中…',_0x4988d2={};_0x4988d2.current="0.0.3",_0x4988d2.cacheId="x0n0HCjlj",_0x4988d2.directions='<ul class="xxmjDL5xB xbH7v2Hbn">\n		<li class="xcKqXW8uF">修復了模糊效果無法正確渲染的錯誤</li>\n		<li class="xcKqXW8uF">修復了Drawer無法正確關閉的錯誤</li>\n		</ul>';let _0x125a51=_0x4988d2,_0x165607=[],_0x163354={},_0x54e844={},_0x1680f5,_0x40fb06=!1,_0x233e16="",_0x52b527,_0x29a1ba=0,_0x3f9cc5,_0x5166c1=!1,_0x1ef9ce=!1,_0x72e0a5=_0x758304.messageContainer,_0x10168e={};_0x10168e.state=!1,_0x10168e._a=null,_0x10168e._b=null,_0x10168e._n="",_0x10168e._d="",_0x10168e._m=[];let _0x325f06=_0x10168e,_0x3329d8="",_0x31f426=null,_0x2aa01d=!1;if(_0x3084bc)document.body.classList.add("mobile"),_0x758304._mb_att_btn.bindWithCooldown(function(){_0x758304.fileInput.click()});else{document.body.classList.add("desktop");let E={};E.parent=_0x758304.attachButton,E.text="附加文件",E.placement="top",new _0x18134d(E),_0x758304.attachButton.bindWithCooldown(function(){_0x758304.fileInput.click()});let M={};M.parent=_0x758304.sendButton,M.text="發送",M.placement="top",M.interactive=!0,new _0x18134d(M);let H={};H.parent=_0x758304.stickerButton,H.text="加入貼圖",H.placement="top",H.interactive=!0,new _0x18134d(H);let A={};A.parent=_0x758304.markButton,A.text="標記為重要",A.placement="top",A.interactive=!0;let I=new _0x18134d(A),B={};B.parent=_0x758304.brushButton,B.text="潤色文本",B.placement="top",B.interactive=!0,new _0x18134d(B),_0x1c3cdb([_0x758304.attachButton,_0x758304.brushButton,_0x758304.markButton,_0x758304.stickerButton],"horizontal"),_0x758304.brushButton.bindWithCooldown(function(){let t={jQQCL:function(t,e,n){return t(e,n)},aEBBm:"潤色文本",ZJDSu:"xDLwiKdTE"},e=t.jQQCL(_0x2355af,t.aEBBm,!0);e.content.classList.add("lg"),e.body.classList.add(t.ZJDSu)}),_0x758304.markButton.bindWithCooldown(function(){let t={};t.EWbmn="x3zdxRXQ6",t.GYrFZ="取消標記";let e=t;_0x1ef9ce?(_0x1ef9ce=!1,_0x758304.markButton.classList.remove(e.EWbmn),I.setText("標記為重要")):(_0x1ef9ce=!0,_0x758304.markButton.classList.add(e.EWbmn),I.setText(e.GYrFZ))},0);let W=!1,R=0,D=0,Y=t=>{let e={};e.VtJNg="xz7kq9zLe",e.AWTiI="mousemove",e.FMgvB="mouseup";let n=e;W=!0,document.body.classList.add(n.VtJNg);let i=t.target.getBoundingClientRect();D=t.clientX-i.left,document.addEventListener(n.AWTiI,j),document.addEventListener(n.FMgvB,S)},j=t=>{let e={};e.ggpcr=function(t,e){return t-e},e.sBoYD=function(t,e){return t-e},e.SZOiJ=function(t,e){return t+e};let n=e;if(!W)return;let i=_0x758304.sidebar.getBoundingClientRect().left,s=n.ggpcr(n.sBoYD(t.clientX,i),D);R=s,_0x758304.sidebar.style.width=n.SZOiJ(s,"px")},S=()=>{let t="0|1|3|2|4".split("|"),e=0;for(;;){switch(t[e++]){case"0":W=!1;continue;case"1":_0x141bce.set("xjS4MkN99",R);continue;case"2":document.removeEventListener("mousemove",j);continue;case"3":document.body.classList.remove("xz7kq9zLe");continue;case"4":document.removeEventListener("mouseup",S);continue}break}};window.addEventListener("blur",()=>{document.body.classList.remove("resizing"),W=!1}),_0x758304.layoutResizer.addEventListener("mousedown",t=>{Y(t)})}function _0x2355af(t,e=!1,...n){let i={xMZvz:function(t,e){return t(e)},jbLKJ:"xrYn5ZY3v",HyGea:"x6Y89FynP",orbZj:"xWDUelLWA",ANraG:"xvb5soWNa",znDxY:'<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',QNgVS:function(t,e){return t+e}};console.log(n);let s={};s.closeOnEsc=!0,s.closeOnOverlayClick=!0,s.excludeElements=n;let a=new _0x469a9c(s),o=i.xMZvz(_0x4739c8,i.jbLKJ);o.classList.add("lf"),a.Content.style.padding="0";let r=i.xMZvz(_0x4739c8,i.HyGea);o.appendChild(r),r.innerText=t,a.Content.appendChild(o);let l=i.xMZvz(_0x4739c8,i.orbZj);a.Content.appendChild(l);let c;e&&((c=_0x4739c8(i.ANraG)).focusable(!0),c.innerHTML=i.znDxY,a.close=a.close.bind(a),c.bindWithCooldown(a.close),o.appendChild(c));let d=o.getBoundingClientRect();o.style.minHeight=i.QNgVS(d.height,"px");let u={};return u.root=a,u.body=l,u.content=a.Content,u.closebtn=c,u.Root=a.Root,u.Content=a.Content,u}async function _0x4bd0a3(t,e){let n={yZmJD:function(t,e){return t(e)},lvtFF:"x8o1OSu71",SwdQJ:"xHZuqwWhI",IavoP:"嘗試修復偏差位移",AraVv:"data-state",gCZqP:"xUSR4cuWD",CTmKb:"xAQPbc7N3",SmLeP:function(t,e){return t(e)},GnXyG:"xBWmlKrN2",xrFpb:function(t,e,n){return t(e,n)},ZKWLk:function(t,e){return t===e},bRLtE:"instant",njbJr:"video",eFHyi:"true",NeTHx:"cache-url",ftvDA:"xGsec9lFd",gUsBz:"audio",WxWBV:"controls",MNXtB:"xYj7x2KZ4",hPrHY:"xVlceg4Ab",dBhOx:function(t,e){return t>e},OLuvO:"x6EwJGLAa"};if(e.startsWith("<")){let i=e.match(/<\s*(\w+)\s+(\S+)/),s=i[1],a=i[2];if(n.ZKWLk(s,"image")){let o=document.createElement("img");o.focusable(!0),o.classList.add("xGsec9lFd"),o.classList.add(n.gCZqP),o.setAttribute(n.AraVv,"loading"),_0x2aa01d||(console.log(n.IavoP),_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:n.bRLtE})),o.onerror=function(){console.log("載入失敗"),o.setAttribute("data-state","failed"),o.classList.remove("xUSR4cuWD")},o.onload=function(){let e={pCVfX:function(t,e){return n.yZmJD(t,e)},qRBHM:n.lvtFF,vkUwN:n.SwdQJ};_0x2aa01d||(console.log(n.IavoP),_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:"instant"})),o.setAttribute(n.AraVv,"loaded"),o.classList.remove(n.gCZqP),t.classList.add("xFIqZCKV3"),o.bindWithCooldown(function(){let t={};t.closeOnEsc=!0,t.closeOnOverlayClick=!0;let n=new _0x469a9c(t);n.Content.classList.add("xPSnkbRat");let i=document.createElement("canvas");i.classList.add("xWuhDLG1C"),n.Content.appendChild(i);let s=new _0x819aa7(i,{maxScale:2,onClickOutside(t,e){o(t,e)}});function o(){s.destroy(),n.close()}s.loadImage(a);let r=e.pCVfX(_0x4739c8,e.qRBHM);r.focusable(!0),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',r.bindWithCooldown(o),n.Content.appendChild(r);let l=e.pCVfX(_0x4739c8,"x8o1OSu71");l.classList.add(e.vkUwN),l.focusable(!0),l.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5" /></svg>',l.bindWithCooldown(function(){s.rotate()},0),n.Content.appendChild(l)},0)};let r={};r.action="cache-url",r.url=a,navigator.serviceWorker?.controller?.postMessage(r),o.src=a,t.appendChild(o)}else if(n.ZKWLk(s,n.njbJr)){let l=document.createElement(n.njbJr);l.setAttribute("muted",""),l.focusable(!0),l.setAttribute("controls",n.eFHyi),l.setAttribute("controlslist","nodownload"),l.onloadedmetadata=function(){console.log("嘗試修復偏差位移"),_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:"instant"})};let c={};c.action=n.NeTHx,c.url=a,navigator.serviceWorker?.controller?.postMessage(c),l.src=a,l.classList.add(n.ftvDA),t.appendChild(l)}else if(s===n.gUsBz){let d=document.createElement("audio");d.focusable(!0),d.setAttribute(n.WxWBV,"true");let u={};u.action="cache-url",u.url=a,navigator.serviceWorker?.controller?.postMessage(u),d.src=a,d.classList.add("xGsec9lFd"),t.appendChild(d)}else t.innerHTML='<div class="xUiYNFhtR">無法預覽這個文件 <a class="x0ciSQShX no-wrap" href="'+a+'" target="_blank" rel="noreferrer noopener">下載</a></div>'}else{let h=document.createElement("span"),$=_0x4739c8(n.MNXtB);h.classList.add(n.hPrHY),n.xrFpb(_0x100cca,h,e),t.appendChild(h),t.appendChild($);let x=h.getBoundingClientRect().height;if(n.dBhOx(x,125)){t.classList.add("xDVzL7FIt");let p=_0x4739c8(n.OLuvO),f={};f["0"]='<span class="xNM56JYdv">展開全部</span>',f["1"]='<span class="xNM56JYdv">顯示較少</span>',f["2"]='<span class="xNM56JYdv">查看全部</span>';let v=f;p.innerHTML=v[_0x3084bc?2:0],p.focusable(!0);let m=0;p.bindWithCooldown(function(){if(_0x3084bc){let i={};i.closeOnEsc=!0,i.closeOnOverlayClick=!0;let s=new _0x53158c(i);s.Root.classList.add(n.CTmKb);let a=n.SmLeP(_0x4739c8,n.GnXyG);s.Body.appendChild(a),n.xrFpb(_0x100cca,a,e)}else 0===m?(m=1,t.classList.add("x2y08yFOH"),p.innerHTML=v[1]):(m=0,t.classList.remove("x2y08yFOH"),p.innerHTML=v[0])},0),$.appendChild(p)}}}function _0x100cca(t,e){let n={jkMaU:function(t,e,n){return t(e,n)},ihqfO:"mobile",JlGLL:"desktop",ERCxx:function(t,e){return t(e)}},i=/@(\w+)/g,s=0,a;for(t.clear();null!==(a=i.exec(e));){let{index:o}=a,r=a[1];o>s&&_0x135a95(t,e.slice(s,o));let l=document.createElement("a");l.classList.add("x0ciSQShX"),l.focusable(!0),l.dataset.userId=r;let c={};c.userId=r,c.dom=l,_0x325f06._m.push(c),n.ERCxx(_0xf8ad07,r).then(function(t){t?(l.textContent="@"+(t.name||"未知"),l.bindWithCooldown(function(){n.jkMaU(_0x3b47c4,_0x31f426,{data:t,type:_0x3084bc?n.ihqfO:n.JlGLL})},0)):l.textContent="@未知"}).catch(function(t){l.textContent="@"+r,console.log("無法載入這位用戶的暱稱",t)}),t.appendChild(l),s=i.lastIndex}s<e.length&&_0x135a95(t,e.slice(s))}function _0x135a95(t,e){let n={bUJSq:function(t,e){return t(e)},zggJD:function(t,e){return t<e}},i=e.split("\n");i.forEach((e,s)=>{if(e){let a=n.bUJSq(_0x10368b,e),o=document.createElement("div");o.innerHTML=a,Array.from(o.childNodes).forEach(e=>{t.appendChild(e)})}n.zggJD(s,i.length-1)&&t.appendChild(document.createElement("br"))})}function _0x10368b(t){let e={PjTcH:function(t,e){return t+e},pyIOS:'<span class="xCe4Btdzm" tabindex="0"><a class="x0ciSQShX" tabindex="-1" translate="no" href="',Hpiqt:function(t,e){return t(e)}};return t.replace(/https?:\/\/[^\s/$.?#].[^\s]*/g,function(t){let n=t.replace(/^https?:\/\//,"");return e.PjTcH(e.pyIOS+t,'" target="_blank" rel="noreferrer noopener">')+e.Hpiqt(decodeURIComponent,n)+"</a></span>"})}async function _0x24c716(){let t={OUgxr:"task",DWHAS:"1358",lKAzv:"clear-all-caches",Erhub:function(t,e){return t(e)},EfrYr:function(t,e,n,i){return t(e,n,i)},UJGZA:function(t,e){return t(e)},oDiPM:function(t,e,n,i,s){return t(e,n,i,s)},UEZwR:"messages",JHeOV:function(t,e,n){return t(e,n)},MKtTJ:function(t,e,n,i){return t(e,n,i)}},e=_0x758304.messageInput.innerText.trim();if(!e||!_0x233e16||""===e)return;_0x758304.sendButton.classList.add("disabled"),_0x758304.sendButton.focusable(!1);let n=e.match(/^\/(\w+)\s*(.*)/);if(n){let i=n[1],s=n[2];if(i===t.OUgxr){if(s===t.DWHAS){_0x758304.messageInput.clear();let a={};a.action=t.lKAzv,navigator.serviceWorker?.controller?.postMessage(a);let o={};o.content="已成功清除緩存，重新載入後即生效",o.tag="2",_0x410d4f(o,t.Erhub(_0x25a206,20),"3");return}{_0x758304.messageInput.clear();let r={};r.content="未知的指令，請重新嘗試",t.EfrYr(_0x410d4f,r,t.UJGZA(_0x25a206,20),"3");return}}}e=e.replace(/&([^;]+)/g,"&amp;$1").replaceAll("<","&lt;").replaceAll(">","&gt;").replace(/\.\.\./g,"…").replace(/(\r?\n){3,}/g,"\n\n"),_0x758304.messageInput.clear();let l=_0x1ef9ce?"1":null;_0x758304.markButton.classList.remove("x3zdxRXQ6"),_0x1ef9ce=!1;let c=t.UJGZA(p,t.oDiPM($,_0x443a7a,"chats",_0x233e16,t.UEZwR));await t.JHeOV(x,c,{sender:_0x3f9cc5,content:e,timestamp:Date.now(),tag:l});let d={};d.content=e,d.tag=l,t.MKtTJ(_0x410d4f,d,c.id,"3")}navigator.serviceWorker.addEventListener("message",t=>{let e={CMLro:"cacheSizeResult",dGjds:function(t,e,n,i){return t(e,n,i)}};if("cache-size-result"===t.data.type){let n=document.getElementById(e.CMLro);if(t.data.error){n.innerHTML="错误: "+t.data.error;return}e.dGjds(_0x410d4f,{content:_0x571198(t.data.bytes)},_0x25a206(20),"3")}});let _0x29ea5a=0;function _0x410d4f(t,e,n="1"){let i={mkrqi:function(t,e){return t(e)},bWQlO:"xMyW2iRSH",FGLvG:"xc4iCj2Gy",Ybwon:function(t,e){return t(e)},EPVvH:"data-visible",xwqHs:"data-message-id",cHnZO:function(t,e){return t===e},RSFTh:function(t,e,n){return t(e,n)}},s=_0x4739c8("xVC8gtuyS"),a=i.mkrqi(_0x4739c8,i.bWQlO),o=_0x4739c8("xKljxgVJA"),r=_0x4739c8("xu4Celbbq"),l=_0x4739c8(i.FGLvG),c=i.Ybwon(_0x4739c8,"xRHoYYwoZ");switch(s.setAttribute(i.EPVvH,"true"),s.setAttribute(i.xwqHs,e),s.classList.add("xiOw4dg0O"),s.appendChild(o),o.appendChild(c),c.appendChild(r),r.appendChild(l),c.appendChild(a),l.innerText="你",i.cHnZO(_0x3329d8.sender,t.sender)&&s.classList.add("xOmVIOA3e"),i.cHnZO(t.tag,"1")?a.classList.add("x4rKxFxLl"):"2"===t.tag&&a.classList.add("xHJfZfjT1"),_0x1680f5&&(_0x1680f5.remove(),_0x1680f5=null),n){case"1":_0x758304.messageContainer.appendChild(s);break;case"2":_0x72e0a5.appendChild(s),_0x29ea5a+=s.offsetHeight;break;case"3":_0x758304.messageContainer.appendChild(s),_0x5166c1=!0,_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:"smooth"})}i.RSFTh(_0x4bd0a3,a,t.content)}function _0x1184e5(t,e,n="1"){let i={FdHNf:function(t,e,n){return t(e,n)},qtbcN:"xWzeTGC6P",ZzUYh:function(t,e){return t(e)},aMdtn:"/assets/avatar.png",gAEjy:function(t,e){return t(e)},TmUNX:"xSYcbYqTG",QCoiV:function(t,e){return t(e)},ZsXoN:"xKljxgVJA",QCUKA:"xc4iCj2Gy",IIhkU:"xt8fROB2L",wffjM:"data-visible",bIJzu:"true",PTdDr:function(t,e){return t===e},aAuwc:"x4rKxFxLl"},s=_0x4739c8("xVC8gtuyS"),a=i.gAEjy(_0x4739c8,"xMyW2iRSH"),o=_0x4739c8(i.TmUNX),r=i.QCoiV(_0x4739c8,i.ZsXoN),l=_0x4739c8("xu4Celbbq"),c=i.gAEjy(_0x4739c8,i.QCUKA),d=i.QCoiV(_0x4739c8,i.IIhkU),u=_0x4739c8("xRHoYYwoZ"),h=document.createElement("img");switch(s.setAttribute(i.wffjM,i.bIJzu),d.classList.add("xt8fROB2L"),h.loading="lazy",s.appendChild(o),s.appendChild(r),r.appendChild(u),u.appendChild(l),l.appendChild(c),u.appendChild(a),l.appendChild(d),o.appendChild(h),s.setAttribute("data-message-id",e),i.PTdDr(t.tag,"1")&&a.classList.add(i.aAuwc),d.innerText="0s",c.innerText="未知",h.draggable=!1,_0x1680f5&&(_0x1680f5.remove(),_0x1680f5=null),_0x3329d8.sender===t.sender&&s.classList.add("xOmVIOA3e"),n){case"1":_0x758304.messageContainer.appendChild(s);break;case"2":_0x72e0a5.appendChild(s),_0x29ea5a+=s.offsetHeight;break;case"3":_0x758304.messageContainer.appendChild(s),_0x5166c1=!0,_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:"smooth"}),_0x5166c1=!1}_0x4bd0a3(a,t.content),_0xf8ad07(t.sender).then(e=>{let n={};n.cDpBn=i.qtbcN;let s=n;function a(){let t={};t.data=e,t.type=_0x3084bc?"mobile":"desktop",i.FdHNf(_0x3b47c4,_0x758304.main,t)}d.innerText=i.ZzUYh(_0x36a502,t.timestamp),h.src=e.avatarUrl||i.aMdtn,h.onload=function(){o.classList.add(s.cDpBn)},c.onclick=a,o.focusable(!0),o.bindWithCooldown(a),c.innerText=e.name||"未知"}).catch(t=>{console.error(t)})}function _0x3b71d4(t,e,n){let i={eVfQh:function(t,e){return t(e)},rpzsj:"暫時還沒有描述哦",yPwKD:"xJd2GT7MI",MpOZo:function(t,e){return t||e}};_0x758304.signatureLabel.innerHTML=i.eVfQh(_0x5c2c21,n||i.rpzsj),_0x758304.avatarWrapper.classList.remove(i.yPwKD),_0x758304.avatarLabel.src=i.MpOZo(t,"assets/avatar.png"),_0x758304.nameLabel.textContent=e||"未知"}async function _0x35078f(){let t={NOXYI:function(t,e){return t-e},lokNy:function(t,e){return t*e},hbtoW:"--xVizV2ybq",bhEbN:function(t,e){return t(e)},ejGfJ:"搜尋…",sRpzr:"載入中…",YZVKi:"xmKH3ad5R",TTzWz:function(t){return t()},VWcsV:"發生未知錯誤",MJkef:"resize",SpfdU:"設置布局時發生錯誤",LioRw:"disabled",wlsiy:function(t,e){return t!==e},YGNRx:"cvs"};if(_0x40fb06)return;console.log("正在初始化應用程序"),_0x758304.roomNameLabel.innerText="未知",_0x758304.searchInput.placeholder=t.ejGfJ,_0x758304.messageInput.setAttribute("placeholder","在這裡輸入訊息…"),_0x758304.spinnerLabel.innerText=t.sRpzr;let e=_0x141bce.get("xjS4MkN99");e&&(_0x758304.sidebar.style.width=e+"px"),document.body.classList.add(t.YZVKi);let n=_0x254c56(),i=_0x1d0946();t.TTzWz(_0x26477c);try{_0xf8ad07(_0x3f9cc5).then(async e=>{(!e.deviceInfo||t.NOXYI(Date.now(),e.deviceInfo.lastUpdate)>36e5)&&(await _0x1a4261(_0x3f9cc5,{deviceInfo:{lastUpdate:Date.now(),os:n.os+" "+n.version,screen:i.screenWidth+"x"+i.screenHeight+" @"+i.devicePixelRatio+"x"}}),console.log("已上傳裝置信息"))})}catch(s){console.error(t.VWcsV,s)}try{function a(){let e=_0x758304.messageContainer.getBoundingClientRect();_0x758304.messageContainer.style.setProperty("--x9LFHiVqv",Number((t.lokNy(e.height,.6)-24).toFixed(2))+"px"),_0x758304.messageContainer.style.setProperty(t.hbtoW,t.NOXYI(t.bhEbN(Number,(.72*e.height).toFixed(2)),24)+"px")}a(),window.addEventListener(t.MJkef,a)}catch(o){console.log(t.SpfdU)}if(_0x758304.searchInput.removeAttribute("disabled"),_0x758304.searchInput.focusable(!0),_0x758304.profileContainer.classList.remove(t.LioRw),_0x758304.profileContainer.focusable(!0),t.wlsiy(localStorage.getItem(t.YGNRx),_0x125a51.current)){if(_0x3084bc){let r={};r.closeOnEsc=!0,r.closeOnOverlayClick=!0,new _0x53158c(r).Body.innerHTML='<div class="xa6f2dQXX">更新了什麼</div><div class="x68JrA5Ak">'+_0x125a51.directions+"</div>"}else _0x2355af("更新了什麼",!0).body.innerHTML='<div class="xeUKJgV96">'+_0x125a51.directions+"</div>";localStorage.setItem(t.YGNRx,_0x125a51.current)}_0x40fb06=!0}function _0x5c2c21(t){let e={};e.WHPDW="&amp;$1",e.CRKBL="&nbsp;";let n=e;return t.replace(/&([^;]+)/g,n.WHPDW).replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ",n.CRKBL).replaceAll("\n","<br>")}function _0x53c22c(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}let _0xe9f2de="Structure",_0x9969b5;function _0x411b3b(t){var e;let n={BpxEj:"取得用户名称时发生错误：",eebvt:function(t,e){return t===e},TmicB:function(t,e,n,i){return t(e,n,i)},SEbCm:"xjrgLBAlF",rYMqw:"xxC3C39Oc",qeLoo:function(t,e){return t+e},PAFCb:"disabled",RyscF:".x2fP9fkxS.active",yoBsv:"active",yqbxQ:"3|1|4|2|0",omEVx:function(t,e){return t(e)},wPemM:".xehdiGgBv .xMyenRl7K .x8JU9DbQZ",pWzCO:"contenteditable",DzPLf:"true",vLdpN:"xqBX9i6rZ",qLHeE:"chats",hHMxT:"messages",znkvW:function(t,e,n){return t(e,n)},ZIvwM:"instant",ChXTP:function(t,e){return t!==e},Lhshn:function(t,e,n){return t(e,n)},prKPD:"Error while deleting item:",jXivu:"A5o980bj",aopJv:"img",EDlUa:"所有成員",paoHG:function(t,e){return t(e)},HWoIc:"green",ctTYq:"xHxVtIAsn",GKZse:function(t,e){return t(e)},kDOQv:"xt4GQkVIo",ACbGX:"xxChbQgko",kJqLh:"新的行程",alQTR:function(t,e,n){return t(e,n)},zkWiA:function(t,e,n,i,s,a){return t(e,n,i,s,a)},DFdOG:function(t,e,n,i){return t(e,n,i)},OQvMY:"xYvZ9WF6d",KxUfn:"xGGKUZ7B3",rwvOZ:"x40AApYkW",hSQoD:function(t){return t()},NeYCa:"xtx2Cn8cK",RTPdM:"行程安排",waHQv:function(t,e){return t(e)},AmSyj:"xtG9t2xuE",SsePe:"xY17x64dw",XFhEY:"xmiEvp5FV",iYILt:"top-start",OWlwD:"top-end",KGjGQ:"xoV8hdbgt",zbjdU:function(t,e){return t(e)},XWWdj:"xrQdSHI2A",EBabV:"xcoXgMpFW",sHnrG:"xUdcoAHYM",zbFxv:"x2fP9fkxS",UwRhN:"xT3Ta8vKw",IRzvz:function(t,e){return t(e)},BSRhg:"x6HyfOZS7",APhJq:function(t,e){return t(e)},MXEKt:"center",VlrIN:"nearest"},i=_0x4739c8(n.zbFxv),s=_0x4739c8("xQ65c0Nkc"),a=n.paoHG(_0x4739c8,"xybvM5cRF"),o=_0x4739c8(n.UwRhN),r=n.IRzvz(_0x4739c8,n.BSRhg),l=_0x4739c8("xQkxrD9ZA");async function c(){let e={yGkFh:n.BpxEj,ARfXo:function(t,e){return n.eebvt(t,e)},mVaZx:function(t,e,i,s){return n.TmicB(t,e,i,s)},JsKNU:function(t,e,n,i){return t(e,n,i)}};if(_0x233e16!==t.id||_0x3084bc){_0x758304.messageInput.innerHTML="",_0x233e16=t.id,_0x325f06._m.length=0,_0x31f426=_0x758304.main,_0x2aa01d=!1;let s=[];t.members.forEach(t=>{_0xf8ad07(t).then(e=>{let n={};n.id=t,n.name=e.name,s.push(n)}).catch(t=>{console.error(e.yGkFh,t)})}),_0xe9f2de=(t.name||"未知")+" - Structure",document.title=_0xe9f2de,_0x758304.roomNameLabel.innerText=t.name,_0x165607.length=0,_0x9969b5&&_0x9969b5.remove(),n.eebvt(t.tag,"public")?((_0x9969b5=_0x4739c8(n.SEbCm)).focusable(!0),_0x9969b5.classList.add("xYARRkCjq"),_0x9969b5.textContent="公開",_0x9969b5.bindWithCooldown(function(){_0x2355af("說明",!0).body.innerHTML='<div class="xrrfDPLS2">任何人都能加入這個聊天室</div>'}),_0x758304.statusLabel.appendChild(_0x9969b5)):"privacy"===t.tag&&((_0x9969b5=_0x4739c8("xjrgLBAlF")).focusable(!0),_0x9969b5.classList.add(n.rYMqw),_0x9969b5.textContent="私人",_0x9969b5.bindWithCooldown(function(){_0x2355af("說明",!0).body.innerHTML='<div class="xrrfDPLS2">只有受邀人能加入本聊天室</div>'}),_0x758304.statusLabel.appendChild(_0x9969b5));let a=new URLSearchParams(window.location.search);if(a.set("r",t.id),window.history.replaceState({},"",n.qeLoo("?",a.toString())),_0x758304.messageContainer.classList.remove("xVjpzmyej"),_0x758304.fileInput.removeAttribute("disabled"),_0x758304.attachButton.classList.remove(n.PAFCb),_0x758304.attachButton.focusable(!0),_0x758304.stickerButton.classList.remove("disabled"),_0x758304.stickerButton.focusable(!0),_0x758304.markButton.classList.remove("disabled"),_0x758304.markButton.focusable(!0),_0x758304.markButton.classList.remove("x3zdxRXQ6"),_0x1ef9ce=!1,_0x758304.brushButton.classList.remove("disabled"),_0x758304.brushButton.focusable(!0),_0x758304.messageInput.setAttribute("contenteditable","true"),_0x3084bc){let o=n.yqbxQ.split("|"),r=0;for(;;){switch(o[r++]){case"0":_0x758304.main.classList.add("x8VAGH6N2");continue;case"1":_0x758304._mb_att_btn.focusable(!0);continue;case"2":n.omEVx(_0x387088,n.wPemM).focusable(!0);continue;case"3":_0x758304._mb_att_btn.classList.remove("disabled");continue;case"4":_0x758304.backButton.classList.remove(n.PAFCb);continue}break}}else _0x387088(n.RyscF)&&_0x387088(".x2fP9fkxS.active").classList.remove("active"),i.classList.add(n.yoBsv);_0x758304.messageInput.setAttribute(n.pWzCO,n.DzPLf),_0x758304.messageInput.focusable(!0),_0x758304.messageContainer.clear(),(_0x1680f5=n.omEVx(_0x4739c8,n.vLdpN)).classList.add("spinner"),_0x1680f5.innerHTML=_0x1a090f,_0x758304.messageContainer.appendChild(_0x1680f5);let l=await g(C($(_0x443a7a,n.qLHeE,t.id,n.hHMxT),n.znkvW(w,"timestamp","desc"),T(10)));_0x52b527=l.docs[9];let c=[];l.forEach(t=>{c.push(t)}),0===c.length&&_0x1680f5&&(_0x1680f5.innerHTML="這裡還沒有訊息，現在就開始聊天吧"),c.reverse(),c.map(t=>{var n=t.data();-1===_0x165607.indexOf(t.id)&&(e.ARfXo(n.sender,_0x3f9cc5)?(_0x165607.push(t.id),e.mVaZx(_0x410d4f,n,t.id,"1")):(_0x165607.push(t.id),e.JsKNU(_0x1184e5,n,t.id,"1"))),_0x3329d8=n}),_0x5166c1=!0,_0x758304.messageContainer.scrollTo({top:_0x758304.messageContainer.scrollHeight,behavior:n.ZIvwM}),_0x5166c1=!1}}_0x174f13(t.id),i.bindWithCooldown(c);let d={};d.id=t.id,d.length=t.size,d.name=t.name||"未知",d.launch=c,d.dom=i,_0x14c585.push(d),i.appendChild(s),i.appendChild(r),r.appendChild(l);let u=function(){let e={WilDc:function(t,e,n){return t(e,n)},rkXJk:"xZHdsOFDz",yCqLb:n.aopJv,qZTFF:"xs8tjkwHJ",ZWJIn:function(t,e){return t(e)},ekVjf:function(t,e){return t(e)},TCrVg:"暫時還沒有描述哦",KSiCQ:n.EDlUa,AuOHd:"xU2hUavXh",YTJjn:"xb4MnocjO",jEUib:function(t,e){return t!==e},ByuWN:n.PAFCb,gDUfh:"xTIlpY4Et",oifRW:function(t,e){return n.paoHG(t,e)},NTnTd:function(t,e){return t===e},VmhBp:n.HWoIc,WMPHD:"x9hGI5hex",xtBdR:function(t,e){return t===e},BCxRh:"x0eVQzH93",zNHwk:n.ctTYq,MjSGt:function(t,e){return n.GKZse(t,e)},TJCIr:n.kDOQv,tBCwP:function(t,e,i){return n.znkvW(t,e,i)},LNlUC:"忘記加上描述了",BsJGH:function(t,e,n){return t(e,n)},rDtiY:function(t,e){return t(e)},kriLy:n.ACbGX,Vwlus:"xaTPzRSCY",AABuc:function(t,e){return t(e)},jDAVF:function(t,e,n){return t(e,n)},lyBzy:function(t,e){return n.omEVx(t,e)},EGjXl:function(t,e,n,i,s){return t(e,n,i,s)},TJiUs:n.kJqLh,czvBX:function(t,e,i){return n.alQTR(t,e,i)},byvWO:function(t,e,i){return n.znkvW(t,e,i)},yggXP:function(t,e,i,s,a,o){return n.zkWiA(t,e,i,s,a,o)},LiPHv:function(t,e,i,s){return n.DFdOG(t,e,i,s)},UxEBq:"xF37V7xd0",BgMPS:n.OQvMY,XMvaZ:n.KxUfn,VoZua:"date",KvRgV:function(t,e){return t(e)},BgPcJ:n.rwvOZ,EuiBS:function(t){return n.hSQoD(t)},PLrSK:n.NeYCa,QvYZU:function(t,e){return t(e)},yWzDV:"xNu1Upzh6",Evdhb:n.RTPdM,VhVnv:function(t,e){return t(e)},Vputm:"xTOLrzGN6",bRvsX:function(t,e){return n.waHQv(t,e)},bGizX:n.AmSyj,tbJya:"x5FOXvrVK",haBHG:"x7ho7YfuM",uMUph:n.SsePe,tDoPY:n.XFhEY,XfdEt:function(t,e){return n.waHQv(t,e)},oTyxC:function(t,e){return t(e)},UUlLu:function(t,e,n,i,s){return t(e,n,i,s)}},s={};s.trigger=l,s.placement=["bottom-start","bottom-end",n.iYILt,n.OWlwD];let a=new _0x501f0b(s);a.Content.classList.add(n.KGjGQ);let o=_0x4739c8("xrQdSHI2A"),r=n.zbjdU(_0x4739c8,n.XWWdj),c=n.waHQv(_0x4739c8,n.EBabV),d=_0x4739c8(n.XWWdj);o.bindWithCooldown(function(){let n={hcxlD:function(t,n,i){return e.WilDc(t,n,i)},DovNn:"mobile",PwbCS:"xScefCkPw",aAulQ:function(t,e){return t(e)},qMxEw:e.rkXJk,JVZJC:e.yCqLb,tMUDQ:"assets/avatar.png",GzVLc:"cache-url",CMptr:e.qZTFF,CAaAO:function(t,n){return e.ZWJIn(t,n)},IjddA:"xt4GQkVIo",RhuBM:function(t,n){return e.ekVjf(t,n)},cxuac:"xlKSJ67AP",XHSeF:e.TCrVg};a.close();let i=e.ZWJIn(_0x4739c8,"xPAY7PmDq"),s;if(_0x3084bc){let o={};o.parent=_0x758304.sidebar,o.title=e.KSiCQ,(s=new _0x75e630(o)).Content.classList.add(e.AuOHd),s.Content.appendChild(i)}else(s=e.WilDc(_0x2355af,e.KSiCQ,!0)).content.classList.add("lg"),s.content.classList.add(e.YTJjn),s.body.appendChild(i);let r=0;t.members.forEach(t=>{r++,function t(e){_0xf8ad07(e).then(t=>{let e={yYeEO:function(t,e,i){return n.hcxlD(t,e,i)},IlVlN:n.DovNn},a=_0x4739c8(n.PwbCS),o=n.aAulQ(_0x4739c8,n.qMxEw),r=document.createElement(n.JVZJC);r.classList.add("xxnnTDIPC"),r.src=t.avatarUrl||n.tMUDQ,r.draggable=!1,r.loading="lazy";let l={};l.action=n.GzVLc,l.url=t.avatarUrl,navigator.serviceWorker?.controller?.postMessage(l),o.appendChild(r);let c=_0x4739c8(n.CMptr),d=n.CAaAO(_0x4739c8,n.IjddA),u=n.RhuBM(_0x4739c8,n.cxuac);d.innerText=t.name,u.innerText=t.signature||n.XHSeF,a.focusable(!0),c.appendChild(d),c.appendChild(u),a.appendChild(o),a.appendChild(c),a.bindWithCooldown(function(){if(_0x3084bc)e.yYeEO(_0x3b47c4,s.Root,{data:t,type:e.IlVlN});else{s.root.close();let n={};n.data=t,n.type="desktop",_0x3b47c4(_0x758304.main,n)}}),i.appendChild(a)}).catch(t=>{console.error(t)})}(t)}),1==r&&i.classList.add("xyS4vzBWG")}),o.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"  fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round"  stroke-linejoin="round"><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M21 21v-2a4 4 0 0 0 -3 -3.85" /></svg>查看所有成員',o.classList.add(n.sHnrG),[o,r,d].forEach(t=>{t.focusable(!0)}),d.bindWithCooldown(function(){let e={PvHtt:function(t,e){return n.ChXTP(t,e)},YxHRY:function(t,e,n,i){return t(e,n,i)},UFPkX:function(t,e){return n.omEVx(t,e)},pXEkt:function(t,e,i){return n.Lhshn(t,e,i)},eoZdZ:n.prKPD};a.close();let s={};s.text="取消",s.classList=[n.jXivu],new _0x7d5c32({closeOnEsc:!0,closeOnOverlayClick:!0,title:"退出",message:"確定要退出這個聊天室嗎，之後仍可重新加入",buttons:[s,{text:"確定",classList:["xTJA9U7y9"],onClick:async function(){let n=_0x14c585.findIndex(e=>e.id===t.id);if(e.PvHtt(n,-1))try{await k(e.YxHRY(p,_0x443a7a,"users",_0x3f9cc5),{joined:e.UFPkX(y,t.id)}),await e.pXEkt(k,p(_0x443a7a,"chats",t.id),{members:e.UFPkX(y,_0x3f9cc5)}),_0x14c585.splice(n,1),i.remove(),_0x233e16===t.id&&(_0x233e16=null,_0x758304.statusLabel.innerHTML="",_0x758304.roomNameLabel.innerText="未知",_0x758304.messageContainer.clear()),0===_0x14c585.length&&(_0x758304.primaryArea.innerHTML='<div class="xzF3bjGCc">尚未加入任何聊天室</div>')}catch(s){console.error(e.eoZdZ,s)}}}]})}),a.Content.appendChild(o),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M12.5 21h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M19 19m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /></svg>查看行程安排',r.bindWithCooldown(async function(){let n={VpYYc:"disabled",irmGu:function(t,n,i,s,a,o){return e.yggXP(t,n,i,s,a,o)},nDppL:"todos",NvLyy:"刪除失敗：",oKOAn:"chats",jXquF:function(t,n,i,s){return e.LiPHv(t,n,i,s)},dGEOd:"編輯行程",mcjPC:function(t,e){return t(e)},cadmD:"input",CQdDR:e.UxEBq,uXULW:e.BgMPS,umeCx:"text",wzWvC:e.XMvaZ,CLEIP:"xGuwEx6qN",vKzWL:"x9ZwavJjj",HaVDz:e.VoZua,oEllW:"time",ZziCZ:function(t,e){return t(e)},yThgl:function(t,n){return e.KvRgV(t,n)},sbjda:function(t,n){return e.oifRW(t,n)},uKeIa:e.BgPcJ,fLZFm:function(t){return e.EuiBS(t)},TBKYp:"hide",qjmYD:"xbrV3058R"};a.close();let i,s=_0x4739c8(e.PLrSK),o=e.QvYZU(_0x4739c8,e.yWzDV);if(_0x3084bc){let r={};r.parent=_0x758304.sidebar,r.title=e.Evdhb,(i=new _0x75e630(r)).Content.classList.add("x6q2Zh2QF"),i.Content.classList.add("xU2hUavXh"),i.Content.appendChild(s)}else(i=_0x2355af(e.Evdhb,!0)).content.classList.add("xb4MnocjO"),i.content.classList.add("lg"),i.body.appendChild(s);let l=e.VhVnv(_0x1c3cdb,[]);function c(s,a){let r={oNiSa:function(t,n){return e.jEUib(t,n)},HuWTk:function(t,e){return t!==e},yVZEG:function(t,e){return t!==e},hwGDE:function(t,n){return e.jEUib(t,n)},XGdvX:e.ByuWN,XUBYq:function(t){return t()}},c=e.ekVjf(_0x4739c8,e.gDUfh),d=e.oifRW(_0x4739c8,"xA9JMbz3o");c.appendChild(d),e.NTnTd(s.theme,e.VmhBp)?d.classList.add(e.WMPHD):e.xtBdR(s.theme,"pink")&&d.classList.add(e.BCxRh);let u=e.oifRW(_0x4739c8,e.zNHwk);c.appendChild(u);let h=e.MjSGt(_0x4739c8,e.TJCIr);h.innerHTML=s.name||"未知",u.appendChild(h);let $=e.ZWJIn(_0x4739c8,"xHQ4s8VGa");e.tBCwP(_0x100cca,$,s.description||e.LNlUC),u.appendChild($);let x=e.BsJGH(_0x38e922,s.startAt,s.endAt),v=e.rDtiY(_0x4739c8,"xPP6DGDrH");v.innerText=x,c.appendChild(v);let m=e.MjSGt(_0x4739c8,e.kriLy),g=e.rDtiY(_0x4739c8,e.Vwlus);g.innerHTML=_0x141c3b.edit,g.focusable(!0);let b=e.AABuc(_0x4739c8,e.Vwlus);b.innerHTML=_0x141c3b.trash,b.focusable(!0),e.jDAVF(_0x1c3cdb,[g,b],"horizontal"),b.bindWithCooldown(async function(){c.classList.add(n.VpYYc);try{b.focusable(!1),b.classList.add(n.VpYYc),g.focusable(!1),g.classList.add(n.VpYYc),await f(n.irmGu(p,_0x443a7a,"chats",t.id,n.nDppL,a)),console.log("已成功刪除行程："+a),c.remove(),l.removeItem(c)}catch(e){let i="1|4|3|0|5|2".split("|"),s=0;for(;;){switch(i[s++]){case"0":g.classList.remove("disabled");continue;case"1":b.focusable(!0);continue;case"2":c.classList.remove(n.VpYYc);continue;case"3":g.focusable(!0);continue;case"4":b.classList.remove(n.VpYYc);continue;case"5":console.error(n.NvLyy,e);continue}break}}}),m.appendChild(g),m.appendChild(b),c.appendChild(m),c.focusable(!0),l.addItem(c),o.appendChild(c);let _={};_.name=s.name||"未知",_.startAt=s.startAt||17356608e5,_.endAt=s.endAt||17356608e5,_.description=s.description||"";let C=_;function w(){let e={ZxekD:"disabled",kzIMD:n.oKOAn,xgfNC:function(t,e,n){return t(e,n)}},o=n.jXquF(_0x2355af,n.dGEOd,!0,i.Root);o.root.Overlay.classList.add("xOjXmYkxE");let l=n.mcjPC(_0x4739c8,"xGGKUZ7B3"),c="_"+_0x25a206(12),d=document.createElement("label"),u=document.createElement(n.cadmD);d.classList.add(n.CQdDR),u.classList.add(n.uXULW),d.htmlFor=c,d.textContent="標題",u.id=c,u.type=n.umeCx,u.value=C.name,u.maxLength=30,l.appendChild(d),l.appendChild(u);let x=_0x4739c8(n.wzWvC),f="_"+n.mcjPC(_0x25a206,12),v=document.createElement("label"),m=document.createElement("textarea");v.classList.add(n.CQdDR),m.classList.add(n.CLEIP),v.htmlFor=f,v.textContent="描述",m.id=f,m.rows=3,m.value=C.description,m.maxLength=80,x.appendChild(v),x.appendChild(m);let g=_0x4739c8(n.wzWvC);g.classList.add("xFJWlqoGn");let b="_"+_0x25a206(12),_=document.createElement("label"),w=n.mcjPC(_0x4739c8,n.vKzWL),L=document.createElement(n.cadmD),y=document.createElement("input");_.classList.add("xF37V7xd0"),L.classList.add("xYvZ9WF6d"),_.htmlFor=b,_.textContent="開始",L.type=n.HaVDz,L.id=b,y.classList.add("xYvZ9WF6d"),y.type=n.oEllW;let T="_"+n.ZziCZ(_0x25a206,12),E=n.yThgl(_0x4739c8,n.vKzWL),M=document.createElement("label"),H=document.createElement("input"),A=document.createElement("input");M.classList.add("xF37V7xd0"),H.classList.add(n.uXULW),M.htmlFor=T,M.textContent="結束",H.id=T,H.type=n.HaVDz,A.classList.add(n.uXULW),A.type=n.oEllW;let I=_0x4739c8(n.wzWvC),B=n.sbjda(_0x4739c8,n.uKeIa);B.classList.add("xwtdXtpQT"),B.textContent="完成",B.classList.add("disabled");let W={};function R(){""!==u.value.trim()&&L.value&&y.value&&H.value&&A.value&&(r.oNiSa(u.value,W._z)||r.HuWTk(L.value,W._a)||y.value!==W._b||r.yVZEG(H.value,W._c)||r.yVZEG(A.value,W._d)||r.hwGDE(m.value,W._y))?(B.focusable(!0),B.classList.remove("disabled")):(B.focusable(!1),B.classList.add(r.XGdvX))}W._z=s.name,W._y=s.description;let D=[u,L,y,H,A,m];if(D.forEach(t=>{t.oninput=R}),B.bindWithCooldown(async function(){let n={};n.RzwWF="disabled";let i=n;B.classList.add("disabled"),B.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>';let s=new Date(L.value+"T"+y.value).getTime(),r=new Date(H.value+"T"+A.value).getTime(),l=u.value,c=m.value;D.forEach(t=>{t.setAttribute(i.RzwWF,!0)});let d=p(_0x443a7a,e.kzIMD,t.id,"todos",a);try{let x="5|3|7|1|4|8|0|6|2".split("|"),f=0;for(;;){switch(x[f++]){case"0":_0x100cca($,C.description||"暫時還沒有描述哦");continue;case"1":C.startAt=s;continue;case"2":o.root.close();continue;case"3":C.name=l;continue;case"4":C.endAt=r;continue;case"5":let v={};v.endAt=r,v.startAt=s,v.name=l,v.description=c,await e.xgfNC(k,d,v);continue;case"6":console.log("已成功更新行程："+a);continue;case"7":C.description=c;continue;case"8":h.innerHTML=C.name;continue}break}}catch(g){console.error("更新失敗：",g),D.forEach(t=>{t.classList.remove(e.ZxekD)})}}),w.appendChild(_),w.appendChild(L),w.appendChild(y),E.appendChild(M),E.appendChild(H),E.appendChild(A),o.body.appendChild(l),o.body.appendChild(x),o.body.appendChild(g),o.body.appendChild(I),g.appendChild(w),g.appendChild(E),I.appendChild(B),C.startAt){let Y=new Date(C.startAt),j=new Date(C.startAt).toISOString().split("T")[0];console.log(j);let S=Y.toTimeString().split(":").slice(0,2).join(":");console.log(j),W._a=j,W._b=S,L.value=j,y.value=S}if(C.endAt){let P=new Date(C.endAt),O=new Date(C.endAt).toISOString().split("T")[0],V=P.toTimeString().split(":").slice(0,2).join(":");W._c=O,W._d=V,H.value=O,A.value=V}n.fLZFm(R),u.focus()}g.bindWithCooldown(function(t){t.stopPropagation(),r.XUBYq(w)})}s.appendChild(o);let d=_0x4739c8(e.Vputm);s.appendChild(d);let u=e.bRvsX(_0x4739c8,"xCgVOK4ur");d.appendChild(u);let h=e.QvYZU(_0x4739c8,e.bGizX),v=e.VhVnv(_0x4739c8,"x5FOXvrVK"),m=e.bRvsX(_0x4739c8,e.tbJya),b=_0x4739c8(e.haBHG);h.appendChild(v),h.appendChild(m),h.appendChild(b);let _=!1;v.innerText="編輯模式",m.innerText="預覽模式",h.focusable(!0),u.appendChild(h);let w=_0x4739c8(e.uMUph);w.classList.add(e.tDoPY),w.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5l0 14" /><path d="M5 12l14 0" /></svg>',w.focusable(!0),h.bindWithCooldown(function(){_?(w.classList.remove(n.TBKYp),o.classList.remove(n.qjmYD),h.classList.remove("xHCo3rIZ7"),_=!1):(w.classList.add("hide"),o.classList.add("xbrV3058R"),h.classList.add("xHCo3rIZ7"),_=!0)},0),w.bindWithCooldown(async function(){let n=e.lyBzy(p,e.EGjXl($,_0x443a7a,"chats",t.id,"todos")),i={name:e.TJiUs,description:"",startAt:Date.now(),endAt:Date.now()};await x(n,i),e.czvBX(c,i,n.id)},1e3),u.appendChild(w),o.innerHTML='<div class="xmBX2cWRZ spinner">'+_0x1a090f+"</div>";let L=await e.XfdEt(g,e.oTyxC(C,e.UUlLu($,_0x443a7a,"chats",t.id,"todos")));o.innerHTML='<div class="xmBX2cWRZ">還沒有任何行程，現在就創建一個吧</div>',0!==L.docs.length&&L.forEach(t=>{let n=t.data();e.byvWO(c,n,t.id)})}),a.Content.appendChild(r),a.Content.appendChild(c),d.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-door-exit"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 12v.01" /><path d="M3 21h18" /><path d="M5 21v-16a2 2 0 0 1 2 -2h7.5m2.5 10.5v7.5" /><path d="M14 7h7m-3 -3l3 3l-3 3" /></svg>退出',d.classList.add("xGy5QqsmI"),a.Content.appendChild(d),n.GKZse(_0x1c3cdb,[o,r,d]),a._setPosition()};if(l.bindWithCooldown(function(t){t.stopPropagation(),u()}),l.focusable(!0),i.focusable(!0),l.innerHTML='<svg aria-hidden="true" style="min-width: 20px;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>',s.appendChild(a),a.innerText=t.name||"未知",e=t.description?t.description:0===t.size?"沒有訊息":n.APhJq(_0x53c22c,t.size)+" 則訊息",o.innerText=e,s.appendChild(o),_0x758304.primaryArea.appendChild(i),t.focus){n.hSQoD(c);let h={};h.behavior="smooth",h.block=n.MXEKt,h.inline=n.VlrIN,i.scrollIntoView(h)}}function _0x36a502(t){let e={OVWTu:function(t,e){return t<e},xYJIF:function(t,e){return t/e},CgKel:function(t,e){return t/e},KSGOH:function(t,e){return t(e)},vqiYI:function(t,e){return t/e}},n=Math.max(Math.floor((Date.now()-t)/1e3),0);return n<60?n+" 秒前":e.OVWTu(n,3600)?Math.floor(n/60)+" 分鐘前":e.OVWTu(n,86400)?Math.floor(e.xYJIF(n,3600))+" 小時前":n<2592e3?Math.floor(n/86400)+" 天前":n<31536e3?Math.floor(e.CgKel(n,2592e3))+" 個月前":e.KSGOH(_0x53c22c,Math.floor(e.vqiYI(n,31536e3)))+" 年前"}function _0x571198(t){let e={};e.ooTbn=function(t,e){return t>=e},e.jzJzS=function(t,e){return t-e};let n=e,i=["B","KB","MB","GB","TB","PB"],s=t,a=0;for(;n.ooTbn(s,1024)&&a<n.jzJzS(i.length,1);)s/=1024,a++;return s.toFixed(2)+" "+i[a]}async function _0x1a4261(t,e){try{let n=p(_0x443a7a,"users",t);if(e){await k(n,e),_0x163354[t]&&(_0x163354[t]={..._0x163354[t],...e});let i=sessionStorage.getItem("upf_"+t);if(i){let s={...JSON.parse(i),...e};sessionStorage.setItem("upf_"+t,JSON.stringify(s))}}else delete _0x163354[t],sessionStorage.removeItem("upf_"+t);return!0}catch(a){return console.error("Failed to update user profile:",a),!1}}async function _0xf8ad07(t){let e={BvtFC:function(t,e,n,i){return t(e,n,i)},tzYTC:function(t,e){return t(e)}};if(_0x163354[t])return _0x163354[t];let n=sessionStorage.getItem("upf_"+t);if(n){let i=JSON.parse(n);return _0x163354[t]=i,i}try{let s=await e.tzYTC(v,e.BvtFC(p,_0x443a7a,"users",t));if(!s.exists())return null;{let a=s.data();return _0x163354[t]=a,sessionStorage.setItem("upf_"+t,JSON.stringify(a)),a}}catch(o){throw o}}async function _0x1fee1b(t){let e={IRBTl:function(t,e,n,i){return t(e,n,i)},mMATC:"chats",PTVpA:function(t,e){return t(e)}};if(_0x54e844[t])return _0x54e844[t];let n=sessionStorage.getItem("rpf_"+t);if(n){let i=JSON.parse(n);return _0x54e844[t]=i,i}try{let s=await e.PTVpA(v,e.IRBTl(p,_0x443a7a,e.mMATC,t));if(!s.exists())return null;{let a=s.data();return _0x163354[t]=a,sessionStorage.setItem("rpf_"+t,JSON.stringify(a)),a}}catch(o){throw o}}async function _0x48eb20(t,e){let n={lFGTx:function(t,e){return t===e},uhGru:function(t,e,n,i){return t(e,n,i)},PVvBS:"嘗試加載更多訊息",fNNpX:function(t,e){return t!==e},SISYg:"chats",FlgaX:"messages",dEFPr:function(t,e,n){return t(e,n)},atIJd:"timestamp",dgvur:function(t,e){return t===e}};if(console.log(n.PVvBS),n.fNNpX(_0x52b527,void 0)){_0x5166c1=!0;let i=await g(C($(_0x443a7a,n.SISYg,t,n.FlgaX),n.dEFPr(w,n.atIJd,"desc"),b(_0x52b527),T(10)));if(console.log(i.docs.length+" messages left"),n.dgvur(i.docs.length,0))return;_0x52b527=10===i.docs.length?i.docs[9]:void 0;let s=[];i.forEach(t=>{s.push(t)}),s.reverse();let a=0;_0x72e0a5=_0x4739c8("xWIHJooz8"),_0x3329d8="";let o=_0x758304.messageContainer.firstChild;_0x758304.messageContainer.insertBefore(_0x72e0a5,o);let r=_0x758304.messageContainer.scrollHeight;s.map(t=>{a++;let e=t.data();n.lFGTx(_0x165607.indexOf(t.id),-1)&&(e.sender===_0x3f9cc5?(_0x165607.push(t.id),_0x410d4f(e,t.id,"2")):(_0x165607.push(t.id),n.uhGru(_0x1184e5,e,t.id,"2")),_0x3329d8=e)}),_0x5166c1=!0,_0x29ea5a=_0x758304.messageContainer.scrollHeight-r;let l={};l.top=_0x29ea5a,l.left=0,l.behavior="instant",_0x758304.messageContainer.scrollTo(l),_0x29ea5a=0,setTimeout(function(){_0x5166c1=!1},500)}else _0x5166c1=!1}let _0x164d9b='.xikyLwDf4 .xVC8gtuyS[data-message-id="{sid}"]';function _0x174f13(t){let e={UDFhd:function(t,e){return t!==e},CtpdA:function(t,e){return t===e},wiTez:function(t,e){return t===e},pOJVM:function(t,e,n,i){return t(e,n,i)},EDZlA:function(t,e,n){return t(e,n)},TFIDu:function(t,e){return t(e)},KtjTb:"{sid}",VyngK:".xMyW2iRSH",kNHER:"找不到匹配的訊息容器",jCZnP:"修改訊息時發生未知錯誤",qBDgj:"An unknown error occurred",XorNv:function(t,e,n,i,s){return t(e,n,i,s)},TVGgI:"chats",FYIkg:"messages"};_(e.XorNv($,_0x443a7a,e.TVGgI,t,e.FYIkg),n=>{n.docChanges().forEach(n=>{if(e.UDFhd(_0x233e16,t))return;let i=n.doc.data();switch(n.type){case"added":i.sender!==_0x3f9cc5&&e.CtpdA(_0x165607.indexOf(n.doc.id),-1)&&!n.doc.metadata.fromCache&&(e.wiTez(document.visibilityState,"hidden")&&(_0x29a1ba++,document.title="("+_0x29a1ba+") "+_0xe9f2de),_0x165607.push(n.doc.id),e.pOJVM(_0x1184e5,i,n.doc.id,"3"));break;case"removed":let s=_0x387088(_0x164d9b.replace("{sid}",n.doc.id));try{s.classList.add("xl4gtQk5f"),e.EDZlA(setTimeout,function(){s.remove()},3e3)}catch(a){console.log(a)}break;case"modified":try{let o=e.TFIDu(_0x387088,_0x164d9b.replace(e.KtjTb,n.doc.id)).querySelector(e.VyngK);o?(o.clear(),_0x4bd0a3(o,i.content)):console.log(e.kNHER)}catch(r){console.log(e.jCZnP,r)}}})},t=>{console.error(e.qBDgj,t)})}function _0x40c783(){let t={GkVDM:"0|1|2|4|3",xbsDy:"disabled",fImcT:"User is logged in: ",VDGsF:"找不到這個帳號，請重新嘗試",SFZEz:function(t,e){return t===e},lSHPV:function(t){return t()},PpiKj:function(t,e){return t(e)},jqllA:function(t,e,n,i){return t(e,n,i)},tfiqp:"auth/popup-closed-by-user",jQrAa:function(t,e,n){return t(e,n)},kSkJn:"xA7y7OLtP",WGaVC:"歡迎回來",hzsPt:"x4V8Jejrz",sFIry:function(t,e){return t(e)},AOahM:"xRRuA0Z3S",XZOWl:"div",fUSQw:"actionbtn xYIKBnbHS",jENat:"xCmJYJQtp",LgsAG:"xySmLVr4a",fVilf:"xrYn5ZY3v",uAxIk:"xWDUelLWA",Ectty:"xZdL9CF5M",ZWtLt:"xGGKUZ7B3",Azeii:"xF37V7xd0",HibSl:"off",rnWgk:"10px",XCQDm:"5px",PteEO:"label",ssKne:"xw0IanPrC"},e=_0x4739c8("xrYn5ZY3v");e.innerText=t.WGaVC;let s=_0x4739c8(t.hzsPt);s.innerText="登入帳號後即可使用我們的服務";let o=t.sFIry(_0x4739c8,t.AOahM),r=document.createElement(t.XZOWl);r.id="x7BYgkdiJ",r.focusable(!0);let l='<svg aria-hidden="true" class="xGBqJjpdr" viewBox="0 0 20 20"><path d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z" fill=#4285F4></path><path d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z" fill=#34A853></path><path d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z" fill=#FBBC05></path><path d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z" fill=#EA4335></path></svg>使用 Google 登入';r.innerHTML=l;let c=document.createElement("div");c.focusable(!0),c.id="xBnuWNG6V",c.className="actionbtn xYIKBnbHS",r.className=t.fUSQw,c.innerHTML='<svg aria-hidden="true" class="xGBqJjpdr" viewBox="0 0 20 20"><path d="M1 5.006A2 2 0 012.995 3h14.01A2 2 0 0119 5.006v9.988A2 2 0 0117.005 17H2.995A2 2 0 011 14.994V5.006zM3 5l7 4 7-4v2l-7 4-7-4V5z" fill-rule=evenodd fill=#788aa2></path></svg>使用 電子郵件 登入',o.appendChild(r),o.appendChild(c);let d=new _0x469a9c;d.Content.classList.add("bt"),d.Root.classList.add(t.jENat),d.Content.classList.add(t.LgsAG),d.Content.appendChild(e),d.Content.appendChild(s),d.Content.appendChild(o);let u=t.sFIry(_0x4739c8,t.fVilf);u.classList.add("lf"),u.classList.add("gc");let h=_0x4739c8("xZyuwxZPZ");h.focusable(!0),h.innerHTML='<svg style="min-width: 24px" aria-hidden="true" class="xRmN7l0Zc" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>',u.appendChild(h);let $=t.sFIry(_0x4739c8,"x6Y89FynP");$.innerText="電子郵件登入",u.appendChild($);let x=_0x4739c8(t.uAxIk);x.classList.add("xwxpzc3QF"),d.Content.appendChild(u),d.Content.appendChild(x);let p=document.createElement(t.XZOWl);x.appendChild(p),p.classList.add(t.Ectty);let f=document.createElement(t.XZOWl);f.classList.add(t.ZWtLt),p.appendChild(f);let v=document.createElement("label");v.classList.add(t.Azeii),v.innerText="電子郵件地址",f.appendChild(v);let m=document.createElement("input");m.classList.add("xYvZ9WF6d"),m.autocomplete=t.HibSl,m.type="text",m.disabled=!0,m.spellcheck=!1,f.appendChild(m);let g=document.createElement(t.XZOWl);g.classList.add(t.ZWtLt),g.style.marginTop=t.rnWgk,g.style.marginBottom=t.XCQDm,p.appendChild(g);let b=document.createElement(t.PteEO);b.classList.add(t.Azeii),b.innerText="密碼",g.appendChild(b);let _=document.createElement("input");_.classList.add("xYvZ9WF6d"),_.type="password",_.disabled=!0,_.autocomplete="off",g.appendChild(_);let C=document.createElement("div");C.classList.add(t.ssKne),p.appendChild(C);let w=document.createElement("div");w.innerText="送出",w.classList.add(t.xbsDy),w.classList.add("x40AApYkW"),p.appendChild(w);let L=_0x4739c8("xPT7rhLdL");L.focusable(!0),L.innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l14 0"></path><path d="M5 12l6 6"></path><path d="M5 12l6 -6"></path></svg>返回上一頁',L.bindWithCooldown(function(){let e=t.GkVDM.split("|"),n=0;for(;;){switch(e[n++]){case"0":d.Content.classList.remove("xA7y7OLtP");continue;case"1":w.classList.add("disabled");continue;case"2":w.focusable(!1);continue;case"3":_.disabled=!0;continue;case"4":m.disabled=!0;continue}break}}),p.appendChild(L),h.bindWithCooldown(function(){d.Content.classList.remove("xA7y7OLtP"),w.classList.add(t.xbsDy),w.focusable(!1),m.disabled=!0,_.disabled=!0});let y=!0,k=function(){let e={};e.FPdBD="auth/invalid-login-credentials",e.fYkdx="密碼錯誤，請重新嘗試",e.BTSNj=t.VDGsF,e.YiCnX="發生未知的錯誤",e.hoUuy="disabled";let n=e;y&&(y=!1,h.classList.add(t.xbsDy),h.focusable(!1),C.classList.remove("show"),w.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>',m.disabled=!0,_.disabled=!0,w.classList.add("disabled"),w.focusable(!1),w.blur(),L.classList.add("disabled"),L.focusable(!1),a(_0x17fb00,m.value,_.value).then(e=>{try{d.close(),α.close()}catch(n){}let i=e.user;console.log(t.fImcT,i)}).catch(t=>{setTimeout(function(){let e=t.code;switch(C.classList.add("show"),e){case n.FPdBD:C.innerText=n.fYkdx;break;case"auth/invalid-email":C.innerText=n.BTSNj;break;case"auth/network-request-failed":C.innerText="網路請求錯誤，請檢查網路連線";break;default:C.innerText=n.YiCnX}w.innerHTML="送出",w.classList.remove(n.hoUuy),w.focusable(!0),L.classList.remove(n.hoUuy),L.focusable(!0),m.disabled=!1,_.disabled=!1,h.classList.remove("disabled"),h.focusable(!0),y=!0},3e3)}))};_.onkeydown=function(e){t.SFZEz(e.keyCode,13)&&t.lSHPV(k)},w.bindWithCooldown(k),r.bindWithCooldown(function(){let e={LJwAs:function(e,n,i,s){return t.jqllA(e,n,i,s)},UYznj:t.tfiqp,KDGap:t.xbsDy};r.classList.add(t.xbsDy),c.classList.add("disabled"),r.innerHTML='<div class="spinner">\n							<svg aria-hidden="true" class="xxA4Cqchz" style="min-width: 20px" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n								<path d="M12 3a9 9 0 1 0 9 9"></path>\n							</svg>\n							<span class="xkT2bkntT">等待中…</span>\n						</div>',r.focusable(!1),c.focusable(!1),t.jQrAa(n,_0x17fb00,_0x20a725).then(n=>{i.credentialFromResult(n).accessToken,_0x3f9cc5=n.user.uid,t.PpiKj(_0xf8ad07,_0x3f9cc5).then(t=>{try{e.LJwAs(_0x3b71d4,t.avatarUrl,t.name,t.signature)}catch(n){console.error("無法設置")}d.close()}).catch(t=>{console.error(t)})}).catch(t=>{if(t.code===e.UYznj){let n="2|0|1|4|3".split("|"),i=0;for(;;){switch(n[i++]){case"0":c.classList.remove(e.KDGap);continue;case"1":r.focusable(!0);continue;case"2":r.classList.remove("disabled");continue;case"3":r.innerHTML=l;continue;case"4":c.focusable(!0);continue}break}}})}),c.bindWithCooldown(function(){d.Content.classList.add(t.kSkJn),m.disabled=!1,_.disabled=!1,w.focusable(!0),w.classList.remove(t.xbsDy),m.focus()})}function _0x1c55d7(t="",e="",...n){let i={FBiJd:"disabled",ZZTEt:function(t,e,n,i){return t(e,n,i)},FzMoJ:"users",BoGBy:function(t,e,n){return t(e,n)},OEcHz:function(t,e,n){return t(e,n)},aEWRt:function(t,e){return t(e)},MIVqU:function(t,e){return t(e)},jxqAv:"編輯個人資料",BmWWC:"xWDUelLWA",lUvHm:"input",RBnvY:"hidden",cYbOd:"_Jy2eOVG7",UdUaV:"file",XnaVa:function(t,e){return t(e)},uruzD:"xGGKUZ7B3",ulpFi:"xF37V7xd0",oesoZ:"off",peSxj:function(t,e){return t(e)},CoCPk:"textarea"},s={};s.closeOnEsc=!0,s.closeOnOverlayClick=!0,s.excludeElements=n;let a=new _0x469a9c(s);a.Root.classList.add("xMCbxIsn5"),a.Content.style.padding="0";let o=i.aEWRt(_0x4739c8,"xrYn5ZY3v");o.classList.add("lf");let r=i.MIVqU(_0x4739c8,"x6Y89FynP");r.innerText=i.jxqAv,o.appendChild(r);let l=_0x4739c8("xvb5soWNa");l.focusable(!0),l.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',a.close=a.close.bind(a),l.bindWithCooldown(a.close),o.appendChild(l),a.Content.appendChild(o);let c=_0x4739c8(i.BmWWC);a.Content.appendChild(c);let d=document.createElement(i.lUvHm);d.setAttribute(i.RBnvY,"true"),d.id=i.cYbOd,d.type=i.UdUaV;let u=i.XnaVa(_0x4739c8,i.uruzD),h=document.createElement("label");h.innerText="暱稱",h.classList.add(i.ulpFi),h.htmlFor="_rJvAjH9O";let $=document.createElement(i.lUvHm);$.value=t,$.classList.add("xYvZ9WF6d"),$.id="_rJvAjH9O",$.type="text",$.maxLength="20",$.autocomplete=i.oesoZ,$.spellcheck=!1,c.appendChild(u),u.appendChild(h),u.appendChild($);let f=i.peSxj(_0x4739c8,"xGGKUZ7B3"),m=document.createElement("label");m.innerText="描述",m.classList.add("xF37V7xd0"),m.htmlFor="_fM6Qcf9q";let g=document.createElement(i.CoCPk);g.maxLength="80",g.value=e,g.classList.add("xGuwEx6qN"),g.id="_fM6Qcf9q",g.rows="3",g.maxLength="50",g.autocomplete="off",g.spellcheck=!1,c.appendChild(f),f.appendChild(m),f.appendChild(g);let b=_0x4739c8("x40AApYkW");function _(){g.value!==e||$.value!==t?(b.classList.remove("disabled"),b.focusable(!0)):(b.classList.add(i.FBiJd),b.focusable(!1))}async function C(){b.classList.add("disabled"),b.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>',b.focusable(!1),$.disabled=!0,g.disabled=!0,d.disabled=!0;let t=$.value,e=g.value.trim();if((await v(i.ZZTEt(p,_0x443a7a,i.FzMoJ,_0x3f9cc5))).exists()){let n={};n.name=t,n.signature=e,await i.BoGBy(_0x1a4261,_0x3f9cc5,n)}else await i.OEcHz(x,p(_0x443a7a,"users",_0x3f9cc5),{name:t,signature:e,id:_0x3f9cc5,joined:[],deviceInfo:""}),_0x758304.primaryArea.innerHTML='<div class="xzF3bjGCc">重新載入後方可完整更新您的資料</div>';_0x758304.nameLabel.innerText=t,_0x758304.signatureLabel.innerHTML=_0x5c2c21(e||"暫時還沒有描述哦"),_0x325f06.state&&(_0x325f06._n=t,_0x325f06._d=e,_0x325f06._a.innerText=t,_0x325f06._b.innerHTML=_0x10368b(_0x5c2c21(e))||"暫時還沒有描述哦",_0x325f06._m.forEach(e=>{e.userId===_0x3f9cc5&&(e.dom.textContent="@"+t)})),a.close()}b.innerText="完成",b.classList.add("disabled"),b.style.marginTop="0",c.appendChild(b),g.oninput=_,$.oninput=_,b.bindWithCooldown(C),$.focus()}async function _0x3dd692(t,e){let n=await g($(_0x443a7a,"chats",t.id,"messages"));if(!_0x14c585.some(e=>e.id===t.id)){let i={};i.name=t.name,i.id=t.id,i.type=t.type,i.tag=t.tag,i.description=t.description,i.size=n.size,i.members=t.members,i.focus=e,i.identity=t.identity,_0x411b3b(i)}}async function _0x26477c(){let t={CcuIi:function(t,e,n){return t(e,n)},zrUpd:function(t,e){return t(e)},DkNxT:"Error fetching document for ID:",MEfbt:"xuGldtFot",qSRtC:function(t,e){return t(e)}};_0x758304.primaryArea.classList.add(t.MEfbt);let e=(await t.qSRtC(v,p(_0x443a7a,"users",_0x3f9cc5))).data(),n=new URLSearchParams(window.location.search).get("r");(e.joined||[]).length>0?e.joined.map(async e=>{try{t.zrUpd(_0x1fee1b,e).then(async i=>{let s={};s.id=e,s.name=i.name,s.type=i.type,s.tag=i.tag,s.plugins=i.plugins,s.members=i.members,s.description=i.description,s.identity=i.identity,t.CcuIi(_0x3dd692,s,n===e)})}catch(i){console.error(t.DkNxT,e,i)}}):_0x758304.primaryArea.innerHTML='<div class="xzF3bjGCc">尚未加入任何聊天室</div>'}s(_0x17fb00,t=>{let e={qGzUH:function(t){return t()},prEfD:function(t,e,n,i){return t(e,n,i)},EOHeZ:function(t){return t()}};t?(_0xf8ad07(_0x3f9cc5=t.uid).then(t=>{if(!t){e.qGzUH(_0x1c55d7);return}e.prEfD(_0x3b71d4,t.avatarUrl,t.name,t.signature)}).catch(t=>{console.error(t),_0x3b71d4()}),_0x35078f()):(_0x3f9cc5="",e.EOHeZ(_0x40c783))});let _0x460429={};_0x460429.audio='<path d="M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0" />',_0x460429.video='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="m10 11 5 3-5 3v-6Z" />',_0x460429.image='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><circle cx="10" cy="12" r="2" /><path d="m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22" />',_0x460429.archive='<path d="M10 12v-1" /><path d="M10 18v-2" /><path d="M10 7V6" /><path d="M14 2v4a2 2 0 0 0 2 2h4" /><path d="M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01" /><circle cx="10" cy="20" r="2" />',_0x460429.others='<path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" /><path d="M14 2v4a2 2 0 0 0 2 2h4" />';let _0x462446=_0x460429;_0x758304.fileInput.onchange=async function(t){let e={SWnBA:"上傳遭中斷",pLnNC:"已取消上傳",eJFIY:function(t,e){return t/e},UNXMD:function(t,e){return t(e)},omQhM:function(t,e,n,i,s){return t(e,n,i,s)},wGUVQ:"chats",SHwoz:"上傳完成",Efcfm:"這個文件已經成功上傳了",OIkTN:function(t,e){return t(e)},HzvQN:function(t,e){return t(e)},qnmkc:"x6Y89FynP",dDyQQ:function(t,e){return t(e)},SKenu:"xujSSErs5",iTrvK:function(t,e){return t>e},tEMxc:"上傳中",SAxbb:"正在上傳中，請耐心等待",SMcTO:"div",ugOPe:"xCECpHDwZ",jOKRL:"xty9qDHrl",AzMrR:"xIEj1ZAnA",vFIuY:function(t,e){return t(e)},hpaNx:"< image {u}",LGfqg:"video/",npFPw:"audio/",aOBgK:function(t,e){return t!==e},LIDFA:"application/x-zip-compressed",PJVlE:"application/x-rar-compressed",aEgWj:"application/vnd.rar",wXqPy:"< other {u}",DIhqw:"< pdf {u}",oKNxW:"xk0osKWCK",SXldP:function(t,e){return t(e)},rOtkg:function(t,e,n){return t(e,n)},oOrmL:"state_changed"},n=t.target.files[0];if(!n)return;let i={};i.closeOnEsc=!0,i.closeOnOverlayClick=!0;let s=new _0x469a9c(i);s.Lock=!0;let a=e.OIkTN(_0x4739c8,"xrYn5ZY3v");a.classList.add("lf");let o=e.HzvQN(_0x4739c8,"xWDUelLWA");o.classList.add("xIOucKmLX"),s.Content.appendChild(a),s.Content.appendChild(o),s.Content.classList.add("gt");let r=_0x4739c8(e.qnmkc),u=e.dDyQQ(_0x4739c8,e.SKenu);a.appendChild(r),o.appendChild(u);let h=e.dDyQQ(_0x4739c8,"xvb5soWNa");if(h.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',h.focusable(!0),a.appendChild(h),e.iTrvK(n.size,52428800)){r.innerText="上傳失敗",u.innerText="這個文件有 "+e.OIkTN(_0x571198,n.size)+"，我們無法負擔",h.onclick=function(){_0x758304.fileInput.value="",s.close.bind(s)()},s.Lock=!1;return}r.innerText=e.tEMxc,u.innerText=e.SAxbb;let f=document.createElement(e.SMcTO);f.classList.add(e.ugOPe),f.focusable(!0),o.appendChild(f);let v=document.createElement(e.SMcTO);v.classList.add(e.jOKRL),f.appendChild(v);let m=document.createElement("div");m.classList.add(e.AzMrR);let g=e.vFIuY(String,n.type),b="",_="";g.startsWith("image/")?(b=_0x462446.image,_=e.hpaNx):g.startsWith(e.LGfqg)?(b=_0x462446.video,_="< video {u}"):g.startsWith(e.npFPw)?(b=_0x462446.audio,_="< audio {u}"):e.aOBgK([e.LIDFA,"application/zip",e.PJVlE,e.aEgWj,"application/x-compressed"].indexOf(g),-1)?(b=_0x462446.archive,_=e.wXqPy):"application/pdf"===g?(b=_0x462446.others,_=e.DIhqw):(b=_0x462446.others,_=e.wXqPy),m.innerHTML='<svg aria-hidden="true" style="min-width: 28px" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'+b+"</svg>",v.appendChild(m);let C=document.createElement(e.SMcTO);C.classList.add("xxs4n9nhX"),v.appendChild(C),C.innerHTML='<div class="xTGGn7ABj">'.concat(n.name).concat('</div><div class="xtyaQiCLO">'+_0x571198(n.size)+"</div>"),v.appendChild(C);let w=document.createElement("div");w.classList.add("xsoLox5sj"),v.appendChild(w);let L=document.createElement(e.SMcTO);L.classList.add(e.oKNxW),w.appendChild(L);let y="";try{y=e.SXldP(_0x25a206,12)+"-"+n.name}catch(k){console.log("生成文件名時發生未知錯誤",k)}let T=l(_0x2d26b8,"uploads/"+_0x233e16+"/attachment/"+y),E=e.rOtkg(c,T,n);h.onclick=function(){r.innerText=e.SWnBA,u.innerText=e.pLnNC,s.Lock=!1,E.cancel(),_0x758304.fileInput.value="",s.close()},E.on(e.oOrmL,t=>{let n=100*e.eJFIY(t.bytesTransferred,t.totalBytes);L.style.width=n+"%"},t=>{console.log(t)},async()=>{let t=await e.UNXMD(d,E.snapshot.ref),n="";n=_.replace("{u}",t);let i=p(e.omQhM($,_0x443a7a,e.wGUVQ,_0x233e16,"messages"));await x(i,{sender:_0x3f9cc5,content:n,timestamp:Date.now()});let a={};a.content=n,_0x410d4f(a,i.id,"3"),_0x758304.fileInput.value="",f.remove(),r.innerText=e.SHwoz,u.innerText=e.Efcfm,h.onclick=()=>{},s.Lock=!1,h.bindWithCooldown(function(){s.close()})})},document.addEventListener("visibilitychange",function(){let t={};t.rvaLj="已重新聚焦 清除未讀訊息數","visible"===document.visibilityState&&(console.log(t.rvaLj),document.title=_0xe9f2de,_0x29a1ba=0)}),_0x758304.searchInput.oninput=function(){let t={};t.PPYCw=function(t,e){return t!==e};let e=_0x758304.searchInput.value.toLowerCase().trim();t.PPYCw(e,"")?_0x14c585.forEach(t=>{t.name.toLowerCase().includes(e)?t.dom.classList.remove("hide"):t.dom.classList.add("hide")}):_0x14c585.forEach(t=>{t.dom.classList.remove("hide")})},_0x758304.messageContainer.addEventListener("scroll",function(){let t={};t.ZlefX=function(t,e){return t!==e},t.mvdxK=function(t,e){return t<e};let e=t,n=_0x758304.messageContainer.scrollTop;e.ZlefX(_0x3f9cc5,"")&&e.ZlefX(_0x233e16,"")&&e.mvdxK(n,120)&&!_0x5166c1&&(_0x2aa01d=!0,_0x48eb20(_0x233e16))}),_0x758304.messageInput.oninput=function(){let t={};t.YuXCv=function(t,e){return t===e},t.blbHz=function(t,e){return t!==e};let e=t,n=_0x758304.messageInput.childNodes;1==n.length&&e.YuXCv(n[0].nodeName,"BR")&&_0x758304.messageInput.clear(),e.blbHz(_0x758304.messageInput.innerText.trim(),"")?(_0x758304.sendButton.classList.remove("disabled"),_0x758304.sendButton.focusable(!0)):(_0x758304.sendButton.classList.add("disabled"),_0x758304.sendButton.focusable(!1))},_0x758304.messageInput.onfocus=function(){document.body.classList.add("xYIbDcl9T")},_0x758304.messageInput.onblur=function(){document.body.classList.remove("xYIbDcl9T")},_0x758304.messageInput.onpaste=function(t){let e={};e.ppwNg="insertHTML",e.WDNBu="text/plain";let n=e;t.preventDefault(),document.execCommand(n.ppwNg,!0,_0x5c2c21((t.clipboardData||window.Clipboard).getData(n.WDNBu)))},_0x758304.messageInput.ondrop=function(t){let e={};e.pvwBl="text/plain",t.preventDefault();let n=t.dataTransfer.getData(e.pvwBl);t.target.focus(),document.execCommand("insertHTML",!0,_0x5c2c21(n))},_0x758304.messageInput.oncopy=function(t){let e={};e.hwYLf="text/plain",t.preventDefault();var n=window.getSelection().toString();t.clipboardData.setData(e.hwYLf,n)},_0x758304.messageInput.addEventListener("keydown",function(t){switch(t.keyCode){case 13:_0x3084bc||t.shiftKey||(t.preventDefault(),_0x24c716());break;case 85:case 66:case 73:t.ctrlKey&&t.preventDefault()}}),_0x758304.sendButton.bindWithCooldown(_0x24c716),document.onkeydown=function(t){let e={};e.hrZDT=function(t,e){return t!=e},e.pQFhb="xYvZ9WF6d";let n=e;switch(t.keyCode){case 191:let i=document.activeElement;n.hrZDT(i,_0x758304.messageInput)&&n.hrZDT(i,_0x758304.searchInput)&&"INPUT"!=i.tagName.toUpperCase()&&!i.classList.contains("xGuwEx6qN")&&!i.classList.contains(n.pQFhb)&&(t.preventDefault(),_0x758304.messageInput.focus());break;case 75:t.ctrlKey&&_0x40fb06&&(t.preventDefault(),_0x758304.searchInput.focus());break;case 123:t.preventDefault();break;case 67:t.ctrlKey&&t.shiftKey&&t.preventDefault();break;case 85:case 187:case 189:case 80:case 83:case 79:case 109:case 107:t.ctrlKey&&t.preventDefault();break;case 37:case 39:t.altKey&&t.preventDefault()}},document.querySelectorAll("body > div").forEach(function(t){t.onwheel=function(t){t.ctrlKey&&t.preventDefault()}}),_0x758304.backButton.bindWithCooldown(function(){let t={};t.vZQPl="disabled",t.UwBvK="contenteditable";let e=t;_0x31f426=_0x758304.sidebar,_0x758304.backButton.classList.add(e.vZQPl),_0x758304._mb_att_btn.classList.add("disabled");let n=window.location.href.replace(/\?.*$/,"");window.history.replaceState(null,"",n),_0x758304.main.classList.remove("x8VAGH6N2"),_0x5166c1=!0,_0x758304.messageContainer.clear(),_0x5166c1=!1,_0x233e16="",_0xe9f2de="Structure",document.title=_0xe9f2de,_0x758304.messageInput.clear(),_0x758304.messageInput.setAttribute(e.UwBvK,"true"),_0x758304.messageInput.focusable(!1),_0x758304.sendButton.classList.add(e.vZQPl),_0x758304.sendButton.focusable(!1)}),_0x758304.profileContainer.bindWithCooldown(function(){let t={HeUfW:function(t,e,n,i){return t(e,n,i)},vryLa:"chats",Yibia:function(t,e){return t(e)},jdNel:function(t,e){return t===e},AyIbs:"disabled",Mbkni:function(t,e,n){return t(e,n)},qkqng:"jid",gxhfj:function(t,e){return t===e},BrHZI:"normal",QpyMi:function(t){return t()},qpEGj:function(t,e){return t!==e},AliVB:function(t,e,n){return t(e,n)},ZOMLo:"加入聊天室",HOwHL:"邀請碼",flwOM:"input",VfzZj:"x4qSHIItt",uHgfv:"off",uesHC:"cvs",UdHZp:"xmKH3ad5R",RkAJU:"x9EnCPd4S",bjaYx:"top",ZrfSE:function(t,e){return t(e)},caepV:"xrQdSHI2A",sUMdA:function(t,e){return t(e)}},e={};e.trigger=_0x758304.profileContainer,e.placement=t.bjaYx;let n=new _0x501f0b(e);n.Content.classList.add("xLhiIL2Wm"),_0x758304.profileContainer.classList.add(t.RkAJU);let i=_0x4739c8("xrQdSHI2A");i.focusable(!0),i.innerHTML='<svg style="min-width: 24px" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M8 9h8" /><path d="M8 13h6" /><path d="M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5" /><path d="M16 19h6" /><path d="M19 16v6" /></svg>加入聊天室',i.bindWithCooldown(function(){let e={nosyl:"disabled",RPPdv:"show",rnOJr:function(e,n){return t.qpEGj(e,n)},agljh:"normal",wAhfe:function(t){return t()},gaxeZ:function(t,e){return t!==e}};n.close();let i=t.AliVB(_0x2355af,t.ZOMLo,!0);i.Root.classList.add("xUhQpBm2v");let s=_0x4739c8("xGGKUZ7B3");s.classList.add("xlEirFRi3");let a="_"+t.Yibia(_0x25a206,12),o=document.createElement("label");o.textContent=t.HOwHL,o.htmlFor=a,o.classList.add("xF37V7xd0");let r=document.createElement(t.flwOM);r.classList.add(t.VfzZj),r.id=a,r.autocomplete=t.uHgfv,r.autocorrect=t.uHgfv,r.maxLength="8",r.classList.add("xYvZ9WF6d"),r.classList.add("xYvZ9WF6d"),s.appendChild(o),s.appendChild(r);let l=_0x4739c8("xw0IanPrC"),c=_0x4739c8("x40AApYkW");c.classList.add("disabled"),c.textContent="送出";let d=t.AyIbs;async function u(){let n={Vaxav:function(t,e,n){return t(e,n)},WsEVe:function(e,n,i,s){return t.HeUfW(e,n,i,s)},QILRk:"users",UntSh:function(t,e,n){return t(e,n)},vEtJJ:t.vryLa,wgLmi:function(e,n){return t.Yibia(e,n)},ZuLPd:function(e,n){return t.jdNel(e,n)},MpcHa:"smooth"};i.root.Lock=!0,i.closebtn.classList.add(t.AyIbs),i.closebtn.focusable(!1),l.classList.remove("show"),c.classList.add(t.AyIbs),r.setAttribute(t.AyIbs,!0),c.innerHTML='<svg aria-hidden="true" class="x3xXCjYFp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>';let s=await g(t.Mbkni(C,$(_0x443a7a,t.vryLa),t.HeUfW(m,t.qkqng,"==",r.value.trim())));s.empty?setTimeout(function(){let t="6|7|4|3|5|0|1|2".split("|"),n=0;for(;;){switch(t[n++]){case"0":r.removeAttribute(e.nosyl);continue;case"1":c.classList.remove("disabled");continue;case"2":c.innerHTML="送出";continue;case"3":l.classList.add(e.RPPdv);continue;case"4":i.closebtn.focusable(!0);continue;case"5":l.innerText="無效的邀請碼，請重新嘗試";continue;case"6":i.root.Lock=!1;continue;case"7":i.closebtn.classList.remove("disabled");continue}break}},3e3):(i.root.Lock=!1,i.root.close());let a=[];s.forEach(t=>{let e={};e.id=t.id,a.push(e)}),a.forEach(async t=>{let e=_0x14c585.find(e=>e.id===t.id);if(e){if(n.ZuLPd(a.length,1)){let i={};i.behavior=n.MpcHa,i.block="center",i.inline="nearest",e.dom.scrollIntoView(i),e.launch()}console.log("已經加入了，不用再加入")}else await n.Vaxav(k,n.WsEVe(p,_0x443a7a,n.QILRk,_0x3f9cc5),{joined:L(t.id)}),await n.UntSh(k,p(_0x443a7a,n.vEtJJ,t.id),{members:L(_0x3f9cc5)}),sessionStorage.removeItem("rpf_"+t.id),n.wgLmi(_0x1fee1b,t.id).then(async e=>{let n={};n.id=t.id,n.name=e.name,n.type=e.type,n.tag=e.tag,n.plugins=e.plugins,n.members=e.members,n.description=e.description,n.identity=e.identity,_0x3dd692(n,!0),console.log("成功加入",t.id)})})}function h(){let t=r.value.trim();8===t.length&&e.rnOJr(t,"")?(c.classList.remove(e.nosyl),c.focusable(!0),d=e.agljh):(c.classList.add(e.nosyl),c.focusable(!1),d="disabled")}r.oninput=function(){e.wAhfe(h)},r.onkeydown=function(e){t.jdNel(e.keyCode,13)&&t.gxhfj(d,t.BrHZI)&&t.QpyMi(u)},c.bindWithCooldown(async function(){e.gaxeZ(d,"normal")||u()}),i.body.appendChild(s),i.body.appendChild(l),i.body.appendChild(c),r.focus()});let s=t.ZrfSE(_0x4739c8,t.caepV);s.focusable(!0),s.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h1.5" /><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M20.2 20.2l1.8 1.8" /></svg>查看個人資料',s.bindWithCooldown(function(){let t={mgAiU:function(t,e,n){return t(e,n)},kqghP:"desktop"};n.close(),_0xf8ad07(_0x3f9cc5).then(e=>{t.mgAiU(_0x3b47c4,_0x758304.sidebar,{data:e,type:_0x3084bc?"mobile":t.kqghP})}).catch(t=>{console.error(t)})});let a=_0x4739c8("xcoXgMpFW"),r=_0x4739c8("xrQdSHI2A");r.focusable(!0),r.bindWithCooldown(function(){let e={};e.LnWHx="Sign out error";let i=e;n.close(),o(_0x17fb00).then(()=>{_0x3f9cc5="",_0x233e16="",_0x14c585.length=0,_0x165607.length=0,_0x40fb06=!1;let e=window.location.href.replace(/\?.*$/,"");window.history.replaceState(null,"",e),_0x758304.primaryArea.clear(),_0x758304.messageContainer.clear(),localStorage.setItem(t.uesHC,""),_0x1680f5&&(_0x1680f5.remove(),_0x1680f5=null),document.body.classList.remove(t.UdHZp),_0x758304.profileContainer.classList.remove("disabled"),_0x758304.profileContainer.focusable(!0),_0x758304.markButton.classList.add("disabled"),_0x758304.brushButton.classList.add("disabled"),_0x758304.attachButton.classList.add("disabled"),_0x758304.stickerButton.classList.add("disabled"),_0x1ef9ce=!1,_0x758304.avatarWrapper.classList.add("xJd2GT7MI"),_0x758304.avatarLabel.src="",_0x758304.nameLabel.innerText="",_0x758304.signatureLabel.innerText=""}).catch(t=>{console.error(i.LnWHx,t)})}),r.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" /><path d="M9 12h12l-3 -3" /><path d="M18 15l3 -3" /></svg>登出',t.sUMdA(_0x1c3cdb,[i,s,r]),n.Content.appendChild(i),n.Content.appendChild(s),n.Content.appendChild(a),n.Content.appendChild(r),n._setPosition(),n.onClose(()=>{_0x758304.profileContainer.classList.remove(t.RkAJU)})});class _0x75e630{constructor({parent:t,title:e}){let n={cesCl:function(t,e){return t(e)},IUIGR:"xB4hVI3El",aLbMP:function(t,e){return t(e)},yPrGX:"xopQXJrX5",HtJqw:function(t,e){return t(e)}},i=t,s=n.cesCl(_0x4739c8,n.IUIGR),a=n.aLbMP(_0x4739c8,n.yPrGX),o=_0x4739c8("xZz4zYjIm"),r=n.HtJqw(_0x4739c8,"xMyenRl7K"),l=n.HtJqw(_0x4739c8,"x8JU9DbQZ"),c=_0x4739c8("xvwhg72ii");this._parent=i,this.Root=s,this.Content=o,this.Heading=a,this._backButton=l,this._deactivated_elements=document.querySelectorAll("body > *:not(.xEHCrF5Oe, script, [hidden])"),this._deactivated_elements.forEach(t=>{t.setAttribute("inert","true")}),a.appendChild(r),r.appendChild(l),r.appendChild(c),c.textContent=e,l.focusable(!0),l.innerHTML='<svg style="min-width: 24px" aria-hidden="true" class="xvx75W2b4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n								<path d="m12 19-7-7 7-7"></path>\n								<path d="M19 12H5"></path>\n							</svg>',l.bindWithCooldown(this.close.bind(this)),s.appendChild(a),s.appendChild(o),document.body.appendChild(s),setTimeout(function(){_0x31f426=s,i.classList.add("xCr0RyqCg"),s.classList.add("xa2pPtuLq")},50)}onClose(t){this.onCloseCallback=t}close(){let t={REMzT:"inert",kCsqn:"xa2pPtuLq",njaWY:function(t,e,n){return t(e,n)}};this.onCloseCallback&&this.onCloseCallback(),this._deactivated_elements.forEach(e=>{e.removeAttribute(t.REMzT)}),_0x31f426=this._parent,this.Root.classList.remove(t.kCsqn),this._parent.classList.remove("xCr0RyqCg"),this._parent.classList.remove("xjv5U11Kz"),this.Root.classList.remove("xjv5U11Kz"),t.njaWY(setTimeout,()=>{this.Root.remove()},100)}}async function _0x3b47c4(t,e){let n={TkGAj:function(t,e,n,i){return t(e,n,i)},jQEzs:"xORN7XV1j",GBitG:function(t,e,n,i){return t(e,n,i)},Rqhjg:function(t,e,n,i){return t(e,n,i)},lKKFe:function(t,e){return t>e},GFrIa:'<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>',yQxED:"xkyfCNAI0",UJPPj:function(t,e){return t(e)},KtbRs:"x0zSVRG3y",ILheK:function(t,e){return t===e},Qrbxi:"video",aZUxj:"muted",MRjwj:"img",FWGPg:"assets/default-banner.png",zabhL:"lazy",SzbOW:"xkKF4v6d2",xOpHG:"xwvIJoAtO",tCRVz:"xzCCWGB1D",RQtMG:function(t,e){return t(e)},TLAlL:"xBjZoCxmV",mRQla:"xl2FSOZLU",ghkUy:"xLFOP2Fs3",TuSgc:"xt0pX9m5p",GVIUg:"assets/avatar.png",UWAlR:"x2OCp76zA",BRzhO:function(t,e){return t(e)},KHPZN:"xylvbLNlS",UdRak:function(t,e){return t(e)},HRXOz:function(t,e){return t+e},VVABn:function(t,e){return t+e},VQlhv:function(t,e){return t+e},cZrIx:function(t,e){return t+e},MnKzs:function(t,e){return t+e},lqOPb:function(t,e){return t(e)},ytXzL:function(t,e){return t||e},vYFBm:function(t,e){return t(e)},reQZe:"裝置信息",bfeRu:"xodqSvoQM",IwtuD:"xlY0G76Nv",Hgxyx:"xjMiLDVEU",BXqFP:function(t,e){return t(e)},THxnR:"xjMYgfYFc",oUQss:"xHPTUCUar",tkZek:function(t,e){return t===e},KLYxK:function(t,e,n){return t(e,n)},TMBBu:"horizontal",EIHKw:"x8JU9DbQZ"};_0x325f06.state=!0,_0x325f06._n||(_0x325f06._n=e.data.name),_0x325f06._d||(_0x325f06._d=e.data.signature);let i=n.GFrIa,s=_0x4739c8(n.yQxED),a=n.UJPPj(_0x4739c8,n.KtbRs),o,r={};r.action="cache-url",r.url=e.data.bannerUrl,navigator.serviceWorker?.controller?.postMessage(r);let l={};l.action="cache-url",l.url=e.data.avatarUrl,navigator.serviceWorker?.controller?.postMessage(l),n.ILheK(e.data.bannerType,"video")?((o=document.createElement(n.Qrbxi)).loop=!0,o.controlslist="nodownload",o.controls=!1,o.setAttribute(n.aZUxj,""),o.playsInline=!0,o.preload=!0,o.autoplay=!0,o.src=e.data.bannerUrl):((o=document.createElement(n.MRjwj)).draggable=!1,o.src=e.data.bannerUrl||n.FWGPg,o.loading=n.zabhL),o.classList.add("x96ofpjeu");let c=_0x4739c8(n.SzbOW),d=_0x4739c8(n.xOpHG),u=document.createElement("img");u.classList.add("xVwXc1fhM");let h=_0x4739c8(n.tCRVz),$=n.RQtMG(_0x4739c8,"xqYV0G7JT"),x=n.UJPPj(_0x4739c8,n.TLAlL),p=n.UJPPj(_0x4739c8,n.mRQla);p.classList.add(n.ghkUy);let f=_0x4739c8(n.TuSgc);s.appendChild(a),a.appendChild(o),s.appendChild(c),$.appendChild(d),d.appendChild(u),u.draggable=!1,u.src=e.data.avatarUrl||n.GVIUg,u.loading="lazy",c.appendChild(h),h.appendChild($);let v=_0x4739c8(n.UWAlR);h.appendChild(v);let m=_0x4739c8("xokk3UP7N");$.appendChild(m);let g=_0x325f06._n,b=n.BRzhO(_0x4739c8,"x117sdiIx");b.textContent=g,x.appendChild(b);let _=n.RQtMG(_0x4739c8,"xxXoB6W0R");_.textContent=e.data.id,m.appendChild(x),m.appendChild(_),_0x325f06._a=b,_0x325f06._b=p,p.innerHTML=_0x10368b(_0x5c2c21(_0x325f06._d||"暫時還沒有描述哦")),c.appendChild(f);let C=n.RQtMG(_0x4739c8,n.KHPZN);C.innerText="描述",f.appendChild(C),f.appendChild(p);let w=n.UJPPj(_0x4739c8,"xylvbLNlS");w.id="xY3QPRePs",w.textContent="最後上線";let L=n.UdRak(_0x4739c8,"xodqSvoQM"),y=new Date(e.data.deviceInfo.lastUpdate),k=n.HRXOz(n.HRXOz(n.VVABn(n.VQlhv(n.cZrIx(y.getFullYear(),"/")+n.MnKzs(y.getMonth(),1),"/")+y.getDate()," "),y.getHours().toString()),":")+y.getMinutes().toString().padStart(2,"0");L.innerText=(n.lqOPb(_0x36a502,e.data.deviceInfo.lastUpdate)||"未知")+" ("+n.ytXzL(k,"未知")+")",f.appendChild(w),f.appendChild(L);let T=n.vYFBm(_0x4739c8,"xylvbLNlS");T.textContent=n.reQZe;let E=_0x4739c8(n.bfeRu);if(E.innerHTML=e.data.deviceInfo.os+" "+e.data.deviceInfo.screen,f.appendChild(T),f.appendChild(E),"desktop"===e.type){let M={};M.closeOnEsc=!0,M.closeOnOverlayClick=!0;let H=new _0x469a9c(M);H.Content.classList.add(n.IwtuD),H.Content.classList.add("lg"),H.Content.classList.add("gb");let A=_0x4739c8(n.Hgxyx),I=n.UJPPj(_0x4739c8,"xUHiz9aGO"),B=_0x4739c8("xhMhXcFlu"),W=n.BXqFP(_0x4739c8,"xIl46kG8k"),R=_0x4739c8(n.THxnR);W.appendChild(R),R.textContent=e.data.name,I.appendChild(W),I.appendChild(B);let D=n.lqOPb(_0x4739c8,n.oUQss);if(D.bindWithCooldown(H.close.bind(H)),D.innerHTML='<svg aria-hidden="true" style="min-width: 24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',D.focusable(!0),n.tkZek(e.data.id,_0x3f9cc5)){let Y=_0x4739c8("xHPTUCUar");Y.bindWithCooldown(function(){n.TkGAj(_0x1c55d7,_0x325f06._n,_0x325f06._d,H.Root)}),Y.innerHTML=_0x141c3b.edit,Y.focusable(!0),B.appendChild(Y),n.KLYxK(_0x1c3cdb,[Y,D],n.TMBBu)}B.appendChild(D),A.appendChild(I),H.Content.appendChild(A),A.appendChild(s);let j=H.Content.getBoundingClientRect();if(H.Content.style.setProperty("--xD672nKxG",j.height+"px"),A.onscroll=function(){A.scrollTop>60?A.classList.add(n.jQEzs):A.classList.remove(n.jQEzs)},e.data.verified){let S=n.lqOPb(_0x4739c8,"xTKxbdpu3");S.innerHTML=i,x.appendChild(S),S.bindWithCooldown(function(){n.GBitG(_0x2355af,"說明",!0,H.Root).body.innerHTML='<div class="xrrfDPLS2">此帳號已驗證</div>'})}H.onClose(function(){let t="1|2|0|4|3".split("|"),e=0;for(;;){switch(t[e++]){case"0":_0x325f06._b=null;continue;case"1":_0x325f06.state=!1;continue;case"2":_0x325f06._a=null;continue;case"3":_0x325f06._d="";continue;case"4":_0x325f06._n="";continue}break}})}else{let P={};P.parent=t,P.title=e.data.name;let O=new _0x75e630(P);if(e.data.id===_0x3f9cc5){let V=_0x4739c8(n.EIHKw);V.bindWithCooldown(function(){n.Rqhjg(_0x1c55d7,_0x325f06._n,_0x325f06._d,O.Root)}),V.innerHTML=_0x141c3b.edit,V.focusable(!0),O.Heading.appendChild(V)}O.Root.classList.add("xwMgtrL2x"),O.onClose(function(){_0x325f06.state=!1,_0x325f06._a=null,_0x325f06._b=null,_0x325f06._n="",_0x325f06._d=""}),O.Root.onscroll=function(){n.lKKFe(O.Root.scrollTop,60)?O.Root.classList.add("xORN7XV1j"):O.Root.classList.remove("xORN7XV1j")},O._backButton.classList.add("xnS3FTqjp"),O.Content.appendChild(s)}}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(t=>{let e={};e.fXmKl="installed";let n=e;t.onupdatefound=()=>{let e=t.installing;e.onstatechange=()=>{e.state===n.fXmKl&&window.location.reload()}}}).catch(t=>{let e={};e.szaws="註冊失敗：";let n=e;console.log(n.szaws,t)});
