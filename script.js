console.log("\uD83D\uDC80 Please do not perform any operations in the console, attackers may steal your data.");const _=function(e){return document.querySelector(e)},isMobileDevice=/(Android|webOS|Windows Phone|iPhone|iPod|iPad)/i.test(window.navigator.platform)||window.innerWidth<550;var myTimeout,hasInterim=!0;window.currentRoom="",window.currentPage=0,isMobileDevice&&document.body.classList.add("mobile");var components={activitybar:_(".activitybar"),sidebar:_(".sidebar"),main:_(".main"),messageInput:_(".xtsARDHTI"),searchInput:_(".xujXllYgW"),messageArea:_(".xikyLwDf4"),sendButton:_(".xuwRtDpu4"),autoComplete:_(".x8mGJ6BvQ")},_N0=!1,_GF=!1;function _A16(e){components.messageInput.innerHTML="",_A17(e)}function _A9(e){for(var t="",n=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=a.length;n<e;)t+=a.charAt(Math.floor(Math.random()*s)),n+=1;return t}function _A18(e){return e.replace(/https?:\/\/[^\s/$.?#].[^\s]*/g,function(e){return'<a class="x0ciSQShX" href="'.concat(e,'" target="_blank">').concat(decodeURIComponent(e),"</a>")})}function _A2(){if(!1===_GF){components.searchInput.removeAttribute("disabled"),components.searchInput.setAttribute("tabindex","0"),components.messageArea.classList.remove("xVjpzmyej"),_(".xnKzgeITl")&&_(".xnKzgeITl").remove();var e=new Date().getHours();_A25(`{dl}好，歡迎回來，現在就開始對話吧！`.replace("{dl}",e>=5&&e<11?"早上":e>=11&&e<14?"中午":e>=14&&e<18?"下午":"晚上"),"0","陌生人","現在"),_GF=!0,_N0=!0}}function _A17(e){var t=e.replace(/&([^;]+)/g,"&amp;$1").replaceAll("<","&lt;").replaceAll(">","&gt;"),n=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");i.classList.add("xRHoYYwoZ"),a.classList.add("xMyW2iRSH"),n.classList.add("xVC8gtuyS"),s.classList.add("xKljxgVJA"),o.classList.add("xu4Celbbq"),n.appendChild(s),s.appendChild(i),i.appendChild(o),i.appendChild(a);var r=_A18(t).trim().replace(/(\r?\n){3,}/g,"\n\n").replace(/\n+$/,"").replaceAll("\n","<br>");a.innerHTML=r,n.classList.add("xiOw4dg0O"),o.innerHTML='<div class="xc4iCj2Gy">你</div>',sendMessage(window.currentRoom,r,n),components.messageArea.appendChild(n),components.messageArea.scrollTo({top:components.messageArea.scrollHeight,behavior:"smooth"})}function _A22(e,t,n=!0){var a=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");if(r.classList.add("xRHoYYwoZ"),s.classList.add("xMyW2iRSH"),a.classList.add("xVC8gtuyS"),o.classList.add("xKljxgVJA"),i.classList.add("xu4Celbbq"),a.setAttribute("data-mid",t),a.appendChild(o),o.appendChild(r),r.appendChild(i),r.appendChild(s),s.innerHTML=e,a.classList.add("xiOw4dg0O"),i.innerHTML='<div class="xc4iCj2Gy">你</div>',n)components.messageArea.appendChild(a),components.messageArea.scrollTo({top:components.messageArea.scrollHeight,behavior:"smooth"});else{let c=components.messageArea.firstChild;components.messageArea.insertBefore(a,c)}}function _A25(e,t,n,a,s=!0){var o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),u=document.createElement("div");if(u.classList.add("xRHoYYwoZ"),i.classList.add("xMyW2iRSH"),o.classList.add("xVC8gtuyS"),r.classList.add("xSYcbYqTG"),c.classList.add("xKljxgVJA"),l.classList.add("xu4Celbbq"),d.classList.add("xc4iCj2Gy"),p.classList.add("xuvoVURIs"),m.classList.add("xt8fROB2L"),p.innerText=" • ",m.innerText=a,console.log(t),o.setAttribute("data-mid",t),o.appendChild(r),o.appendChild(c),c.appendChild(u),u.appendChild(l),l.appendChild(d),l.appendChild(p),l.appendChild(m),u.appendChild(i),d.innerHTML=n,i.innerHTML=e,s)components.messageArea.appendChild(o),components.messageArea.scrollTo({top:components.messageArea.scrollHeight,behavior:"smooth"});else{let v=components.messageArea.firstChild;components.messageArea.insertBefore(o,v)}}window.totalNoSee=0,document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState&&(document.title="Structure",totalNoSee=0)}),components.messageInput.addEventListener("input",function(e){""===e.target.innerText.trim()&&(e.target.innerHTML="")}),components.messageInput.addEventListener("keydown",function(e){switch(e.keyCode){case 13:e.shiftKey||""===e.target.innerHTML.trim()||isMobileDevice||(e.preventDefault(),_N0?_A16(e.target.innerText):console.log("Unable to send the message"));break;case 85:case 66:e.ctrlKey&&e.preventDefault()}}),components.sendButton.onclick=function(){""!==components.messageInput.innerHTML.trim()&&(_N0?_A16(components.messageInput.innerText):console.log("Unable to send the message"))},components.messageInput.onpaste=function(e){e.preventDefault(),document.execCommand("insertHTML",!0,(e.clipboardData||window.clipboardData).getData("text/plain").replace(/&([^;]+)/g,"&amp;$1").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("	","    ").replaceAll(" ","&nbsp;").replaceAll("\n","<br>"))},document.onkeydown=function(e){switch(e.keyCode){case 191:"true"===components.messageInput.getAttribute("contenteditable")&&document.activeElement!==components.messageInput&&document.activeElement!==components.searchInput&&(e.preventDefault(),_(".xtsARDHTI").focus());break;case 75:e.ctrlKey&&_N0&&(e.preventDefault(),components.searchInput.focus());break;case 123:e.preventDefault();break;case 67:e.ctrlKey&&e.shiftKey&&e.preventDefault();break;case 85:case 79:case 187:case 189:case 83:e.ctrlKey&&e.preventDefault();break;case 37:case 39:e.altKey&&e.preventDefault()}},document.querySelectorAll("body > div").forEach(function(e){e.onwheel=function(e){e.ctrlKey&&e.preventDefault()}}),document.oncontextmenu=function(e){e.preventDefault()},window._A25=_A25,_(".xehdiGgBv .xMyenRl7K .x8JU9DbQZ").onclick=function(){window.currentRoom="",_(".main").classList.remove("x8VAGH6N2"),components.messageInput.setAttribute("contenteditable","false"),components.messageInput.setAttribute("tabindex","-1"),components.sendButton.setAttribute("tabindex","-1")},document.addEventListener("touchstart",function(e){e.touches&&e.touches.length>1&&e.preventDefault()},{passive:!1});var lastTouchEndTime=0;document.addEventListener("touchend",function(e){var t=new Date().getTime();t-lastTouchEndTime<=300&&e.preventDefault(),lastTouchEndTime=t},!1),document.addEventListener("gesturestart",function(e){e.preventDefault()});var _f991=!0;function formatNumberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function createChatRoom(e,t,n,a){let s=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");s.setAttribute("tabindex","0"),s.classList.add("x2fP9fkxS"),createListener(t);let c=async()=>{(window.currentRoom!==t||isMobileDevice)&&(window.lastDoc=void 0,window.currentRoom=t,loadChatHistory(window.currentRoom),components.messageArea.innerHTML="",components.sendButton.classList.remove("disabled"),components.messageInput.setAttribute("contenteditable","true"),isMobileDevice||(_(".x2fP9fkxS.active")&&_(".x2fP9fkxS.active").classList.remove("active"),_(".x2fP9fkxS.interim:not(.active)")&&_(".x2fP9fkxS.interim:not(.active)").remove(),s.classList.add("active")),isMobileDevice&&_(".xehdiGgBv .xMyenRl7K .x8JU9DbQZ").setAttribute("tabindex","0"),_(".main").classList.add("x8VAGH6N2"),_(".xvwhg72ii").innerText=s.getAttribute("data-roomName"),components.messageInput.setAttribute("contenteditable","true"),components.messageInput.setAttribute("tabindex","0"),components.sendButton.setAttribute("tabindex","0"))};s.onclick=function(){c()},s.onkeydown=function(e){13===e.keyCode&&(components.messageArea.innerHTML="",c())},s.setAttribute("data-roomid",t),s.setAttribute("data-roomname",e),s.appendChild(o),o.classList.add("xQ65c0Nkc"),i.classList.add("xybvM5cRF"),o.appendChild(i),i.innerText=e,r.classList.add("xT3Ta8vKw"),r.innerHTML=`
		<span class="x97KBA8qs"><span class="x0o9XxPwY">${formatNumberWithCommas(n)}</span> 則訊息</span><span class="xVSkoFFmK">•</span><span class="x6EjoHfJB">${a}</span>
	`,o.appendChild(r),_(".xemr1y6ie").appendChild(s)}function timeAgo(e){let t=Math.floor((Date.now()-e)/1e3);return t<60?`${t}秒`:t<3600?`${Math.floor(t/60)}分鐘`:t<86400?`${Math.floor(t/3600)}小時`:t<2592e3?`${Math.floor(t/86400)}天`:t<31536e3?`${Math.floor(t/2592e3)}個月`:`${Math.floor(t/31536e3)}年前`}components.messageInput.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer.getData("text/plain");try{e.target.focus(),document.execCommand("insertHTML",!0,t.replace(/&([^;]+)/g,"&amp;$1").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("	","    ").replaceAll(" ","&nbsp;").replaceAll("\n","<br>"))}catch(n){console.log(n)}}),components.sendButton.onkeydown=e=>{13===e.keyCode&&""!==components.messageInput.innerHTML.trim()&&(_N0?_A16(components.messageInput.innerText):console.log("Unable to send the message"))},components.searchInput.oninput=()=>{myTimeout&&clearTimeout(myTimeout),myTimeout=setTimeout(function(){console.log("Success")},500)},_(".x8u3Iqtu9").onclick=function(){components.searchInput.focus()},components.searchInput.onblur=()=>{setTimeout(function(){window.scrollTo(0,0)},500)},components.messageInput.oncopy=e=>{e.preventDefault();let t=window.getSelection().getRangeAt(0),n=document.createElement("div");n.appendChild(t.cloneContents());let a=n.textContent||n.innerText||"";e.clipboardData.setData("text/plain",a)},components.messageArea.addEventListener("scroll",function(){0===(components.messageArea.pageYOffset||components.messageArea.scrollTop)&&window.loadMoreChatHistory(window.currentRoom)});
